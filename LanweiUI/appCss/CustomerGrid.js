require({cache:{"app/util/Functions":function(){define(["dojo/_base/declare"],function(g){var e=g([],{});e.getCursorPosition=function(c){c=c||window.event;var a={x:0,y:0};if(c.pageX||c.pageY)a.x=c.pageX,a.y=c.pageY;else{var b=document.documentElement,f=document.body;a.x=c.clientX+(b.scrollLeft||f.scrollLeft)-(b.clientLeft||0);a.y=c.clientY+(b.scrollTop||f.scrollTop)-(b.clientTop||0)}return a};e.getMonthWeek=function(c){var a=c.getDay();c=c.getDate();return Math.ceil((c+6-a)/7)};e.compareObjects=function(c,
a){if("object"!=typeof c||"object"!=typeof a)return!1;var b={},f;for(f in c)"function"!=typeof c[f]&&(b[f]=1);for(f in a)"function"!=typeof a[f]&&(b[f]=1);for(f in b){if("undefined"==typeof c[f]||"undefined"==typeof a[f])return!1;if("object"==typeof c[f]&&"object"==typeof a[f])if(c[f]instanceof Date&&a[f]instanceof Date){if(c[f].getTime()!==a[f].getTime())return!1}else{if(!e.compareObjects(c[f],a[f]))return!1}else if(c[f]!==a[f])return!1}return!0};e.isPositiveInteger=function(c){return c==parseInt(c,
10)&&0<c};e.isBlank=function(c){return void 0===c||null===c||"string"===typeof c&&""===dojo.trim(c)};e.confirm=function(c,a,b,f){require(["chanjet/widget/Dialog"],function(l){(new l({title:a,content:c,buttonClick:function(a,d,c){"ok"==c?"function"===typeof b&&b():"function"===typeof f&&f();this.hide()}})).show()})};e.alert=function(c,a,b){a="string"===typeof a?a:"";require(["chanjet/widget/Dialog"],function(f){(new f({bottomButtons:[{label:"\u786e\u8ba4",sTag:"ok"}],title:a,showInfoIcon:!0,content:c,
buttonClick:function(a,f,d){"function"===typeof b&&b();this.hide()}})).show()})};e.error=function(c){console&&"function"===typeof console.error&&console.error(c)};e.debug=function(c){};e.log=function(c){};e.getTextnode=function(c){var a=document.createElement("div");a.appendChild(document.createTextNode(c));return a.innerHTML};e.getUrlParam=function(c){c=RegExp("(^|\x26)"+c+"\x3d([^\x26]*)(\x26|$)");c=window.location.search.substr(1).match(c);return null!=c?unescape(c[2]):null};e.cutString=function(c,
a){for(var b=0,f="",l=/[^\x00-\xff]/g,k="",d=c.replace(l,"**").length,h=0;h<d;h++){k=c.charAt(h).toString();null!=k.match(l)?b+=1.6:b++;if(b>a)break;f+=k}d>a&&(f+="...");return f};return e})},"app/vm/WorkrecordEditDialog":function(){define("dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dojo/text!./tpl/workrecordDetail.html dojo/dom-construct dojo/dom-attr dojo/dom-style app/util/_WidgetBase dojo/json dojo/on dojo/string app/util/CacheStore chanjet/form/Combox chanjet/widget/Dialog chanjet/form/Select dijit/Tooltip chanjet/util/query app/widget/upload/Upload app/widget/upload/Progress dojo/_base/kernel app/widget/editor/index app/widget/editor/source/textParse app/util/_InputChangeMixin".split(" "),
function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s,t,p,y,w,z,A,B,C){b=g("app.vm.WorkrecordEdit",[k],{title:null,item:null,fromCustomer:!1,workrecordDialog:null,workrecordEditPanel:null,isValid:!0,validateMessage:"",callback:null,postCreate:function(){this.inherited(arguments);this._initComps();this._initEvent();this.init();this.workrecordEditPanel.validate()},init:function(){this._initData();this.workrecordEditPanel.init();this.workrecordDialog.set("title",this.title)},_initData:function(){this.title=this.item&&
!this.fromCustomer?"\u7f16\u8f91\u5de5\u4f5c\u8bb0\u5f55":"\u65b0\u589e\u5de5\u4f5c\u8bb0\u5f55";this.workrecordEditPanel.item=this.item;this.workrecordEditPanel.fromCustomer=this.fromCustomer},_initComps:function(){var a=this;this.workrecordDialog=new r({"class":"wrorklist",autoDestroy:!0,bottomButtons:[{label:"\u53d6\u6d88",sTag:"cancel",baseClass:"whiteButton"},{label:"\u4fdd\u5b58",sTag:"ok",baseClass:"whiteButton"}],contentMaxHeight:"auto",contentMinHeight:"270px",style:"width : 700px;min-height:370px;",
buttonClick:function(b,f,d){"ok"==d?(App.showLoading(),a._saveOrUpdateWR()):(a.workrecordEditPanel.destroy(),this.destroy())}});this.workrecordEditPanel=new v({objId:this.objId,owner:this,createCallback:e.hitch(this,this._createdHandler)})},_initEvent:function(){this.own(h(this.workrecordEditPanel,"validated",e.hitch(this,this._validatedHandler)))},_validatedHandler:function(a){for(var b=this.workrecordDialog._bottomButtonslist,d=0,p=b.length;d<p;d++)"ok"==b[d].sTag&&a.isValid!=this.isValid&&(!0==
a.isValid?(b[d].set("disabled",!1),f.set(b[d].domNode,"title","")):(b[d].set("disabled",!0),f.set(b[d].domNode,"title",a.message)));this.isValid=a.isValid},_createdHandler:function(a){this.workrecordDialog.addChild(a)},show:function(){this.workrecordDialog.show()},_saveOrUpdateWR:function(){if(!this.connecting){this.connecting=!0;var a=this.workrecordEditPanel.getData(),b=URL.workList,d=this;this.item&&!this.fromCustomer?(a.id=this.item.id,xhr.put(b,a,function(a){d.connecting=!1;App.hideLoading();
d.emit("dataChange",{action:"modify",item:a});d.destroy()},function(){d.connecting=!1;App.hideLoading()})):(a.localId="-"+(new Date).getTime(),xhr.post(b,a,function(a){d.connecting=!1;App.hideLoading();d.emit("dataChange",{action:"new",item:a});d.destroy()},function(){d.connecting=!1;App.hideLoading()}))}},destroy:function(){this.workrecordEditPanel.destroy();this.workrecordDialog.destroy();this.inherited(arguments)}});var v=g("app.nav.WorkrecordEditPanel",[k,c,C],{item:null,templateString:a,connectComps:null,
connectIsValid:!0,contentIsValid:!1,contentInValidMessage:"",processValid:!0,enumLoadFlag:!1,createCallback:null,uploadImgArray:null,postCreate:function(){this._initComps();this._initEvent();this.init();this.createCallback&&this.createCallback({domNode:this.domNode});this._onTextBlur();if(!App.profile.firstAt){var a=this.tipAtNode;$(a).removeClass("hide");setTimeout(function(){a.style.right="35px"},300)}},destroy:function(){clearTimeout(this._delay);this.inherited(arguments)},init:function(){this._initData()},
_initData:function(){this.item?(this.item.customer&&(this.connectComps.setDisplayedValue(this.item.customer.name),this.connectComps.item=this.item.customer),this.connectComps.set("disabled",!0),!this.fromCustomer&&!this.item.customer&&l.set(this.connectComps.domNode,"display","none"),this._onInputChange(),this.item.status&&this.progressComps.set("value",this.item.status.value),this.fromCustomer||this.progressComps.set("disabled",!0)):(this.contentIsValid=!1,this.contentInValidMessage="\u8bf7\u8f93\u5165\u5de5\u4f5c\u8bb0\u5f55\u6b63\u6587\u6216\u9009\u62e9\u56fe\u7247\u4e0a\u4f20",
this.uploadImgArray=[])},_initComps:function(){A.bind({editor:this.editNode,teamid:App.orgId});var a=this,b={queryExpr:"${0}",searchAttr:"param",itemAttr:"name",autoComplete:!1,style:{width:"262px",marginRight:"10px"},placeHolder:"\u9009\u62e9\u5ba2\u6237",pageSize:10,store:n.getStore({target:URL.wrCustomer,idProperty:"id"}),labelFunc:function(a,b){return a.name},invalidMessage:"\u8bf7\u70b9\u51fb\u9009\u62e9\u5ba2\u6237",validator:e.hitch(this,function(){return this.connectIsValid})};this.connectComps=
new q(b,this.connectNode);b={name:"progress",required:!1,labelAttr:"label",style:{width:"200px"},placeHolder:"\u9009\u62e9\u8ddf\u8fdb\u8fdb\u5ea6",_fillContentHandler:function(){},invalidMessage:"\u8bf7\u5148\u9009\u62e9\u5ba2\u6237\uff0c\u518d\u8bbe\u7f6e\u8ddf\u8fdb\u72b6\u6001",validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this.invalidMessage;b&&this.focused&&
this._hasBeenBlurred?t.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):t.hide(this.domNode);this._set("message",b);return a},isValid:e.hitch(this,function(){return this.processValid})};this.progressComps=new s(b,this.progressNode);this.progressComps.addOption({label:"\u65e0",value:""});this._initUploadImgCounter();b={url:URL.attamentUpload,postParams:{type:"image"},sizeLimit:10,fileTypes:"*.jpg;*.jpeg;*.gif;*.png;*.bmp",typesDescription:"Web Image Files",uploadLimit:0,buttonImage:App.imagePath+
"uploadImgButton.png",width:60,height:45,"class":"img-upload",customSettings:{progressTarget:"uploadImages"},onReady:function(b){a.uploadImgCounter.checkAttach()?(this.swfu.cancelUpload(b.id,!1),App.tip("\u6700\u591a\u53ea\u80fd\u4e0a\u4f20"+a.uploadImgCounter.maxCount+"\u5f20\u56fe\u7247\uff01",{cls:"error"}),a._showMaxCover()):(a.uploadedImagesNode.style.display="block",(new w(b,this.customSettings.progressTarget,a)).toggleCancel(!0,this.swfu,b),a.uploadImgCounter.standByCount++,a._scrollUploadImgList(),
a._onInputChange())},onReadyError:function(a,b,d){-110==b?App.tip("\u4e0a\u4f20\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7"+this.sizeLimit+"M",{cls:"error"}):-130==b?App.tip(a.name+"\u662f\u4e0d\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b",{cls:"error"}):App.tip(d,{cls:"error"})},onUploadStart:function(a){return!0},onProgress:function(a,b,d){if(!a.canceled)try{var f=Math.floor(100*(b/d));(new w(a,this.customSettings.progressTarget)).setProgress(f)}catch(p){this.debug(p)}},onSuccess:function(b,
f){var c=d.parse(f);a.uploadImgArray.push(c);var h=new w(b,this.customSettings.progressTarget);h.setProgress(100);h.uploadData=c;c=d.parse(f);h=p("#"+b.id+" \x3e div")[0];p("[node-type\x3dthumb]",h).attr("src",c.url);a.uploadImgCounter.imgCount++;a.uploadImgCounter.standByCount--;a.uploadImgCounter.checkAttach()&&a._showMaxCover();h.childNodes[3].style.display="none";h.childNodes[4].style.visibility="visible";a._onInputChange()},onError:function(b,d,f){a.uploadImgCounter.standByCount--;var p=this.swfu;
if(b)try{var c=new w(b,this.customSettings.progressTarget);c.setError(p,b,d,f);a._cancelUploadImg(c);"-280"!=d&&App.tip(b.name+"\u4e0a\u4f20\u5931\u8d25",{cls:"error"});a._onInputChange()}catch(h){}},onFinish:function(){a._onInputChange()},onCancel:function(){}};this.uploadImgComp1=new y(b,this.uploadImgBtn1);b=e.clone(b);e.mixin(b,{buttonImage:App.imagePath+"/addImgLabelBt.png",width:71,height:13});this.uploadImgComp2=new y(b,this.uploadImgBtn2);this.statusData||xhr.get(URL._baseurl+"services/metadata/enum/statusEnum",
{},e.hitch(this,function(a){if(!this.statusData){this.statusData=a;for(var b=0,d=a.length;b<d;b++)this.progressComps.addOption(a[b]);this.item&&this.item.status&&this.progressComps.setValue(this.item.status.value)}}),e.hitch(this,function(){}))},_initUploadImgCounter:function(){this.uploadImgCounter||(this.uploadImgCounter={checkAttach:function(){return this.imgCount+this.standByCount>=this.maxCount}});this.uploadImgCounter=e.mixin(this.uploadImgCounter,{maxCount:9,imgCount:0,standByCount:0,showCount:7})},
_showMaxCover:function(){this.maxAttachNode.style.display="block"},_hideMaxCover:function(){this.maxAttachNode.style.display="none"},_removeUploadImgNode:function(a){a=(a.srcElement||a.target).parentNode.parentNode;var b=p("#"+a.id+" \x3e div \x3e img")[0].src||"";-1==b.indexOf("mrImg.png")&&this.uploadImgCounter.imgCount--;this._refreshUploadImgListForRemove(a.id,b);z.destroy(a);this.uploadImgCounter.checkAttach()||this._hideMaxCover();0==this.uploadImgCounter.imgCount+this.uploadImgCounter.standByCount&&
(this.uploadedImagesNode.style.display="none");this._onInputChange()},_refreshUploadImgListForRemove:function(a,b){for(var d=p(".imageList"),f=0,c=-1,h=-1,l=d.length,k=0;k<l;k++)d[k].id==a&&(f=k),this.isFlyAway(d[k])&&k+1<l&&this.isFlyBack(d[k+1])?c=k:this.isFlyBack(d[k])&&(k+1<l&&this.isFlyAway(d[k+1]))&&(h=k+1);this.flyAway(d[f]);-1!=h?(this.flyBack(d[h]),h==l-1?(this.nextLi.style.display="none",this.nextLiDisable.style.display="block"):(this.nextLi.style.display="block",this.nextLiDisable.style.display=
"none")):-1!=c&&(this.flyBack(d[c]),0==c?(this.prevLi.style.display="none",this.prevLiDisable.style.display="block"):(this.prevLi.style.display="block",this.prevLiDisable.style.display="none"));d=[];for(f=0;f<this.uploadImgArray.length;++f)this.uploadImgArray[f].url!=b&&d.push(this.uploadImgArray[f]);this.uploadImgArray=d},_cancelUploadImg:function(a){this._refreshUploadImgListForRemove(a.fileProgressID,"");z.destroy(p("#"+a.fileProgressID)[0]);this.uploadImgCounter.checkAttach()||this._hideMaxCover();
0==this.uploadImgCounter.imgCount+this.uploadImgCounter.standByCount&&(this.uploadedImagesNode.style.display="none")},_scrollUploadImgList:function(){var a=p(".imageList");if(a.length-1>=this.uploadImgCounter.showCount){this.prevLi.style.display="block";this.prevLiDisable.style.display="none";this.nextLi.style.display="none";this.nextLiDisable.style.display="none";for(var b=0;b<a.length;++b)b<=a.length-(this.uploadImgCounter.showCount+1)?this.flyAway(a[b]):this.flyBack(a[b])}else this.prevLi.style.display=
"none",this.prevLiDisable.style.display="block",this.nextLi.style.display="none",this.nextLiDisable.style.display="block"},_doPrev:function(){var a=p(".imageList"),b=a.length-1,d=1;if(a.length>this.uploadImgCounter.showCount){for(;0<=b;--b)if(this.isFlyBack(a[b])&&1==d)this.flyAway(a[b]),d++;else if(this.isFlyBack(a[b]))d++;else if(this.isFlyAway(a[b])&&8==d){this.flyBack(a[b]);break}0==b?(this.prevLi.style.display="none",this.prevLiDisable.style.display="block"):(this.prevLi.style.display="block",
this.prevLiDisable.style.display="none");this.nextLi.style.display="block";this.nextLiDisable.style.display="none"}},_doNext:function(){var a=p(".imageList"),b=0,d=1;if(a.length>this.uploadImgCounter.showCount){for(;b<a.length;++b)if(this.isFlyBack(a[b])&&1==d)this.flyAway(a[b]),d++;else if(this.isFlyBack(a[b]))d++;else if(this.isFlyAway(a[b])&&8==d){this.flyBack(a[b]);break}b==a.length-1?(this.prevLi.style.display="block",this.prevLiDisable.style.display="none",this.nextLi.style.display="none",this.nextLiDisable.style.display=
"block"):(this.prevLi.style.display="block",this.prevLiDisable.style.display="none",this.nextLi.style.display="block",this.nextLiDisable.style.display="none")}},flyAway:function(a){a.style.position="absolute";a.style.left="1000000px"},flyBack:function(a){a.style.position="relative";a.style.left="0"},isFlyAway:function(a){return"absolute"==a.style.position},isFlyBack:function(a){return"relative"==a.style.position},_initEvent:function(){var a=this;this.own(h(this.editNode,"focus",e.hitch(this,this._onTextFocus)),
h(this.editNode,"blur",e.hitch(this,this._onTextBlur)),h(this.editNode,this.keyType,e.hitch(this,this._inputHandler)),h(this.connectComps,"blur",e.hitch(this,this._connectBlurHandler)),h(this.connectComps,"change",e.hitch(this,this._connectChangeHandler)),h(this.progressComps,"change",e.hitch(this,this._progressChangeHandler)),h(this.uploadedImagesNode,h.selector(".wk_delUpload","click"),e.hitch(this,this._removeUploadImgNode)),h(this.prevLi,"click",e.hitch(this,this._doPrev)),h(this.nextLi,"click",
e.hitch(this,this._doNext)),h(this.closeNode,"click",function(){a.tipAtNode.className="hide";xhr.post(URL.profile,{key:"firstAt",value:"true"});App.profile.firstAt=!0}))},_onTextFocus:function(){this.editNode.className="wk_creatTop";this._freshStatus()},_onTextBlur:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null);m.trim(this.editNode.innerText||this.editNode.textContent||"")||(this.editNode.innerHTML="",dojo.addClass(this.editNode,"tw_textBg1"))},_freshStatus:function(){var a=
this;this.timer&&clearInterval(this.timer);this.timer=window.setInterval(function(){m.trim(a.editNode.innerText||a.editNode.textContent||"")?a.contentIsValid?a.setSaveBtnStatus(!1):a.setSaveBtnStatus(!0):a.setSaveBtnStatus(!0)},100)},setSaveBtnStatus:function(a){this.owner.workrecordDialog._bottomButtonslist[1].get("disabled")!=a&&(a?this.emit("validated",{isValid:!1,message:"has letter"}):this.emit("validated",{isValid:!0,message:"empty"}))},_connectBlurHandler:function(){this._delay=setTimeout(e.hitch(this,
function(){0!=this.connectComps.get("value").length?this.connectIsValid=this.connectComps.item?!0:!1:this.connectIsValid=!0;this.connectComps.validate();this.validate()}),100)},_connectChangeHandler:function(a){function b(){for(var a=d.statusData,f=d.progressComps,p=d.progressComps.options,c=0,h=p.length;c<h;c++)f.removeOption(p[c]);c=0;for(h=a.length;c<h;c++)f.addOption(a[c]);d.item?d.item.status?f.set("value",d.item.status.value):(f.addOption({label:"\u65e0",value:" "}),f.set("value"," ")):d.connectComps.item&&
d.connectComps.item.status?f.set("value",d.connectComps.item.status.value):(f.addOption({label:"\u65e0",value:" "}),f.set("value"," "))}var d=this;this.statusData?b():xhr.get(URL._baseurl+"services/metadata/enum/statusEnum",{},e.hitch(this,function(a){this.statusData=a;b()}),e.hitch(this,function(){}))},_onInputChange:function(){var a=B.parseAtText(A.getContent(this.editNode)).length;0==a||255<a?255<a?($(this.tipNode).html('\u60a8\u5df2\u8d85\u51fa\u4e86\x3cspan class\x3d"notice-label-num notice-label-num-error"\x3e'+
(a-255)+"\x3c/span\x3e\u5b57"),this.contentIsValid=!1,this.contentInValidMessage="\u5185\u5bb9\u5df2\u8d85\u8fc7255\u5b57\uff0c\u4e0d\u80fd\u4fdd\u5b58"):0==a&&0<this.uploadImgArray.length&&0==this.uploadImgCounter.standByCount?(this.contentIsValid=!0,this.contentInValidMessage=""):0==a&&0<this.uploadImgCounter.standByCount?(this.contentIsValid=!1,this.contentInValidMessage="\u56fe\u7247\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u540e"):($(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e255\x3c/span\x3e\u5b57'),
this.contentIsValid=!1,this.contentInValidMessage="\u8bf7\u8f93\u5165\u5de5\u4f5c\u8bb0\u5f55\u6b63\u6587\u6216\u9009\u62e9\u56fe\u7247\u4e0a\u4f20"):($(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e'+(255-a)+"\x3c/span\x3e\u5b57"),this.contentIsValid=!0,this.contentInValidMessage="");this.validate()},_progressChangeHandler:function(){m.trim(this.progressComps.get("value"))?this.processValid=this.connectComps&&this.connectComps.item?!0:!1:this.processValid=
!0;this.validate()},validate:function(){var a=this.connectIsValid&&this.contentIsValid&&this.processValid,b=this.contentInValidMessage||"\u5173\u8054\u5ba2\u6237\u4e0d\u6b63\u786e";this.progressComps.validate();this.item&&A.getContent(this.editNode)==this.item.content&&(a=!1,b="\u5185\u5bb9\u672a\u6539\u53d8\uff0c\u65e0\u9700\u4fdd\u5b58");0<this.uploadImgCounter.standByCount&&(a=!1,b="\u56fe\u7247\u6b63\u5728\u4e0a\u4f20\uff0c\u8bf7\u7a0d\u540e");this.emit("validated",{isValid:a,message:b})},getData:function(){var a=
{content:A.getContent(this.editNode),status:this.progressComps.get("value")};this.connectComps.item&&(a.customer=this.connectComps.item.id);this.item&&this.item.attachments&&(a.attachments=this.item.attachments);if(0<this.uploadImgArray.length){a.attachments=[];for(var b=0;b<this.uploadImgArray.length;++b){var d={fileName:this.uploadImgArray[b].name,fileDir:this.uploadImgArray[b].url,fileType:this.uploadImgArray[b].suffix,imgSize:(this.uploadImgArray[b].height,this.uploadImgArray[b].width),size:this.uploadImgArray[b].size,
category:"image"};a.attachments.push(d)}""==a.content&&(a.content="\u6211\u521a\u521a\u6dfb\u52a0\u4e86\u4e00\u6761\u8bb0\u5f55")}return a}});return b})},"app/util/CacheStore":function(){define(["dojo/_base/declare","dojo/store/Memory","app/util/JsonRest","dojo/store/Cache"],function(g,e,c,a){return{getStore:function(b){return new a(new c(b),new e)}}})},"app/util/JsonRest":function(){define(["dojo/_base/xhr","dojo/_base/lang","dojo/json","dojo/_base/declare","dojo/store/util/QueryResults"],function(g,
e,c,a,b){return a("dojo.store.JsonRest",null,{constructor:function(b){this.headers={};a.safeMixin(this,b)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",get:function(a,b){b=b||{};var c=e.mixin({Accept:this.accepts},this.headers,b.headers||b);return g("GET",{url:this.target+a,handleAs:"json",headers:c})},accepts:"application/javascript, application/json",getIdentity:function(a){return a[this.idProperty]},put:function(a,b){b=b||{};var k="id"in b?b.id:this.getIdentity(a),
d="undefined"!=typeof k;return g(d&&!b.incremental?"PUT":"POST",{url:d?this.target+k:this.target,postData:c.stringify(a),handleAs:"json",headers:e.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===b.overwrite?"*":null,"If-None-Match":!1===b.overwrite?"*":null},this.headers,b.headers)})},add:function(a,b){b=b||{};b.overwrite=!1;return this.put(a,b)},remove:function(a,b){b=b||{};return g("DELETE",{url:this.target+a,headers:e.mixin({},this.headers,b.headers)})},query:function(a,
c){c=c||{};var k=e.mixin({Accept:this.accepts},this.headers,c.headers);if(0<=c.start||0<=c.count)a.pageno=Math.floor(c.start/c.count)+1,a.pagesize=c.count;var d=-1<this.target.indexOf("?");a&&"object"==typeof a&&(a=(a=g.objectToQuery(a))?(d?"\x26":"?")+a:"");if(c&&c.sort){var h=this.sortParam;a+=(a||d?"\x26":"?")+(h?h+"\x3d":"sort(");for(d=0;d<c.sort.length;d++){var m=c.sort[d];a+=(0<d?",":"")+(m.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(m.attribute)}h||(a+=")")}k=
g("GET",{url:this.target+(a||""),handleAs:"json",headers:k});k.total=k.then(function(a){return a.total});return b(k)}})})},"dojo/store/Cache":function(){define(["../_base/lang","../when"],function(g,e){var c=function(a,b,c){c=c||{};return g.delegate(a,{query:function(l,k){var d=a.query(l,k);d.forEach(function(a){(!c.isLoaded||c.isLoaded(a))&&b.put(a)});return d},queryEngine:a.queryEngine||b.queryEngine,get:function(c,f){return e(b.get(c),function(d){return d||e(a.get(c,f),function(a){a&&b.put(a,{id:c});
return a})})},add:function(c,f){return e(a.add(c,f),function(a){b.add(c&&"object"==typeof a?a:c,f);return a})},put:function(c,f){b.remove(f&&f.id||this.getIdentity(c));return e(a.put(c,f),function(a){b.put(c&&"object"==typeof a?a:c,f);return a})},remove:function(c,f){return e(a.remove(c,f),function(a){return b.remove(c,f)})},evict:function(a){return b.remove(a)}})};g.setObject("dojo.store.Cache",c);return c})},"chanjet/form/Combox":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/string dojo/when dijit/form/ValidationTextBox ./ComboBoxMixin".split(" "),
function(g,e,c,a,b,f,l){return g("chanjet.form.Comboxs",[f,l],{_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.itemAttr||this.searchAttr):c[this.itemAttr||this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",
e.get(a,"id"));this._autoCompleteText(b)}}})})},"chanjet/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin dijit/form/_ComboBoxMenu dijit/_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,e,c,a,b,f,l,k,d){return g("dijit.form.ComboBoxMixin",[k,f],{dropDownClass:l,hasDownArrow:!0,templateString:d,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},
_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(d){d.get||a.mixin(d,{_oldAPI:!0,get:function(a){var b=new e;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(d,c){var f=new e(function(){h.abort&&h.abort()});f.total=new e;var h=this.fetch(a.mixin({query:d,
onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},c));return b(f)}});this._set("store",d)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var d=this.declaredClass;a.mixin(this.store,{getValue:function(a,b){c.deprecated(d+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[b]},
getLabel:function(a){c.deprecated(d+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(b){c.deprecated(d+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],a.hitch(this,function(a){(new a({objectStore:this})).fetch(b)}))}})}}})})},"chanjet/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff dijit/form/DataList dijit/form/_TextBoxMixin ./_SearchMixin".split(" "),
function(g,e,c,a,b,f,l,k,d,h,m){e=e("chanjet.form._AutoCompleterMixin",m,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(k("ie")){var d=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();d.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",d),b=String(a.text).replace(/\r/g,"").length}catch(c){}}return b},
_setCaretPos:function(a,b){b=parseInt(b);h.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var d=b.charCode||b.keyCode;if(!(d==a.ALT||d==a.CTRL||d==a.META||d==a.SHIFT)){var c=this.dropDown,f=null;this._abortQuery();this.inherited(arguments);if(!b.altKey&&!b.ctrlKey&&!b.metaKey)switch(this._opened&&(f=c.getHighlightedOption()),d){case a.PAGE_DOWN:case a.DOWN_ARROW:case a.PAGE_UP:case a.UP_ARROW:this._opened&&
this._announceOption(f);b.stopPropagation();b.preventDefault();break;case a.ENTER:if(f){if(f==c.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(f==c.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case a.TAB:d=this.get("displayedValue");if(c&&(d==c._messages.previousMessage||d==c._messages.nextMessage))break;
f&&this._selectOption(f);case a.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;h.selectInputText(b,b.value.length);var d=this.ignoreCase?"toLowerCase":"substr";0==a[d](0).indexOf(this.focusNode.value[d](0))?(d=this.autoComplete?this._getCaretPos(b):b.value.length,d+1>b.value.length&&(b.value=a,h.selectInputText(b,d))):(b.value=a,h.selectInputText(b))},_openResultList:function(a,d,c){var f=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=b.hitch(this,function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,c,b.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),f&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&(!this._prev_key_backspace&&!/^[*]+$/.test(d[this.searchAttr].toString()))&&
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||
a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,d){var c="";a&&(d||(d=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),c=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):d);this.set("value",
c,b,d,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var d=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(d,this.searchAttr):d[this.searchAttr]).toString();this.set("item",d,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",c.get(a,"id"));this._autoCompleteText(b)}},
_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var d=this.id+"_popup";this.dropDown=new (b.isString(this.dropDownClass)?b.getObject(this.dropDownClass,
!1):this.dropDownClass)({onChange:b.hitch(this,this._selectOption),id:d,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new d({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=
f('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);g.after(this,"onSearch",b.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&("text"==this.labelType&&this._lastInput)&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var d=(this.ignoreCase?
"i":"")+("all"==this.highlightMatch?"g":""),c=this.queryExpr.indexOf("${0}");b=l.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==c?"^":"")+"("+b+")"+(c==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=
null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,d,c){this._set("item",c||null);null==a&&(a="");this.inherited(arguments)}});k("dojo-bidi")&&e.extend({_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}});return e})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),
function(g,e,c,a,b,f){function l(a){return{id:a.value,value:a.value,name:c.trim(a.innerText||a.textContent||"")}}return g("dijit.form.DataList",b,{constructor:function(b,d){this.domNode=e.byId(d);c.mixin(this,b);this.id&&f.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:a("option",this.domNode).map(l)}])},destroy:function(){f.remove(this.id)},fetchSelectedItem:function(){var b=a("\x3e option[selected]",this.domNode)[0]||a("\x3e option",this.domNode)[0];return b&&l(b)}})})},
"chanjet/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when dijit/registry".split(" "),function(g,e,c,a,b,f,l){return g("chanjet.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,f){return c?".*":f?".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},
_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!("type"in
a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||a.metaKey)&&"x"!=b&&"v"!=b||b==e.SHIFT))){this._prev_key_backspace=a=!1;switch(b){case e.DELETE:case e.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();
var d=this,h=c.clone(this.query),l={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},e=b.substitute(this.queryExpr,[a]),g,r=function(){var a=d._fetchHandle=d.store.query(h,l);!d.disabled&&!(d.readOnly||g!==d._lastQuery)&&f(a,function(b){d._fetchHandle=null;!d.disabled&&(!d.readOnly&&g===d._lastQuery)&&f(a.total,function(a){b.items&&(b=b.items);b.total=a;var c=d.pageSize;if(isNaN(c)||c>b.total)c=b.total;b.nextPage=function(a){l.direction=a=!1!==a;l.count=c;a?(l.start+=
b.length,l.start>=b.total&&(l.count=0)):(l.start-=c,0>l.start&&(l.count=Math.max(c+l.start,0),l.start=0));0>=l.count?(b.length=0,d.onSearch(b,h,l)):r()};d.onSearch(b,h,l)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};c.mixin(l,this.fetchProperties);this.store._oldAPI?g=e:(g=this._patternToRegExp(e),g.toString=function(){return e});this._lastQuery=h[this.searchAttr]=g;this._queryDeferHandle=this.defer(r,this.searchDelay)},constructor:function(){this.query=
{};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=l.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(g,e,c,a,b,f,l,k){return g("dijit.form._ComboBoxMenu",[b,f,k,l],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(e.add(this.previousButton,"dijitMenuItemRtl"),e.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){e.add(a,"dijitMenuItemHover")},onUnhover:function(a){e.remove(a,
"dijitMenuItemHover")},onSelect:function(a){e.add(a,"dijitMenuItemSelected")},onDeselect:function(a){e.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,f=this.domNode.scrollTop,l=c.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<l;){var e=this.getHighlightedOption();if(a){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=
this.domNode.scrollTop;b+=(e-f)*(a?-1:1);f=e}},handleKey:function(b){switch(b.keyCode){case a.DOWN_ARROW:return this.selectNextNode(),!1;case a.PAGE_DOWN:return this._page(!1),!1;case a.UP_ARROW:return this.selectPreviousNode(),!1;case a.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(g,e,c,a,b){var f=e("dijit.form._ComboBoxMenuMixin"+
(a("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=b.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a);this.onChange(a)},onClick:function(a){if(a==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(a==
this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,b){var d=this._createMenuItem(),c=b(a);c.html?d.innerHTML=c.label:d.appendChild(d.ownerDocument.createTextNode(c.label));""==d.innerHTML&&(d.innerHTML="\x26#160;");return d},createOptions:function(a,b,d){this.items=a;this.previousButton.style.display=0==b.start?"none":"";c.set(this.previousButton,"id",this.id+
"_prev");g.forEach(a,function(a,b){var f=this._createOption(a,d);f.setAttribute("item",b);c.set(f,"id",this.id+b);this.nextButton.parentNode.insertBefore(f,this.nextButton)},this);var f=!1;a.total&&!a.total.then&&-1!=a.total?b.start+b.count<a.total?f=!0:b.start+b.count>a.total&&b.count==a.length&&(f=!0):b.count==a.length&&(f=!0);this.nextButton.style.display=f?"":"none";c.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;2<a.childNodes.length;)a.removeChild(a.childNodes[a.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});a("dojo-bidi")&&(f=e("dijit.form._ComboBoxMenuMixin",
f,{_createOption:function(){var a=this.inherited(arguments);this.applyTextDir(a);return a}}));return f})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(g,e,c,a){return g("dijit.form._ListMouseMixin",a,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this.own(e(this.domNode,"mousedown",function(a){a.preventDefault()}));this._listConnect("click","_onClick");this._listConnect(c.press,"_onMouseDown");this._listConnect(c.release,
"_onMouseUp");this._listConnect(c.over,"_onMouseOver");this._listConnect(c.out,"_onMouseOut")},_onClick:function(a,c){this._setSelectedAttr(c);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(c)})},_onMouseDown:function(a,c){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(c)},_onMouseUp:function(a,c){this._isDragging=!1;var e=this.selected,k=this._hoveredNode;
e&&c==e?this.defer(function(){this._onClick(a,e)}):k&&this.defer(function(){this._onClick(a,k)})},_onMouseOut:function(a,c){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(a,c){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=c;this.onHover(c);this._isDragging&&this._setSelectedAttr(c)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare",
"dojo/on","dojo/window"],function(g,e,c){return g("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,b){var c=this;return c.own(e(c.containerNode,e.selector(function(a,b,c){return a.parentNode==c},a),function(a){a.preventDefault();c[b](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;
this._setSelectedAttr(a)},selectNextNode:function(){var a=this.selected;if(a){for(a=a.nextSibling;a&&"none"==a.style.display;)a=a.nextSibling;a?this._setSelectedAttr(a):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(a=a.previousSibling;a&&"none"==a.style.display;)a=a.previousSibling;a?this._setSelectedAttr(a):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(a){if(this.selected!=a){var b=this.selected;if(b)this.onDeselect(b);
a&&(c.scrollIntoView(a),this.onSelect(a));this._set("selected",a)}else if(a)this.onSelect(a)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s,t){return g("dijit._HasDropDown",t,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,
dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&(a.preventDefault(),this._docHandler=this.own(m(this.ownerDocument,n.release,h.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(a){a&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var c=this.dropDown,d=!1;if(a&&this._opened){var h=f.position(this._buttonNode,!0);if(!(a.pageX>=
h.x&&a.pageX<=h.x+h.w)||!(a.pageY>=h.y&&a.pageY<=h.y+h.h)){for(h=a.target;h&&!d;)b.contains(h,"dijitPopup")?d=!0:h=h.parentNode;if(d){h=a.target;if(c.onItemClick){for(var e;h&&!(e=q.byNode(h));)h=h.parentNode;if(e&&e.onClick&&e.getParent)e.getParent().onItemClick(e,a)}return}}}this._opened?c.focus&&!1!==c.autoFocus&&(this._focusDropDownTimer=this.defer(function(){c.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),
a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";b.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);
var a=this.focusNode||this.domNode;this.own(m(this._buttonNode,n.press,h.hitch(this,"_onDropDownMouseDown")),m(this._buttonNode,"click",h.hitch(this,"_onDropDownClick")),m(a,"keydown",h.hitch(this,"_onKey")),m(a,"keyup",h.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var b=this.dropDown,c=a.target;if(b&&(this._opened&&b.handleKey)&&
!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==d.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==d.DOWN_ARROW||(a.keyCode==d.ENTER||a.keyCode==d.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;
this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(h.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new e,b=h.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},
openDropDown:function(){var c=this.dropDown,d=c.domNode,e=this._aroundNode||this.domNode,l=this,k=s.open({parent:this,popup:c,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){l.closeDropDown(!0)},onCancel:function(){l.closeDropDown(!0)},onClose:function(){a.set(l._popupStateNode,"popupActive",!1);b.remove(l._popupStateNode,"dijitHasDropDownOpen");l._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>c._popupWrapper.offsetWidth)e={w:e.offsetWidth-
(c._popupWrapper.offsetWidth-c.domNode.offsetWidth)},h.isFunction(c.resize)?c.resize(e):f.setMarginBox(d,e);a.set(this._popupStateNode,"popupActive","true");b.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",c.id);"presentation"!==d.getAttribute("role")&&!d.getAttribute("aria-labelledby")&&d.setAttribute("aria-labelledby",this.id);return k},closeDropDown:function(a){this._focusDropDownTimer&&
(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),s.close(this.dropDown),this._opened=!1)}})})},"chanjet/form/Select":function(){define(["dojo/_base/declare","dijit/form/Select"],function(g,e){return g("chanjet.form.Select",[e],{size:"normal",postCreate:function(){this.inherited(arguments);if(this.url){var c=this;xhr.get(this.url,function(a){var b=this.labelField||"label",f=this.valueField||
"value";if("label"!=b||"value"!=f)for(var e=0,k=a.length;e<k;e++){var d=a[e];d.label=d[b];d.value=d[f]}c.set("options",a)})}},_fillContent:function(){this.inherited(arguments);this._fillContentHandler()},_fillContentHandler:function(){},_setSizeAttr:function(c){this.size=c;dojo.addClass(this.domNode,"size"+c)},addOption:function(c){this.inherited(arguments);this._addOptionItem(c)}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s,t,p,y){function w(a){return function(b){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(l.hitch(this,a,b))}}var z=e("dijit.form._SelectMenu",n,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,b=this.parentWidget.value;l.isArray(b)&&
(b=b[b.length-1]);b&&g.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)}});b=e("dijit.form.Select"+(d("dojo-bidi")?"_NoBidi":""),[h,m,t],{baseClass:"dijitSelect dijitValidationTextBox",templateString:y,_buttonInputDisabled:d("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&
!this.value&&this.srcNodeRef){var b=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=b?b:0].value)}this.dropDown=new z({id:this.id+"_menu",parentWidget:this,appendTo:this.appendTo});a.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new r({ownerDocument:this.ownerDocument});var b=l.hitch(this,"_setValueAttr",a);a=new q({option:a,label:a.label||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,
dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:
null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=p.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{g.forEach(this._getChildren(),function(a){a.destroyRecursive()});var b=new q({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(b)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);c.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},
_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":
"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?s.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):s.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);s.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=
f.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");9>d("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setStyleAttr:function(b){this.inherited(arguments);
a.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){s.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
d("dojo-bidi")&&(b=e("dijit.form.Select",b,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));b._Menu=z;b.prototype._onContainerKeydown=w("_onContainerKeydown");b.prototype._onContainerKeypress=w("_onContainerKeypress");return b})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(g,e,c,a,b,f,l,k,d,h,m,n,q){return b("dijit.form._FormSelectWidget",q,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var b=this.options||[];if(null==a)return b;if(d.isArray(a))return g.map(a,"return this.getOptions(item);",this);d.isString(a)&&(a={value:a});d.isObject(a)&&(g.some(b,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));
return 0<=a&&a<b.length?b[a]:null},addOption:function(a){g.forEach([].concat(a),function(a){a&&d.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions([].concat(a));g.forEach(a,function(a){a&&(this.options=g.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){g.forEach([].concat(a),function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=
a[c]},this);this._loadChildren()},setStore:function(b,f,h){var p=this.store;h=h||{};if(p!==b){for(var l;l=this._notifyConnections.pop();)l.remove();b.get||(d.mixin(b,{_oldAPI:!0,get:function(a){var b=new e;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new e(function(){f.abort&&f.abort()});c.total=new e;var f=this.fetch(d.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},
onError:function(a){c.reject(a)}},b));return new n(c)}}),b.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[c.after(b,"onNew",d.hitch(this,"_onNewItem"),!0),c.after(b,"onDelete",d.hitch(this,"_onDeleteItem"),!0),c.after(b,"onSet",d.hitch(this,"_onSetItem"),!0)]));this._set("store",b)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();h.query&&(this._set("query",h.query),this._set("queryOptions",h.queryOptions));
b&&(this._loadingStore=!0,this.onLoadDeferred=new e,this._queryRes=b.query(this.query,this.queryOptions),m(this._queryRes,d.hitch(this,function(c){if(this.sortByLabel&&!h.sort&&c.length)if(b.getValue)c.sort(a.createSortFunction([{attribute:b.getLabelAttributes(c[0])[0]}],b));else{var p=this.labelAttr;c.sort(function(a,b){return a[p]>b[p]?1:b[p]>a[p]?-1:0})}h.onFetch&&(c=h.onFetch.call(this,c,h));g.forEach(c,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&this._queryRes.observe(d.hitch(this,
function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:f);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(c):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return p},_setValueAttr:function(a,b){this._onChangeActive||(b=null);
if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=d.isArray(a)?g.map(a,function(a){return d.isObject(a)?a:{value:a}}):d.isObject(a)?[a]:[{value:a}];a=g.filter(this.getOptions(a),function(a){return a&&a.value});var c=this.getOptions()||[];if(!this.multiple&&(!a[0]||!a[0].value)&&c.length)a[0]=c[0];g.forEach(c,function(b){b.selected=g.some(a,function(a){return a.value===b.value})});c=g.map(a,function(a){return a.value});if(!("undefined"==typeof c||"undefined"==typeof c[0])){var f=g.map(a,
function(a){return a.label});this._setDisplay(this.multiple?f:f[0]);this.inherited(arguments,[this.multiple?c:c[0],b]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=g.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(g.forEach(this._getChildren(),
function(a){a.destroyRecursive()}),g.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var b=this;g.forEach(this._getChildren(),function(c){var d=g.some(a,function(a){return c.option&&a===c.option.value});d&&!b.multiple&&(b.focusedChild=c);l.toggle(c.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);c.domNode.setAttribute("aria-selected",
d?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var b=g.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?g.map(g.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},
_getOptionObjForItem:function(a){var b=this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);
f.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?h("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+k._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",
this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);c.after(this,"onChange",d.hitch(this,"_updateSelection"));var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();
this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(g){var e={};g.setObject("dojo.data.util.sorter",e);e.basicComparator=function(c,a){var b=-1;null===c&&(c=void 0);null===a&&(a=void 0);if(c==a)b=0;else if(c>
a||null==c)b=1;return b};e.createSortFunction=function(c,a){function b(a,b,c,d){return function(f,h){var e=d.getValue(f,a),l=d.getValue(h,a);return b*c(e,l)}}for(var f=[],l,k=a.comparatorMap,d=e.basicComparator,h=0;h<c.length;h++){l=c[h];var g=l.attribute;if(g){l=l.descending?-1:1;var n=d;k&&("string"!==typeof g&&"toString"in g&&(g=g.toString()),n=k[g]||d);f.push(b(g,l,n,a))}}return function(a,b){for(var c=0;c<f.length;){var d=f[c++](a,b);if(0!==d)return d}return 0}};return e})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare",
"dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(g,e,c,a,b){return g("dijit.DropDownMenu",[b,a],{templateString:c,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a);a.stopPropagation();a.preventDefault()},_onLeftArrow:function(){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else evt.stopPropagation(),evt.preventDefault()}})})},
"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s){return e("dijit._MenuBase",[n,s,r,q],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),
this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){b.toggle(this.domNode,"dijitMenuActive",a);b.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=m.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var a=this,b="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(k(this.containerNode,
k.selector(b,l.enter),function(){a.onItemHover(m.byNode(this))}),k(this.containerNode,k.selector(b,l.leave),function(){a.onItemUnhover(m.byNode(this))}),k(this.containerNode,k.selector(b,h),function(b){a.onItemClick(m.byNode(this),b);b.stopPropagation();b.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?
-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},
this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},
onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,
b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),this._openItemPopup(a,/^key/.test(b._origType||b.type))):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openItemPopup:function(a,b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var c=a.popup;c.parentMenu=this;this.own(this._mouseoverHandle=
k.once(c.domNode,"mouseover",f.hitch(this,"_onPopupHover")));var d=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&d.focusChild(a);d._cleanUp()},onExecute:f.hitch(this,"_cleanUp",!0),onClose:function(){d._mouseoverHandle&&(d._mouseoverHandle.remove(),delete d._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=
!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(a.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();
"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n){l=g("dijit.MenuItem"+(f("dojo-bidi")?"_NoBidi":""),[k,d,h,m],{templateString:n,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",
a);var b="",c;c=a.search(/{\S}/);if(0<=c){var b=a.charAt(c+1),d=a.substr(0,c);a=a.substr(c+3);c=d+b+a;a=d+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);
c.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&c.set(this.accelKeyNode,"id",this.id+"_accel");e.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==f("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(b){a.toggle(this.domNode,"dijitMenuItemSelected",b)},setLabel:function(a){b.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){b.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,c.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});f("dojo-bidi")&&
(l=g("dijit.MenuItem",l,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return l})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(g,e){return g("dijit._Contained",null,{_getSibling:function(c){var a=this.domNode;do a=a[c+"Sibling"];while(a&&1!=a.nodeType);return a&&e.byNode(a)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},
getIndexInParent:function(){var c=this.getParent();return!c||!c.getIndexOfChild?-1:c.getIndexOfChild(this)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(g,e,c,a,b,f){return g("dijit.MenuSeparator",[c,a,b],{templateString:f,buildRendering:function(){this.inherited(arguments);e.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"app/widget/upload/Upload":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dijit/_WidgetBase","dijit/_TemplatedMixin","./_SWFUpload"],function(g,e,c,a,b){var f=dojo.moduleUrl("app/widget");return g("App.Upload",[c,a],{buttonText:"",buttonImage:f+"upload/TestImageNoText_65x29.png",width:65,height:29,sizeLimit:0,numberLimit:0,uploadLimit:0,autoUpload:!0,fileTypes:"*.*",typesDescription:"",single:!1,templateString:'\x3cspan class\x3d"dijit dijitReset"\x3e\x3cdiv data-dojo-attach-point\x3d"placeNode"\x3e\x3c/div\x3e\x3c/span\x3e',postCreate:function(){var a=
{size:16,left:12,top:4},b={},c=this.params;c.textStyle&&e.mixin(a,c.textStyle);c.postParams&&e.mixin(b,c.postParams);xhr.get(URL.authSession,{},e.hitch(this,function(c){if(c){var d=this.url,d=0<this.url.indexOf("?")?d+"\x26":d+"?";this._initSwfu(a,b,d+"CSP_SESSIONID\x3d"+c.id)}}))},_initSwfu:function(a,c,d){var f=this;this.swfu=new b({domNode:this.domNode,upload_url:d,post_params:c,flash_url:App.swfPath+"/swfupload.swf",button_placeholder:this.placeNode,button_image_url:this.buttonImage,button_width:this.width,
button_height:this.height,button_window_mode:"transparent",button_text:'\x3cspan class\x3d"theFont"\x3e'+this.buttonText+"\x3c/span\x3e",button_text_style:".theFont { font-size: "+a.size+"; }",button_text_left_padding:a.left,button_text_top_padding:a.top,button_action:this.single?-100:-110,file_size_limit:this.sizeLimit+" MB",file_queue_limit:this.numberLimit,file_upload_limit:this.uploadLimit,file_types:this.fileTypes,file_types_description:this.typesDescription,custom_settings:this.customSettings,
file_dialog_start_handler:function(a,b,c){f.onDialogStart(a,b,c)},file_dialog_complete_handler:function(a,b){f.onFileDialogComplete(a,b);if(f.autoUpload)try{this.startUpload()}catch(c){this.debug(c)}},upload_start_handler:function(a){f.onUploadStart(a)},upload_progress_handler:function(a,b,c){f.onProgress(a,b,c)},upload_complete_handler:function(a){f.onComplete(a);if(!a)return!1},upload_error_handler:function(a,b,c){f.onError(a,b,c)},upload_success_handler:function(a,b){f.onSuccess(a,b)},queue_complete_handler:function(a){f.onFinish(a)},
file_queued_handler:function(a){f.onReady(a)},file_queue_error_handler:function(a,b,c){f.onReadyError(a,b,c)}})},start:function(a){this.swfu.startUpload(a)},stop:function(){this.swfu.cancelQueue()},destroy:function(a){try{this.swfu.destroy()}catch(b){}this.inherited(arguments)},reset:function(){this.setStats({in_progress:0,files_queued:0,successful_uploads:0,upload_errors:0,upload_cancelled:0,queue_errors:0})},setStats:function(a){this.swfu.setStats(a)},cancleUpload:function(a,b){this.swfu.cancelUpload(a,
b)},getStats:function(){return this.swfu.getStats()},setDisabled:function(a){return this.swfu.setButtonDisabled(a)},debug:function(a){this.swfu.debug(a)},onReady:function(a){this.inherited(arguments)},onReadyError:function(a,b,c){this.inherited(arguments)},onDialogStart:function(a,b,c){this.inherited(arguments)},onFileDialogComplete:function(a,b,c){this.inherited(arguments)},onProgress:function(a,b,c){this.inherited(arguments)},onComplete:function(a){this.inherited(arguments)},onError:function(a,
b,c){this.swfu.debug("Error Code: '+code+', File name: "+a.name+", Message: "+c);this.inherited(arguments)},onSuccess:function(a,b){this.inherited(arguments)},onFinish:function(a){this.inherited(arguments)},onUploadStart:function(a){this.inherited(arguments)}})})},"app/widget/upload/_SWFUpload":function(){define(["dojo/_base/declare","dojo/dom"],function(g,e){if(window.SWFUpload)return window.SWFUpload;var c;void 0==c&&(c=function(a){this.initSWFUpload(a)});c.prototype.initSWFUpload=function(a){try{this.customSettings=
{},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+c.movieCount++,this.movieElement=null,this.domNode=a.domNode,c.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(b){throw delete c.instances[this.movieName],b;}};c.instances={};c.movieCount=0;c.version="2.2.0 2009-03-25";c.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};c.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,
IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};c.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};c.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};c.CURSOR={ARROW:-1,HAND:-2};c.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};c.completeURL=function(a){if("string"!==typeof a||a.match(/^https?:\/\//i)||
a.match(/^\//))return a;var b=window.location.pathname.lastIndexOf("/");path=0>=b?"/":window.location.pathname.substr(0,b)+"/";return path+a};c.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=void 0==this.settings[a]?b:this.settings[a]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",
!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",
1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",c.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",c.CURSOR.ARROW);this.ensureDefault("button_window_mode",
c.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",
null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;this.settings.preserve_relative_urls||(this.settings.upload_url=c.completeURL(this.settings.upload_url),this.settings.button_image_url=c.completeURL(this.settings.button_image_url));delete this.ensureDefault};
c.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);void 0==window[this.movieName]&&
(window[this.movieName]=this.getMovieElement())};c.prototype.getFlashHTML=function(){return['\x3cobject id\x3d"',this.movieName,'" type\x3d"application/x-shockwave-flash" data\x3d"',this.settings.flash_url,'" width\x3d"',this.settings.button_width,'" height\x3d"',this.settings.button_height,'" class\x3d"swfupload"\x3e\x3cparam name\x3d"wmode" value\x3d"',this.settings.button_window_mode,'" /\x3e\x3cparam name\x3d"movie" value\x3d"',this.settings.flash_url,'" /\x3e\x3cparam name\x3d"quality" value\x3d"high" /\x3e\x3cparam name\x3d"menu" value\x3d"false" /\x3e\x3cparam name\x3d"allowScriptAccess" value\x3d"always" /\x3e',
'\x3cparam name\x3d"flashvars" value\x3d"'+this.getFlashVars()+'" /\x3e',"\x3c/object\x3e"].join("")};c.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName\x3d",encodeURIComponent(this.movieName),"\x26amp;uploadURL\x3d",encodeURIComponent(this.settings.upload_url),"\x26amp;useQueryString\x3d",encodeURIComponent(this.settings.use_query_string),"\x26amp;requeueOnError\x3d",encodeURIComponent(this.settings.requeue_on_error),"\x26amp;httpSuccess\x3d",
encodeURIComponent(b),"\x26amp;assumeSuccessTimeout\x3d",encodeURIComponent(this.settings.assume_success_timeout),"\x26amp;params\x3d",encodeURIComponent(a),"\x26amp;filePostName\x3d",encodeURIComponent(this.settings.file_post_name),"\x26amp;fileTypes\x3d",encodeURIComponent(this.settings.file_types),"\x26amp;fileTypesDescription\x3d",encodeURIComponent(this.settings.file_types_description),"\x26amp;fileSizeLimit\x3d",encodeURIComponent(this.settings.file_size_limit),"\x26amp;fileUploadLimit\x3d",
encodeURIComponent(this.settings.file_upload_limit),"\x26amp;fileQueueLimit\x3d",encodeURIComponent(this.settings.file_queue_limit),"\x26amp;debugEnabled\x3d",encodeURIComponent(this.settings.debug_enabled),"\x26amp;buttonImageURL\x3d",encodeURIComponent(this.settings.button_image_url),"\x26amp;buttonWidth\x3d",encodeURIComponent(this.settings.button_width),"\x26amp;buttonHeight\x3d",encodeURIComponent(this.settings.button_height),"\x26amp;buttonText\x3d",encodeURIComponent(this.settings.button_text),
"\x26amp;buttonTextTopPadding\x3d",encodeURIComponent(this.settings.button_text_top_padding),"\x26amp;buttonTextLeftPadding\x3d",encodeURIComponent(this.settings.button_text_left_padding),"\x26amp;buttonTextStyle\x3d",encodeURIComponent(this.settings.button_text_style),"\x26amp;buttonAction\x3d",encodeURIComponent(this.settings.button_action),"\x26amp;buttonDisabled\x3d",encodeURIComponent(this.settings.button_disabled),"\x26amp;buttonCursor\x3d",encodeURIComponent(this.settings.button_cursor)].join("")};
c.prototype.getMovieElement=function(){if(void 0==this.movieElement)for(var a=this.domNode.getElementsByTagName("object"),b=0,c=a.length;b<c;b++){var e=a[b];if(e.id==this.movieName){this.movieElement=e;break}}if(void 0===this.movieElement)throw"Could not find Flash element";return this.movieElement};c.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if("object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c.toString())+"\x3d"+encodeURIComponent(a[c].toString()));
return b.join("\x26amp;")};c.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if((a=this.getMovieElement())&&"unknown"===typeof a.CallFunction){for(var b in a)try{"function"===typeof a[b]&&(a[b]=null)}catch(f){}try{a.parentNode.removeChild(a)}catch(e){}}window[this.movieName]=null;c.instances[this.movieName]=null;delete c.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(k){return!1}};c.prototype.displayDebugInfo=
function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",c.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",this.settings.assume_success_timeout,
"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",this.settings.debug.toString(),
"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",this.settings.button_text.toString(),
"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
("function"===typeof this.settings.swfupload_loaded_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",("function"===typeof this.settings.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof this.settings.file_queued_handler).toString(),"\n\tfile_queue_error_handler assigned:  ",("function"===typeof this.settings.file_queue_error_handler).toString(),"\n\tupload_start_handler assigned:      ",("function"===typeof this.settings.upload_start_handler).toString(),
"\n\tupload_progress_handler assigned:   ",("function"===typeof this.settings.upload_progress_handler).toString(),"\n\tupload_error_handler assigned:      ",("function"===typeof this.settings.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof this.settings.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof this.settings.upload_complete_handler).toString(),"\n\tdebug_handler assigned:             ",("function"===
typeof this.settings.debug_handler).toString(),"\n"].join(""))};c.prototype.addSetting=function(a,b,c){return void 0==b?this.settings[a]=c:this.settings[a]=b};c.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""};c.prototype.callFlash=function(a,b){b=b||[];var c=this.getMovieElement(),e,k;try{k=c.CallFunction('\x3cinvoke name\x3d"'+a+'" returntype\x3d"javascript"\x3e'+__flash__argumentsToXML(b,0)+"\x3c/invoke\x3e"),e=eval(k)}catch(d){throw"Call to "+a+" failed";}void 0!=
e&&"object"===typeof e.post&&(e=this.unescapeFilePostParams(e));return e};c.prototype.selectFile=function(){this.callFlash("SelectFile")};c.prototype.selectFiles=function(){this.callFlash("SelectFiles")};c.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};c.prototype.cancelUpload=function(a,b){!1!==b&&(b=!0);this.callFlash("CancelUpload",[a,b])};c.prototype.stopUpload=function(){this.callFlash("StopUpload")};c.prototype.getStats=function(){return this.callFlash("GetStats")};c.prototype.setStats=
function(a){this.callFlash("SetStats",[a])};c.prototype.getFile=function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};c.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};c.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};c.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};c.prototype.setPostParams=function(a){this.settings.post_params=
a;this.callFlash("SetPostParams",[a])};c.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};c.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};c.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};c.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=
a;this.callFlash("SetFileSizeLimit",[a])};c.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};c.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};c.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};c.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};
c.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};c.prototype.setHTTPSuccess=function(a){"string"===typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};c.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};c.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",
[a])};c.prototype.setButtonImageURL=function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};c.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a;this.settings.button_height=b;var c=this.getMovieElement();void 0!=c&&(c.style.width=a+"px",c.style.height=b+"px");this.callFlash("SetButtonDimensions",[a,b])};c.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};c.prototype.setButtonTextPadding=
function(a,b){this.settings.button_text_top_padding=b;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,b])};c.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};c.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};c.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};c.prototype.setButtonCursor=
function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};c.prototype.queueEvent=function(a,b){void 0==b?b=[]:b instanceof Array||(b=[b]);var c=this;if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){c.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function";};c.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():
null;"function"===typeof a&&a.apply(this)};c.prototype.unescapeFilePostParams=function(a){var b=/[$]([0-9a-f]{4})/i,c={},e;if(void 0!=a){for(var k in a.post)if(a.post.hasOwnProperty(k)){e=k;for(var d;null!==(d=b.exec(e));)e=e.replace(d[0],String.fromCharCode(parseInt("0x"+d[1],16)));c[e]=a.post[k]}a.post=c}return a};c.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}};c.prototype.flashReady=function(){var a=this.getMovieElement();a?(this.cleanUp(a),
this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")};c.prototype.cleanUp=function(a){try{if(a&&this.movieElement&&"unknown"===typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"===typeof a[b]&&(a[b]=null)}catch(c){}}}catch(e){}window.__flash__removeCallback=function(a,b){try{a&&(a[b]=null)}catch(c){}}};c.prototype.fileDialogStart=
function(){this.queueEvent("file_dialog_start_handler")};c.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};c.prototype.fileQueueError=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,b,c])};c.prototype.fileDialogComplete=function(a,b,c){this.queueEvent("file_dialog_complete_handler",[a,b,c])};c.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",
a)};c.prototype.returnUploadStart=function(a){var b;if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0);this.callFlash("ReturnUploadStart",[!!b])};c.prototype.uploadProgress=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,b,c])};c.prototype.uploadError=
function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,b,c])};c.prototype.uploadSuccess=function(a,b,c){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,b,c])};c.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};c.prototype.debug=function(a){this.queueEvent("debug_handler",a)};c.prototype.debugMessage=function(a){if(this.settings.debug){var b=[];if("object"===typeof a&&
"string"===typeof a.name&&"string"===typeof a.message){for(var f in a)a.hasOwnProperty(f)&&b.push(f+": "+a[f]);a=b.join("\n")||"";b=a.split("\n");a="EXCEPTION: "+b.join("\nEXCEPTION: ")}c.Console.writeLine(a)}};c.Console={};c.Console.writeLine=function(a){var b,c;try{b=document.getElementById("SWFUpload_Console"),b||(c=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(c),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",
b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",c.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(e){alert("Exception: "+e.name+" Message: "+e.message)}};c.queue={};c.prototype.initSettings=function(a){return function(){"function"===typeof a&&a.call(this);this.queueSettings={};this.queueSettings.queue_cancelled_flag=!1;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=
this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=c.queue.uploadCompleteHandler;this.settings.upload_start_handler=c.queue.uploadStartHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(c.prototype.initSettings);c.prototype.startUpload=function(a){this.queueSettings.queue_cancelled_flag=!1;this.callFlash("StartUpload",[a])};c.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=
!0;this.stopUpload();for(var a=this.getStats();0<a.files_queued;)this.cancelUpload(),a=this.getStats()};c.queue.uploadStartHandler=function(a){var b;"function"===typeof this.queueSettings.user_upload_start_handler&&(b=this.queueSettings.user_upload_start_handler.call(this,a));b=!1===b?!1:!0;this.queueSettings.queue_cancelled_flag=!b;return b};c.queue.uploadCompleteHandler=function(a){var b=this.queueSettings.user_upload_complete_handler;a.filestatus===c.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++;
if("function"===typeof b?!1!==b.call(this,a):a.filestatus!==c.FILE_STATUS.QUEUED)0<this.getStats().files_queued&&!1===this.queueSettings.queue_cancelled_flag?this.startUpload():(!1===this.queueSettings.queue_cancelled_flag?this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]):this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)};return window.SWFUpload=c})},"app/widget/upload/Progress":function(){define(["dojo/_base/declare","put-selector/put",
"dojo/dom","chanjet/util/query","dojox/fx/ext-dojo/NodeList"],function(g,e,c,a){App.getFileIcon=function(a,c){a="."+a;c="tw_otherIcon";if(-1<a.indexOf(".")){var e=a.lastIndexOf(".");a=a.substring(e,a.length)+"|";a=a.toLowerCase();if(-1<".doc|.docx|.excel|.ppt|.pptx|.txt|.xls|.xlsx|.jpg|.jpeg|.bmp|.gig|.png|.tif|.rgb|.dib|.eps|.jpe|.pcx|.bmp|.gif|.mp3|.mp4|.wav|.rmvb|.rm|.wmv|.asf|.mov|.divx|.mpeg|.dv-avi|.navi|.avi|.mva|.pdf|".indexOf(a))switch(a){case ".doc|":c="tw_wordIcon";break;case ".docx|":c=
"tw_wordIcon";break;case ".xls|":c="tw_excelIcon";break;case ".xlsx|":c="tw_excelIcon";break;case ".excel|":c="tw_excelIcon";break;case ".ppt|":c="tw_pptIcon";break;case ".pptx|":c="tw_pptIcon";break;case ".txt|":c="tw_txtIcon";break;case ".jpg|":c="tw_imageIcon";break;case ".jpeg|":c="tw_imageIcon";break;case ".bmp|":c="tw_imageIcon";break;case ".gig|":c="tw_imageIcon";break;case ".png|":c="tw_imageIcon";break;case ".tif|":c="tw_imageIcon";break;case ".rgb|":c="tw_imageIcon";break;case ".dib|":c=
"tw_imageIcon";break;case ".eps|":c="tw_imageIcon";break;case ".jpe|":c="tw_imageIcon";break;case ".pcx|":c="tw_imageIcon";break;case ".gif|":c="tw_imageIcon";break;case ".mp3|":c="tw_videoIcon";break;case ".mp4|":c="tw_videoIcon";break;case ".wav|":c="tw_videoIcon";break;case ".rmvb|":c="tw_videoIcon";break;case ".rm|":c="tw_videoIcon";break;case ".wmv|":c="tw_videoIcon";break;case ".asf|":c="tw_videoIcon";break;case ".mov|":c="tw_videoIcon";break;case ".divx|":c="tw_videoIcon";break;case ".mpeg|":c=
"tw_videoIcon";break;case ".dv-avi|":c="tw_videoIcon";break;case ".navi|":c="tw_videoIcon";break;case ".avi|":c="tw_videoIcon";break;case ".mva|":c="tw_videoIcon";break;case ".pdf|":c="tw_pdfIcon"}}return c};return g("app.vm.upload.Progress",null,{constructor:function(b,f,e){this.targetID=f;this.fileProgressID=b.id;dojo.byId(f).style.display="";this.opacity=100;this.height=0;(this.fileProgressWrapper=c.byId(this.fileProgressID))?(this.fileProgressElement=this.fileProgressWrapper.firstChild,this.reset()):
"uploadImages"==f?(a("#images_show_div").style("display","block"),a("#uploadImages").style({visibility:"visible",height:"auto"}),this.createImageWrapper(b,f)):"uploadVideos"==f?(a("#images_show_div").style("display","block"),a("#uploadImages").style({visibility:"visible",height:"auto"}),this.createVideoWrapper(b,f)):(/_commentuploadfiles/.test(f)&&a("#"+f).style("display","block"),this.createFileWrapper(b,f));this.height=this.fileProgressWrapper.offsetHeight;this.setTimer(null)},createImageWrapper:function(a,
c){this.fileProgressWrapper=document.createElement("li");this.fileProgressWrapper.className="relative imageList";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var e=document.createElement("em"),k=document.createElement("img");k.setAttribute("node-type","thumb");k.src=App.imagePath+"mrImg.png";k.style.width="60px";k.style.height="45px";var d=document.createElement("div");d.className="wk_tm";
d.style.visibility="hidden";var h=document.createElement("div");h.className="wk_loadBox";var g=document.createElement("div");g.className="wk_loadBorder";g.style.visibility="visible";var n=document.createElement("div");n.className="wk_loadBg";g.appendChild(n);var q=document.createElement("span");q.className="wk_jdNum";n.appendChild(q);n=document.createElement("a");n.className="wk_loadClose";n.id="wk_cancelImage";n.href="javascript:;";n.style.visibility="visible";n.appendChild(document.createTextNode(" "));
h.appendChild(g);h.appendChild(n);g=document.createElement("a");g.id="wk_delUpload";g.href="javascript:;";g.style.visibility="hidden";g.className="wk_delUpload";this.fileProgressElement.appendChild(e);this.fileProgressElement.appendChild(k);this.fileProgressElement.appendChild(d);this.fileProgressElement.appendChild(h);this.fileProgressElement.appendChild(g);this.fileProgressWrapper.appendChild(this.fileProgressElement);e=document.getElementById("wk_addBt");document.getElementById(c).insertBefore(this.fileProgressWrapper,
e)},createFileWrapper:function(a,c){this.fileProgressWrapper=document.createElement("li");/_commentuploadfiles/.test(c)?this.fileProgressWrapper.className="relative fileList":0==document.getElementById("uploadFiles").children.length?this.fileProgressWrapper.className="relative fileList oddLi":-1!=document.getElementById("uploadFiles").firstChild.className.indexOf("evenLi")?this.fileProgressWrapper.className="relative fileList oddLi":this.fileProgressWrapper.className="relative fileList evenLi";this.fileProgressWrapper.id=
this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var e=document.createElement("span"),g=App.getFileIcon(a.type.substring(1),!0);e.className="wk_fjIcon "+g+" fl";e.appendChild(document.createTextNode(a.name));g=document.createElement("div");g.className="wk_fileLoad fl";var d=document.createElement("div");d.className="wk_loadBorder fl";var h=document.createElement("div");h.className="wk_loadBg relative";var m=document.createElement("span");
m.className="wk_jdNum";h.appendChild(m);d.appendChild(h);g.appendChild(d);d.style.visibility="visible";h=document.createElement("a");h.className="wk_loadClose fl";h.id="wk_cancelFile";h.href="javascript:;";h.style.visibility="visible";h.appendChild(document.createTextNode(" "));d.appendChild(h);this.fileProgressElement.appendChild(e);this.fileProgressElement.appendChild(g);this.fileProgressElement.appendChild(h);this.fileProgressWrapper.appendChild(this.fileProgressElement);/_commentuploadfiles/.test(c)?
document.getElementById(c).appendChild(this.fileProgressWrapper):document.getElementById("uploadFiles").insertBefore(this.fileProgressWrapper,document.getElementById("uploadFiles").firstChild)},createVideoWrapper:function(a,c){this.fileProgressWrapper=document.createElement("li");this.fileProgressWrapper.className="relative videoList";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className="progressContainer";var e=
document.createElement("img");e.src=App.imagePath+"mrImg.png";e.style.width="115px";e.style.height="80px";var g=document.createElement("div");g.className="wk_tm";g.style.visibility="hidden";var d=document.createElement("div");d.className="wk_loadBox";var h=document.createElement("div");h.className="wk_loadBorder";h.style.visibility="visible";var m=document.createElement("div");m.className="wk_loadBg";h.appendChild(m);var n=document.createElement("span");n.className="wk_jdNum";m.appendChild(n);m=document.createElement("a");
m.className="wk_loadClose";m.id="wk_cancelVideo";m.href="javascript:;";m.style.visibility="visible";m.appendChild(document.createTextNode(" "));d.appendChild(h);d.appendChild(m);h=document.createElement("a");h.id="del_"+this.fileProgressID;h.href="javascript:;";h.style.visibility="hidden";h.className="wk_delUpload";this.fileProgressElement.appendChild(e);this.fileProgressElement.appendChild(g);this.fileProgressElement.appendChild(d);this.fileProgressElement.appendChild(h);this.fileProgressWrapper.appendChild(this.fileProgressElement);
e=document.getElementById("wk_addBt");document.getElementById(c).insertBefore(this.fileProgressWrapper,e)},setTimer:function(a){this.fileProgressElement.FP_TIMER=a},getTimer:function(a){return this.fileProgressElement.FP_TIMER||null},reset:function(){this.fileProgressElement.className="progressContainer";"uploadImages"==this.targetID||"uploadVideos"==this.targetID?(this.fileProgressElement.childNodes[3].style.visibility="visible",this.fileProgressElement.childNodes[3].childNodes[0].childNodes[0].style.width=
"0%"):(this.fileProgressElement.childNodes[1].style.visibility="visible",this.fileProgressElement.childNodes[1].childNodes[0].childNodes[0].style.width="0%")},setProgress:function(a){this.fileProgressElement.className="progressContainer";"uploadImages"==this.targetID||"uploadVideos"==this.targetID?this.fileProgressElement.childNodes[3].childNodes[0].childNodes[0].style.width=a+"%":this.fileProgressElement.childNodes[1].childNodes[0].childNodes[0].style.width=a+"%"},setComplete:function(){"uploadImages"==
this.targetID||"uploadVideos"==this.targetID?(this.fileProgressElement.childNodes[1].style.visibility="hidden",this.fileProgressElement.childNodes[2].style.visibility="hidden",this.fileProgressElement.childNodes[3].childNodes[1].style.visibility="hidden",this.fileProgressElement.childNodes[4].style.visibility="visible"):this.fileProgressElement.childNodes[1].childNodes[0].style.visibility="hidden"},setError:function(b,c,g,k){"uploadImages"==this.targetID?(b=e("div.errContainer"),e(b,"div",{innerHTML:"\u4e0a\u4f20\u5931\u8d25"}),
e(b,"div.reUploadBtn",{innerHTML:"\u8bf7\u91cd\u65b0\u4e0a\u4f20"}),e(this.fileProgressElement,b)):(this.fileProgressElement.childNodes[1].childNodes[0].style.width="0%",this.fileProgressElement.childNodes[1].childNodes[0].childNodes[0].childNodes[0].text="0%");setTimeout(function(){2>a("#uploadImages li").length&&a("#images_show_div").wipeOut().play()},5E3)},setCancelled:function(){a(this.fileProgressWrapper).remove()},setStatus:function(a){App.tips(a)},toggleCancel:function(b,c,e){var g=this;"uploadImages"==
this.targetID||"uploadVideos"==this.targetID?this.fileProgressElement.childNodes[3].childNodes[1].style.visibility=b?"visible":"hidden":this.fileProgressElement.childNodes[1].childNodes[0].style.visibility=b?"visible":"hidden";if(c&&b){var d=this.fileProgressID;"uploadImages"==this.targetID||"uploadVideos"==this.targetID?this.fileProgressElement.childNodes[3].childNodes[1].onclick=function(){c.cancelUpload(d);e.canceled=!0;g.setCancelled();liImgs=a("#uploadImages \x3e li.imageList");10>liImgs.length?
a("[node-type\x3dhint]").hide():a("[node-type\x3dhint]").show();1>liImgs.length&&a("#images_show_div").wipeOut().play();return!1}:this.fileProgressElement.childNodes[2].onclick=function(){c._files&&c._files.pop();c.cancelUpload(d);g.setCancelled();return!1}}},appear:function(){null!==this.getTimer()&&(clearTimeout(this.getTimer()),this.setTimer(null));if(this.fileProgressWrapper.filters)try{this.fileProgressWrapper.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100}catch(a){this.fileProgressWrapper.style.filter=
"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d100)"}else this.fileProgressWrapper.style.opacity=1;this.fileProgressWrapper.style.height="";this.height=this.fileProgressWrapper.offsetHeight;this.opacity=100;this.fileProgressWrapper.style.display=""},disappear:function(){a("#"+this.fileProgressID).remove()}})})},"dojox/fx/ext-dojo/NodeList":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/fx","dojox/fx","dojo/NodeList-fx"],function(g,e,c,a,b){g.experimental("dojox.fx.ext-dojo.NodeList");
e.extend(b,{sizeTo:function(b){return this._anim(a,"sizeTo",b)},slideBy:function(b){return this._anim(a,"slideBy",b)},highlight:function(b){return this._anim(a,"highlight",b)},fadeTo:function(a){return this._anim(c,"_fade",a)},wipeTo:function(b){return this._anim(a,"wipeTo",b)}});return b})},"dojox/fx":function(){define(["./fx/_base"],function(g){return g})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(g,e,c,a,b){g=g.NodeList;e.extend(g,{_anim:function(a,
c,g){g=g||{};var d=b.combine(this.map(function(b){b={node:b};e.mixin(b,g);return a[c](b)}));return g.auto?d.play()&&this:d},wipeIn:function(a){return this._anim(b,"wipeIn",a)},wipeOut:function(a){return this._anim(b,"wipeOut",a)},slideTo:function(a){return this._anim(b,"slideTo",a)},fadeIn:function(b){return this._anim(a,"fadeIn",b)},fadeOut:function(b){return this._anim(a,"fadeOut",b)},animateProperty:function(b){return this._anim(a,"animateProperty",b)},anim:function(e,g,k,d,h){var m=b.combine(this.map(function(b){return a.animateProperty({node:b,
properties:e,duration:g||350,easing:k})}));d&&c.after(m,"onEnd",d,!0);return m.play(h||0)}});return g})},"app/vm/TipTodo":function(){define("dojo/_base/declare require dojo/on dojo/_base/lang app/util/_WidgetBase chanjet/form/Popover dijit/popup dojo/dom-construct dojo/_base/kernel".split(" "),function(g,e,c,a,b,f,l,k,d){return g("app/vm/TipTodo",[b],{customerName:"",customerId:"",workRecordId:"",postCreate:function(){this._initComps();this._initEvent()},_initComps:function(){var b=[];b.push("\x3cdiv id\x3d'tipsTodo'\x3e");
b.push("  \x3ca class\x3d'todo_a_close'\x3e\x3c/a\x3e");b.push("  \x3ca class\x3d'todo_a'\x3e\uff0b\u5f85\u529e\x3c/a\x3e");b.push("  \x3cdiv class\x3d'warnForNewTodo'\x3e");b.push("      \x3cdiv class\x3d'info'\x3e\u60a8\u591f\u901f\u5ea6\u7684\uff0c\u4e3a\u8be5\u5ba2\u6237\u6dfb\u52a0\u4e0b\u4e00\u6b65\u8ddf\u8fdb\u8ba1\u5212\u5427\x3c/div\x3e");this.customerName&&""!=this.customerName?b.push("      \x3cdiv\x3e\x3ca class\x3d'fl'\x3e\u3010\x3c/a\x3e\x3ca class\x3d'customerName fl'\x3e"+this.customerName+
"\x3c/a\x3e\x3ca class\x3d'fl'\x3e\u3011\x3c/a\x3e\x3c/div\x3e"):b.push("      \x3cp class\x3d'customerName'\x3e\x3c/p\x3e");b.push("  \x3c/div\x3e");b.push("\x3c/div\x3e");b=k.toDom(b.join(""));document.body.appendChild(b);b=$("#tipsTodo");b.style("display","block");b.style({left:(document.body.offsetWidth-b[0].offsetWidth)/2+"px"});this.tipTodoTimer=setTimeout(a.hitch(this,this.closeTodoDialog),5E3)},_initEvent:function(){this.own(c(dojo.byId("tipsTodo"),c.selector(".todo_a","click"),a.hitch(this,
this.openTodoDialog)),c(dojo.byId("tipsTodo"),c.selector(".todo_a_close","click"),a.hitch(this,this.closeTodoDialog)))},openTodoDialog:function(){var b=this,d={};""!=this.workRecordId&&(d.workRecord={id:this.workRecordId});""!=this.customerId&&(d.customer||(d.customer={}),d.customer.id=this.customerId);""!=this.customerName&&(d.customer||(d.customer={}),d.customer.name=this.customerName);e(["app/vm/TodoEditDialog"],a.hitch(this,function(e){b.tipTodoTimer&&(clearTimeout(b.tipTodoTimer),b.hideTodoDialog());
b.tdDialog=new e({item:d});b.tdDialog.show();b.own(c(b.tdDialog,"dataChange",a.hitch(this,b.todoChangeHandler)),c(b.tdDialog,"close",a.hitch(this,b.todoCancelHandler)))}))},closeTodoDialog:function(){this.tipTodoTimer&&(clearTimeout(this.tipTodoTimer),this.tdDialog&&this.destroy(),d.destroy(dojo.byId("tipsTodo")))},hideTodoDialog:function(){$("#tipsTodo").style("display","none")},todoChangeHandler:function(a){this.emit("dataChange",a);this.closeTodoDialog();this.destroy()},todoCancelHandler:function(){this.emit("close");
this.closeTodoDialog();this.destroy()},destroy:function(){this.tdDialog.destroy()}})})},"app/vm/TodoEditDialog":function(){define("dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dojo/text!./tpl/todoDetail.html dojo/dom-attr dojo/dom-style app/util/_WidgetBase dojo/on dojo/keys dojo/string app/util/CacheStore chanjet/form/Combox chanjet/widget/Dialog chanjet/form/Select app/task/TaskWorkRecordCheckIE8 chanjet/form/Date chanjet/form/Popover dijit/popup dijit/form/TimeTextBox".split(" "),function(g,
e,c,a,b,f,l,k,d,h,m,n,q,r,s,t,p,y,w){var z=g("app.vm.TodoEdit",[l],{title:null,item:null,fromCustomer:!1,todoDialog:null,todoEditPanel:null,postCreate:function(){this.inherited(arguments);this._initComps();this._initEvent();this._initData();this.todoEditPanel.validate()},_initComps:function(){var a=this;this.todoDialog=new q({"class":"todolist",autoDestroy:!0,bottomButtons:[{label:"\u53d6\u6d88",sTag:"cancel",baseClass:"whiteButton"},{label:"\u4fdd\u5b58",sTag:"ok",baseClass:"whiteButton"}],contentMinHeight:"320px",
contentMaxHeight:"380px",style:"width : 600px;",buttonClick:function(b,c,d){"ok"==d?(App.showLoading(),a._saveOrUpdateTD()):(a.emit("close"),this.destroy())}});this.todoEditPanel=new A({item:this.item});this.todoDialog.addChild(this.todoEditPanel)},_initEvent:function(){this.own(k(this.todoEditPanel,"validated",e.hitch(this,this._validatedHandler)))},_initData:function(){this.title=this.item&&this.item.id?"\u7f16\u8f91\u5f85\u529e":"\u65b0\u589e\u5f85\u529e";this.todoEditPanel.item=this.item;this.todoEditPanel.fromCustomer=
this.fromCustomer;this.todoEditPanel.init();this.todoDialog.set("title",this.title)},_validatedHandler:function(a){for(var c=this.todoDialog._bottomButtonslist,d=0,e=c.length;d<e;d++)"ok"==c[d].sTag&&(!0==a.isValid?c[d].set("disabled",!1):c[d].set("disabled",!0),b.set(c[d].domNode,"title",""));this.isValid=a.isValid},show:function(){this.todoDialog.show()},_saveOrUpdateTD:function(){var a=this;if(!this.connecting){this.connecting=!0;var b=this.todoEditPanel.getData();this.item&&this.item.id?xhr.put(URL.todo,
b,function(b){a.connecting=!1;App.hideLoading();a.emit("dataChange",{action:"edit",item:b});a.destroy()},function(){a.connecting=!1;App.hideLoading()}):xhr.post(URL.todo,b,function(b){a.connecting=!1;App.hideLoading();a.emit("dataChange",{action:"new",item:b});a.destroy()},function(){a.connecting=!1;App.hideLoading()})}},destroy:function(){this.todoEditPanel.destroy();this.todoDialog.destroy();this.inherited(arguments)}}),A=g("app.nav.TodoEditPanel",[l,c],{item:null,templateString:a,contentMaxCount:255,
postCreate:function(){this._initComps();this._initEvent();s.setCheckObject(this.noteInput);this.init()},destroy:function(){s.end();this.phraseDialog.destroy();this.inherited(arguments)},init:function(){dojo.isIE&&s.start();this.item?(this.item.customer&&(this.customerComp.setDisplayedValue(this.item.customer.name),this.customerComp.item=this.item.customer),this.noteInput.value=this.item.workContent||"",this._inputBlurHandler(),this._onInputChange(),this.dateComp.set("value",new Date(this.item.planTime)),
this.timeComp.set("value",new Date(this.item.planTime)),this._onInputChange()):(this.noteInput.value="",this.contentIsValid=!1);this.customerIsValid=this.timeIsValid=this.dateIsValid=!0},_initComps:function(){var a=this;this.customerComp=new n({queryExpr:"${0}",searchAttr:"param",itemAttr:"name",autoComplete:!1,style:{width:"228px",marginRight:"10px"},placeHolder:"\u8bf7\u9009\u62e9\u8981\u8ddf\u8fdb\u7684\u5ba2\u6237",pageSize:10,store:m.getStore({target:URL.wrCustomer,idProperty:"id"}),labelFunc:function(a,
b){return a.name},invalidMessage:"\u8bf7\u70b9\u51fb\u9009\u62e9\u5ba2\u6237",validator:function(){return a.customerIsValid}},this.customerNode);this.dateComp=new t({required:!1,invalidMessage:"\u683c\u5f0f\uff1a2014-09-18",displayMessage:function(b){b?($(a.dateNodeErr).show().html(b),a.dateIsValid=!1):($(a.dateNodeErr).hide().html(""),a.dateIsValid=!0);a.validate()},onChange:e.hitch(this,function(){this._dateChange()}),onInput:e.hitch(this,function(){this._dateChange()})},this.dateNode);this.timeComp=
new w({style:{width:"60px"},invalidMessage:"\u683c\u5f0f\uff1a12:38",constraints:{timePattern:"HH:mm",clickableIncrement:"T00:30",visibleIncrement:"T00:30:00",visibleRange:"T08:00:00"},displayMessage:function(b){b?($(a.timeNodeErr).show().html(b),a.timeIsValid=!1):($(a.timeNodeErr).hide().html(""),a.timeIsValid=!0);a.validate()},onChange:e.hitch(this,function(){this._timeChange()}),onInput:e.hitch(this,function(){this._timeChange()})},this.timeNode);this.remindComp=new r({name:"remind",required:!0,
labelAttr:"label",style:{width:"200px"}},this.remindNode);xhr.get(URL.todoPhraseList,{},e.hitch(this,function(b){a.phraseArr=b;a.phraseDialogNodeHtml=[];a.phraseDialogNodeHtml.push("\x3cul class\x3d'phrase-dialog'\x3e");for(b=0;b<a.phraseArr.length;++b)a.phraseDialogNodeHtml.push("\x3cli class\x3d'phraseLi'\x3e"+a.phraseArr[b].todoTips+"\x3c/li\x3e");a.phraseDialogNodeHtml.push("\x3c/ul\x3e");a.phraseDialog=new p({content:a.phraseDialogNodeHtml.join(""),baseClass:"phrase_card",onMouseLeave:function(){a._hidePhraseDialog()},
onBlur:function(){y.close(this)},onMouseEnter:function(){a.hidePhraseTimer&&clearTimeout(a.hidePhraseTimer)}});this.own(k(a.phraseDialog,k.selector(".phraseLi","click"),e.hitch(this,this._addPhrase)))}),e.hitch(this,function(){}));xhr.get(URL.todoRemindList,{},e.hitch(this,function(b){for(var c=0;c<b.length;++c)a.remindComp.addOption({label:b[c].label,value:b[c].id+""});a.item?a.item.remindType?a.remindComp.setValue(a.item.remindType+""):0==a.item.remindType?a.remindComp.setValue("0"):a.remindComp.setValue("1440"):
a.remindComp.setValue("1440")}),e.hitch(this,function(){}))},_initEvent:function(){var a="keydown, paste, cut, input, compositionend, propertychange";dojo.isIE&&(a="keyup , input , paste , propertychange");this.own(k(this.customerComp,"blur",e.hitch(this,this._customerBlurHandler)),k(this.customerComp,"change",e.hitch(this,this._customerBlurHandler)),k(this.noteInput,a,e.hitch(this,this._inputHandler)),k(this.noteInput,"focus",e.hitch(this,this._inputFocusHandler)),k(this.noteInput,"blur",e.hitch(this,
this._inputBlurHandler)),k(App.Message,"WorkRecordCheckIE8",e.hitch(this,this._inputHandler)),k(this.phraseNode,"mouseover",e.hitch(this,this._showPhraseDialog)),k(this.phraseNode,"mouseout",e.hitch(this,this._hidePhraseDialog)))},_customerBlurHandler:function(){0!=this.customerComp.get("value").length?this.customerIsValid=this.customerComp.item?!0:!1:this.customerIsValid=!0;this.customerComp.validate();this.validate()},_inputHandler:function(a){if(9>dojo.isIE)this.defer(function(){this._onInputChange()});
else{var b;if("keydown"==a.type){b=a.keyCode;switch(b){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==d.SPACE)return;b=!1;for(var c in d)if(d[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var f={faux:!0},p;for(p in a)"layerX"!=p&&"layerY"!=p&&(c=a[p],"function"!=typeof c&&"undefined"!=typeof c&&(f[p]=c));e.mixin(f,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){f._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});f._wasConsumed||this.defer(function(){this._onInputChange(f)})}},_onInputChange:function(){var a=e.trim(this.noteInput.value).length;0==a||a>this.contentMaxCount?(a>this.contentMaxCount?$(this.tipNode).html('\u60a8\u5df2\u8d85\u51fa\u4e86\x3cspan class\x3d"notice-label-num notice-label-num-error"\x3e'+
(a-this.contentMaxCount)+"\x3c/span\x3e\u5b57"):$(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e'+this.contentMaxCount+"\x3c/span\x3e\u5b57"),this.contentIsValid=!1):($(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e'+(this.contentMaxCount-a)+"\x3c/span\x3e\u5b57"),this.contentIsValid=!0);this.validate()},_inputFocusHandler:function(){$(this.noteInput).addClass("textarea_foucs");f.set(this.noteNotice,
"display","none")},_inputBlurHandler:function(){$(this.noteInput).removeClass("textarea_foucs");""==this.noteInput.value||0==this.noteInput.value.length?f.set(this.noteNotice,"display",""):f.set(this.noteNotice,"display","none")},_dateChange:function(){this.timeComp.get("value")||this.timeComp.set("value",new Date)},_timeChange:function(){this.dateComp.get("value")||this.dateComp.set("value",new Date)},_showPhraseDialog:function(){this.hidePhraseTimer&&clearTimeout(this.hidePhraseTimer);y.open({popup:this.phraseDialog,
around:this.phraseNode,orient:["below-centered","above-centered"]})},_hidePhraseDialog:function(){this.hidePhraseTimer=setTimeout(function(){y.close()},200)},_addPhrase:function(a){a=a.srcElement||a.target;(function(a,b,c){var d,e;b||alert("You must get cursor position first.");a.focus();a.setSelectionRange?a.setSelectionRange(b.start,b.end):a.createTextRange&&(d=a.createTextRange(),a.value.length===b.start?d.collapse(!1):d.moveToBookmark(b.bookmark),d.select());a.setSelectionRange?(d=a.value,d=d.substring(0,
b.start)+c+d.substring(b.end),c=b=b.start+c.length,e=a.scrollTop,a.value=d,a.scrollTop!=e&&(a.scrollTop=e),a.setSelectionRange(c,b)):a.createTextRange&&(a=document.selection.createRange(),a.text=c,a.setEndPoint("StartToEnd",a),a.select())})(this.noteInput,function(a){var b={text:"",start:0,end:0};if(a.setSelectionRange)a.focus(),b.start=a.selectionStart,b.end=a.selectionEnd,b.text=b.start!=b.end?a.value.substring(b.start,b.end):"";else if(document.selection){a.focus();var c,d=document.selection.createRange(),
e=document.body.createTextRange();e.moveToElementText(a);b.text=d.text;b.bookmark=d.getBookmark();for(c=0;0>e.compareEndPoints("StartToStart",d)&&0!==d.moveStart("character",-1);c++)"\r"==a.value.charAt(c)&&c++;b.start=c;b.end=b.text.length+b.start}return b}(this.noteInput),a.innerHTML);this._onInputChange();this._hidePhraseDialog()},validate:function(){this.emit("validated",{isValid:this.contentIsValid&&this.dateIsValid&&this.timeIsValid&&this.customerIsValid})},getData:function(){var a={workContent:h.trim(this.noteInput.value),
status:"TODO",remindType:this.remindComp.get("value")};this.customerComp.item&&(a.customerId=this.customerComp.item.id);if(this.dateComp.get("value")){var b=this.dateComp.get("value");this.timeComp.get("value")&&(b.setHours(this.timeComp.get("value").getHours()),b.setMinutes(this.timeComp.get("value").getMinutes()));a.planTime=b.getTime()}this.item&&(this.item.workRecord&&this.item.workRecord.id&&(a.workrecordId=this.item.workRecord.id),this.item.id&&(a.id=this.item.id),this.item.status&&this.item.status.value&&
(a.status=this.item.status.value));return a}});return z})},"app/task/TaskWorkRecordCheckIE8":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/on","app/task/Task"],function(g,e,c,a){return new (e([a],{constructor:function(){this.inherited(arguments);this.id="workRecordCheckIE8";this.timeUnit=1E3},destructor:function(){this.inherited(arguments)},setCheckObject:function(a){this.textObj=a},_execute:function(a){this.textObj||this.end();0<this.textObj.value.length&&(App.Message.emit("WorkRecordCheckIE8",
{}),this.end())}}))})},"app/task/Task":function(){define(["dojo/_base/lang","dojo/_base/declare"],function(g,e){return e(null,{constructor:function(){this.queue=[];this.id="";this._threadID=0;this.timeUnit=5E3},destructor:function(){this._threadID&&this.quit()},start:function(){this._threadID||(this._threadID=App.Thread.add(this.id,this._execute,this.timeUnit,this))},end:function(){this._threadID&&App.Thread.remove(this._threadID);this._threadID=0}})})},"chanjet/form/Date":function(){define(["dojo/_base/declare",
"dijit/form/DateTextBox","chanjet/form/Calendar","dojo/_base/lang","dojo/Evented"],function(g,e,c,a,b){return g("chanjet.form.Date",[e,b],{popupClass:c,min:"",max:"",displayFormater:"",timezone:"",calendar:{},postMixInProperties:function(){var a=this.constraints;this.min&&(a.min=this.min);this.max&&(a.max=this.max);a.datePattern=this.displayFormater;this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.emit("blur",this.textbox.value,this.get("value"))},openDropDown:function(b){var c=
this;this.dropDown&&this.dropDown.destroy();var e=a.isString(this.popupClass)?a.getObject(this.popupClass,!1):this.popupClass,d=this,h=this.get("value"),h={onChange:function(a){c.emit("getDate",a);d.set("value",a,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:h,textDir:d.textDir,currentFocus:!this._isInvalidDate(h)?h:this.dropDownDefaultValue,constraints:d.constraints,filterString:d.filterString,datePackage:d.params.datePackage,isDisabledDate:function(a){return!d.rangeCheck(a,d.constraints)}};
a.mixin(h,this.calendar);this.dropDown=new e(h);for(var e=this.constructor._meta.bases,h=0,g=e.length;h<g;h++){var n=e[h];if("dijit._HasDropDown"==n.prototype.declaredClass){n.prototype.openDropDown.call(this,arguments);break}}}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(g,e,c){return g("dijit.form.DateTextBox",c,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:e,_selector:"date",maxHeight:Infinity,value:new Date("")})})},
"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s,t){var p=a("dijit.Calendar",[n,q,r],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},
setValue:function(a){l.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new p._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:d.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,"keydown",d.hitch(this,"_onKeyDown")),h(this.dateRowsNode,"mouseover",d.hitch(this,
"_onDayMouseOver")),h(this.dateRowsNode,"mouseout",d.hitch(this,"_onDayMouseOut")),h(this.dateRowsNode,"mousedown",d.hitch(this,"_onDayMouseDown")),h(this.dateRowsNode,"mouseup",d.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=f.contains(a.target,"dijitCalendarDateLabel")?
a.target.parentNode:a.target)&&(a.dijitDateValue&&!f.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))f.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",f.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),f.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=
a.target.parentNode)&&a.dijitDateValue&&!f.contains(a,"dijitCalendarDisabledDate"))f.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&f.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var b=-1,c,d=this.currentFocus;switch(a.keyCode){case k.RIGHT_ARROW:b=1;case k.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case k.DOWN_ARROW:b=1;case k.UP_ARROW:c="week";break;case k.PAGE_DOWN:b=1;case k.PAGE_UP:c=a.ctrlKey||
a.altKey?"year":"month";break;case k.END:d=this.dateModule.add(d,"month",1),c="day";case k.HOME:d=new this.dateClassObj(d);d.setDate(1);break;default:return!0}c&&(d=this.dateModule.add(d,c,b));this._setCurrentFocusAttr(d);return!1},_onKeyDown:function(a){this.handleKey(a)||(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});p._MonthDropDownButton=a("dijit.Calendar._MonthDropDownButton",t,{onMonthSelect:function(){},
postCreate:function(){this.inherited(arguments);this.dropDown=new p._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",b);this.containerNode.innerHTML=(6==m("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});
p._MonthDropDown=a("dijit.Calendar._MonthDropDown",[q,s],{months:[],templateString:"\x3cdiv class\x3d'dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event\x3d'onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=g.map(a,function(a,b){return a?"\x3cdiv class\x3d'dijitCalendarMonthLabel' month\x3d'"+b+"'\x3e"+a+"\x3c/div\x3e":""}).join("")},_onClick:function(a){this.onChange(b.get(a.target,"month"))},onChange:function(){},
_onMenuHover:function(a){f.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return p})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s){var t=e("dijit.CalendarLite",[q,r],{templateString:s,
dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==
typeof a&&(a=f.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),d=this.dateModule.getDaysInMonth(a),e=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),f=new this.dateClassObj,h=c.getFirstDayOfWeek(this.lang);h>b&&(h-=7);if(!this.summary){var k=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",k[a.getMonth()])}this._date2cell={};g.forEach(this.dateCells,function(c,g){var k=g+h,x=new this.dateClassObj(a),
u="dijitCalendar",l=0;k<b?(k=e-b+k+1,l=-1,u+="Previous"):k>=b+d?(k=k-b-d+1,l=1,u+="Next"):(k=k-b+1,u+="Current");l&&(x=this.dateModule.add(x,"month",l));x.setDate(k);this.dateModule.compare(x,f,"date")||(u="dijitCalendarCurrentDate "+u);this.isDisabledDate(x,this.lang)?(u="dijitCalendarDisabledDate "+u,c.setAttribute("aria-disabled","true")):(u="dijitCalendarEnabledDate "+u,c.removeAttribute("aria-disabled"),c.setAttribute("aria-selected","false"));(l=this.getClassForDate(x,this.lang))&&(u=l+" "+
u);c.className=u+"Month dijitCalendarDateTemplate";u=x.valueOf();this._date2cell[u]=c;c.dijitDateValue=u;this._setText(this.dateLabels[g],x.getDateLocalized?x.getDateLocalized(this.lang):x.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;g.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,
{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(c){this.dateModule=c.datePackage?d.getObject(c.datePackage,!1):a;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=c.datePackage?d.getObject(c.datePackage+".locale",!1):b},_createMonthWidget:function(){return t._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,
b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=c.getFirstDayOfWeek(this.lang);this.dayCellsHtml=n.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[d++%7]});a=n.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);l.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",
a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=d.hitch(this,function(a,b,c){return h(this[a],"click",d.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c);a=this._patchDate(a);
this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(m("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&
!a.dijitDateValue;a=a.parentNode);a&&!k.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function b(a,c){k.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}g.forEach(this._selectedCells||[],d.partial(b,!1));this._selectedCells=g.filter(g.map(a,this._getNodeByDate,this),function(a){return a});g.forEach(this._selectedCells,
d.partial(b,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});t._MonthWidget=e("dijit.CalendarLite._MonthWidget",q,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a),c=6==m("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+g.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+
"\x3c/div\x3e"}});return t})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html".split(" "),function(g,e,c,a,b,f,l,k,d){return g("dijit.form.DropDownButton",[f,l,k],{baseClass:"dijitDropDownButton",templateString:d,_fillContent:function(){if(this.srcNodeRef){var a=c("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},
startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var d=c("[widgetId]",this.dropDownContainer)[0];d&&(this.dropDown=a.byNode(d));delete this.dropDownContainer}this.dropDown&&b.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",e.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,e,c,a,b,f,l,k){new Date("X");return a("dijit.form._DateTimeTextBox",[f,l],{templateString:k,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:e.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,
b){var c=this._isInvalidDate(a),e=this._isInvalidDate(b);return c?e?0:-1:e?1:g.compare(a,b,this._selector)},autoWidth:!0,format:function(a,b){return!a?"":this.dateLocaleModule.format(a,b)},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){a.toGregorian&&(a=a.toGregorian());return c.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){this.dateModule=
a.datePackage?b.getObject(a.datePackage,!1):g;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?b.getObject(a.datePackage+".locale",!1):e;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=
this._selector;a.fullYear=!0;var b=c.fromISOString;"string"==typeof a.min&&(a.min=b(a.min));"string"==typeof a.max&&(a.max=b(a.max));this.inherited(arguments)},_isInvalidDate:function(a){return!a||isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,e){void 0!==a&&("string"==typeof a&&(a=c.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments);this.value instanceof
Date&&(this.filterString="");this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){var c=this._get("value");"value"==a&&c instanceof Date&&0==this.compare(b,c)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var c=b.isString(this.popupClass)?b.getObject(this.popupClass,!1):this.popupClass,e=this,f=this.get("value");
this.dropDown=new c({onChange:function(a){e.set("value",a,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:f,textDir:e.textDir,currentFocus:!this._isInvalidDate(f)?f:this.dropDownDefaultValue,constraints:e.constraints,filterString:e.filterString,datePackage:e.params.datePackage,isDisabledDate:function(a){return!e.rangeCheck(a,e.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,
this.constraints),b,a)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(g,e,c){return g("dijit.form.RangeBoundTextBox",c,{rangeMessage:"",rangeCheck:function(a,b){return("min"in b?0<=this.compare(a,b.min):!0)&&("max"in b?0>=this.compare(a,b.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var b=!1;"min"in this.constraints&&
(b=this.constraints.min,b=0>this.compare(a,"number"==typeof b&&0<=b&&0!=a?0:b));!b&&"max"in this.constraints&&(b=this.constraints.max,b=0<this.compare(a,"number"!=typeof b||0<b?b:0));return b},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var b=this.get("value");return null!=b&&""!==b&&("number"!=typeof b||
!isNaN(b))&&!this.isInRange(a)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=e.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(g,e,c,a){return g("dijit.form.MappedTextBox",a,{postMixInProperties:function(){this.inherited(arguments);
this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=c.place("\x3cinput type\x3d'hidden'"+(this.name&&!e("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+
'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"chanjet/form/Calendar":function(){define("dojo/_base/declare dijit/Calendar dojo/text!./templates/Calendar.html dojo/_base/lang dijit/_Widget dijit/_CssStateMixin dijit/_TemplatedMixin dijit/form/DropDownButton dojo/_base/array dojo/sniff dojo/dom-attr dojo/dom-class dojo/dom-geometry".split(" "),function(g,e,c,a,b,f,l,k,d,h,m,n,q){var r=g("chanjet.form.Calendar",[e],{templateString:c,
baseClass:"chanjetWidget chanjetCalendar",hideMonth:!1,hideYear:!0,hideLastRow:!0,startYear:1930,endYear:2050,_onYearSelect:function(a){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);b.setYear(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_populateControls:function(){this.inherited(arguments);var a=new this.dateClassObj(this.currentFocus);a.setDate(1);a=a.getFullYear();this.yearWidget||(this.yearWidget=
this._createYearWidget());this.yearWidget.set("year",a)},_createMonthWidget:function(){return new e._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule,_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","narrow","standAlone",this.lang,a),b=d.map(b,function(a){return a?a+"\u6708":""});this.dropDown.set("months",b);this.containerNode.innerHTML=(6==h("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+
this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}},this.monthNode)},_createYearWidget:function(){return new r._YearDropDownButton({id:this.id+"_yddb",tabIndex:-1,onYearSelect:a.hitch(this,"_onYearSelect"),lang:this.lang,startYear:this.startYear,endYear:this.endYear,dateLocaleModule:this.dateLocaleModule},this.yearNode)},buildRendering:function(){this.inherited(arguments);this.yearWidget||(this.yearWidget=this._createYearWidget())},
_setCurrentFocusAttr:function(){this.inherited(arguments);this._setHideLastRowAttr(!0)},_setHideLastRowAttr:function(a){if(a&&(a=dojo.query("tr",this.dateRowsNode))&&a[5]){var b=dojo.query(".dijitCalendarCurrentMonth",a[5]);dojo.style(a[5],"display",0==b.length?"none":"")}},_setHideMonthAttr:function(a){a?dojo.query("tr.dijitCalendarMonthContainer",this.domNode).style("display","none"):dojo.query("tr.dijitCalendarMonthContainer",this.domNode).style("display","block")},_setHideYearAttr:function(a){a?
dojo.query(".dijitCalendarYearContainer",this.domNode).style("display","none"):dojo.query(".dijitCalendarYearContainer",this.domNode).style("display","block")}});r._YearDropDownButton=g("dijit.Calendar._YearDropDownButton",k,{startYear:1930,endYear:2030,onYearSelect:function(a){},_onDropDownClick:function(){this.inherited(arguments);this._opened&&this.dropDown.showCurrentYear()},postCreate:function(){this.inherited(arguments);this.dropDown=new r._YearDropDown({id:this.id+"_ydd",onChange:this.onYearSelect})},
_setYearAttr:function(a){for(var b=[],c=this.startYear;c<=this.endYear;c++){var d=c;b.push({year:d,name:""+d+"\u5e74"})}this.dropDown.set("years",b,a);try{this.containerNode.innerHTML=(6==h("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarCurrentYearLabel'\x3e"+a+"\u5e74\x3c/div\x3e"}catch(e){alert(e.message)}}});r._YearDropDown=g("chanjet.Calendar._YearDropDown",[b,l],{years:[],style:"height:270px;overflow:auto;",templateString:"\x3cdiv class\x3d'dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event\x3d'onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'\x3e\x3c/div\x3e",
_setYearsAttr:function(a,b){var c=0,e=-1;this.domNode.innerHTML=d.map(a,function(a){b&&a.year==b&&(e=c);c++;return a?"\x3cdiv class\x3d'dijitCalendarYearLabel' year\x3d'"+a.year+"'\x3e"+a.name+"\x3c/div\x3e":""}).join("");this._currentYearIndex=e},showCurrentYear:function(){if(-1<this._currentYearIndex){this.domNode.scrollTop=0;var a=q.position(this.domNode.children[this._currentYearIndex]),b=q.position(this.domNode);this.domNode.scrollTop=a.y-b.y}},_onClick:function(a){this.onChange(m.get(a.target,
"year"))},onChange:function(a){},_onMenuHover:function(a){n.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return r})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(g,e,c,a,b){return g("dijit.form.TimeTextBox",b,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:a,_selector:"time",value:new Date(""),maxHeight:-1,_onKey:function(a){if(!this.disabled&&!this.readOnly)switch(this.inherited(arguments),
a.keyCode){case e.ENTER:case e.TAB:case e.ESCAPE:case e.DOWN_ARROW:case e.UP_ARROW:break;default:this.defer(function(){var a=this.get("displayedValue");this.filterString=a&&!this.parse(a,this.constraints)?a.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),
function(g,e,c,a,b,f,l,k,d,h,m,n,q,r,s,t){return b("dijit._TimePicker",[s,t],{baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:a.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(a){k.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");
this.set("value",a)},_setValueAttr:function(a){this._set("value",a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){a=[];for(b=0;b<this._maxIncrement;b++)(c=this._createOption(b))&&a.push(c);return a},_showText:function(){var b=a.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=b(this.clickableIncrement);this._visibleIncrementDate=b(this.visibleIncrement);var c=
3600*this._clickableIncrementDate.getHours()+60*this._clickableIncrementDate.getMinutes()+this._clickableIncrementDate.getSeconds(),d=3600*this._visibleIncrementDate.getHours()+60*this._visibleIncrementDate.getMinutes()+this._visibleIncrementDate.getSeconds();(this.value||this.currentFocus).getTime();this._refDate=b("T00:00:00");this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=d/c;this._maxIncrement=86400/c;b=this._getFilteredNodes();g.forEach(b,function(a){this.domNode.appendChild(a)},
this);!b.length&&this.filterString&&(this.filterString="",this._showText())},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){for(var b in a)this._set(b,a[b]);a.locale||(a.locale=this.lang)},_createOption:function(a){var b=new Date(this._refDate),d=this._clickableIncrementDate;b.setTime(b.getTime()+36E5*d.getHours()*a+6E4*d.getMinutes()*a+1E3*d.getSeconds()*a);"time"==this.constraints.selector&&
b.setFullYear(1970,0,1);d=c.format(b,this.constraints);if(this.filterString&&0!==d.toLowerCase().indexOf(this.filterString))return null;var g=this.ownerDocument.createElement("div");g.className=this.baseClass+"Item";g.date=b;g.idx=a;l.create("div",{"class":this.baseClass+"ItemInner",innerHTML:d},g);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?f.add(g,this.baseClass+"Marker"):a%this._clickableIncrement||f.add(g,this.baseClass+"Tick");this.isDisabledDate(b)&&f.add(g,this.baseClass+"ItemDisabled");
this.value&&!e.compare(this.value,b,this.constraints.selector)&&(g.selected=!0,f.add(g,this.baseClass+"ItemSelected"),this._selectedDiv=g,f.contains(g,this.baseClass+"Marker")?f.add(g,this.baseClass+"MarkerSelected"):f.add(g,this.baseClass+"TickSelected"),this._highlightOption(g,!0));return g},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(a){if((a=a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a))this._highlighted_option=
null,this.set("value",a),this.onChange(a)},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}f.toggle(a,this.baseClass+"ItemHover",b);f.contains(a,this.baseClass+"Marker")?f.toggle(a,this.baseClass+"MarkerHover",b):f.toggle(a,this.baseClass+"TickHover",b)}},handleKey:function(a){if(a.keyCode==d.DOWN_ARROW)return this.selectNextNode(),
a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==d.UP_ARROW)return this.selectPreviousNode(),a.stopPropagation(),a.preventDefault(),!1;if(a.keyCode==d.ENTER||a.keyCode===d.TAB){if(!this._keyboardSelected&&a.keyCode===d.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});return a.keyCode===d.TAB}},onHover:function(a){this._highlightOption(a,!0)},onUnhover:function(a){this._highlightOption(a,!1)},onSelect:function(a){this._highlightOption(a,!0)},onDeselect:function(a){this._highlightOption(a,
!1)},onClick:function(a){this._onOptionSelected({target:a})}})})},"url:app/vm/tpl/customerGrid.html":'\x3cdiv class\x3d"customer_grid w1000"\x3e\n    \x3cdiv class\x3d"customerpanel"\x3e\n        \x3cdiv align\x3d"center" id\x3d"blankgridcover" style\x3d"display: none;" class\x3d"divblankcover" data-dojo-attach-point\x3d"listNoneCover"\x3e\n            \x3cdiv class\x3d"customerlistNull"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d\'customer_none_label\'\x3e\n                \x3cspan\x3e\x3ca href\x3d\'http://www.chanapp.com/download.html\' target\x3d"_blank"\x3e\u4e0b\u8f7d\u624b\u673a\u7aef\u5e94\u7528\x3c/a\x3e\x3c/span\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv align\x3d"center" id\x3d"searchgridcover" style\x3d\'display:none;\' class\x3d\'searchgridcover\' data-dojo-attach-point\x3d\'searchNoneCover\'\x3e\n            \x3cdiv class\x3d"searchCustomerListNull"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d\'search_none_label\'\x3e\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u5ba2\u6237\uff0c\u6362\u4e2a\u6761\u4ef6\u641c\u641c\u770b\u5427\uff01\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"customergrid"\x3e\n            \x3cdiv data-dojo-attach-point\x3d"listContentPanel" class\x3d"list-grid" style\x3d"height: 450px"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/workrecordDetail.html":'\x3cdiv class\x3d"workrecord-detail"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"tipAtNode" class\x3d\'first-tip hide\'\x3e\u8f93\u5165@\u8bd5\u8bd5\uff0c\u6709\u60ca\u559c\u54e6\uff01\x3ca class\x3d"tip-close" data-dojo-attach-point\x3d"closeNode"\x3e\u77e5\u9053\u4e86~\x3c/a\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"header clearfix"\x3e\n        \x3cdiv class\x3d\'connect-wrapper\' \x3e\n            \x3cdiv data-dojo-attach-point\x3d"connectNode"\x3e\x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d"progressNode"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"notice-label" data-dojo-attach-point\x3d"tipNode"\x3e\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num" data-dojo-attach-point\x3d"tipLeftNum"\x3e255\x3c/span\x3e\u5b57\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"content"\x3e\n        \x3cdiv id\x3d"sayText tw_textBg1" style\x3d"word-wrap: break-word;" data-dojo-attach-point\x3d"editNode" class\x3d"wk_creatTop" contenteditable\x3d"true" autocomplete\x3d"off" tabindex\x3d"-1"\x3e\x3c/div\x3e\n\x3c!--\n        \x3ctextarea class\x3d"textarea hide" data-dojo-attach-point\x3d"noteInput" contenteditable\x3d"true"\x3e\x3c/textarea\x3e\n--\x3e\n    \x3c/div\x3e\n    \x3c!--\x3cdiv class\x3d"placeholder-label hide" data-dojo-attach-point\x3d"noteNotice"\x3e\u8f93\u5165\u8bb0\u5f55\u5185\u5bb9\x3c/div\x3e--\x3e\n    \x3cdiv class\x3d"footer"\x3e\n        \x3cdiv class\x3d"upload-button" data-dojo-attach-point\x3d"uploadImgBtnOuter"\x3e\x3cdiv data-dojo-attach-point\x3d"uploadImgBtn2"\x3e\u4e0a\u4f20\u56fe\u7247\x3c/div\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cul data-dojo-attach-point\x3d"uploadedImagesNode" id\x3d"uploadImages" style\x3d"display: none;"\x3e\n        \x3cli class\x3d"prevLi" data-dojo-attach-point\x3d"prevLi"\x3e\x3cdiv class\x3d"prevLiIcon"\x3e\x3c/div\x3e\x3c/li\x3e\n        \x3cli class\x3d"prevLiDisable" data-dojo-attach-point\x3d"prevLiDisable"\x3e\x3c/li\x3e\n        \x3cli class\x3d"uploadBtn imageList" id\x3d"wk_addBt" \x3e\n            \x3cdiv class\x3d"maxAttach" data-dojo-attach-point\x3d"maxAttachNode" style\x3d"display:none;"\x3e\u6700\u591a\u4e0a\u4f20\x3cbr/\x3e9\u5f20\u56fe\u7247\x3c/div\x3e\n            \x3ca data-dojo-attach-point\x3d"uploadImgBtn1"\x3e\x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"nextLi" data-dojo-attach-point\x3d"nextLi"\x3e\x3cdiv class\x3d"nextLiIcon"\x3e\x3c/div\x3e\x3c/li\x3e\n        \x3cli class\x3d"nextLiDisable" data-dojo-attach-point\x3d"nextLiDisable"\x3e\x3c/li\x3e\n    \x3c/ul\x3e\n\x3c/div\x3e',
"url:chanjet/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"url:app/vm/tpl/todoDetail.html":'\x3cdiv class\x3d"todo-detail"\x3e\n    \x3cdiv class\x3d"header clearfix"\x3e\n        \x3cdiv class\x3d"notice-label" data-dojo-attach-point\x3d"tipNode"\x3e\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num" data-dojo-attach-point\x3d"tipLeftNum"\x3e${contentMaxCount}\x3c/span\x3e\u5b57\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"content"\x3e\n        \x3ctextarea class\x3d"textarea" data-dojo-attach-point\x3d"noteInput" contenteditable\x3d"true"\x3e\x3c/textarea\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"placeholder-label" data-dojo-attach-point\x3d"noteNotice"\x3e\u8bf7\u8f93\u5165\u5f85\u529e\u4e8b\u9879\x3c/div\x3e\n    \x3cdiv class\x3d"phraseNode-label" data-dojo-attach-point\x3d"phraseNode"\x3e\u5feb\u6377\u8bed\x3c/div\x3e\n    \x3cdiv class\x3d"remind"\x3e\n        \x3ctable class\x3d"remind-table"\x3e\n            \x3ctr class\x3d"remind-tr1"\x3e\n                \x3ctd class\x3d"remind-label remind-td1"\x3e\u5f85\u529e\u65f6\u95f4\x3c/td\x3e\n                \x3ctd class\x3d"remind-label remind-td2"\x3e\x3c/td\x3e\n                \x3ctd class\x3d"remind-label remind-td3"\x3e\u591a\u4e45\u63d0\u9192\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr class\x3d"remind-tr2"\x3e\n                \x3ctd\x3e\x3cdiv data-dojo-attach-point\x3d"dateNode"\x3e\x3c/div\x3e\x3c/td\x3e\n                \x3ctd class\x3d"remind-td2"\x3e\n                    \x3cdiv data-dojo-attach-point\x3d"timeNode"\x3e\x3c/div\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"remind-td3"\x3e\x3cdiv data-dojo-attach-point\x3d"remindNode"\x3e\x3c/div\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr class\x3d"remind-tr3"\x3e\n                \x3ctd\x3e\x3cdiv data-dojo-attach-point\x3d"dateNodeErr"\x3e\x3c/div\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3cdiv data-dojo-attach-point\x3d"timeNodeErr"\x3e\x3c/div\x3e\x3c/td\x3e\n                \x3ctd\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d\'customer-wrapper\'\x3e\n        \x3cdiv data-dojo-attach-point\x3d"customerNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\n\t\x3cthead\x3e\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr role\x3d"row"\x3e\n\t\t\t${!dayCellsHtml}\n\t\t\x3c/tr\x3e\n\t\x3c/thead\x3e\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\n\t\t\t${!dateRowsHtml}\n\t\x3c/tbody\x3e\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\x3c/tfoot\x3e\n\x3c/table\x3e\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\tdata-dojo-attach-point\x3d"valueNode" role\x3d"presentation"\n/\x3e\x3c/span\x3e\n',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:chanjet/form/templates/Calendar.html":'\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" class\x3d"dijitCalendarContainer" role\x3d"grid" aria-labelledby\x3d"${id}_mddb ${id}_year" data-dojo-attach-point\x3d"gridNode"\x3e\n\t\x3cthead\x3e\n\t\t\x3ctr class\x3d"dijitReset dijitCalendarMonthContainer" valign\x3d"top"\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' data-dojo-attach-point\x3d"decrementMonth" scope\x3d"col"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset\' colspan\x3d"5" scope\x3d"col"\x3e\n                \x3cdiv data-dojo-attach-point\x3d"yearNode"\x3e\n                \x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode"\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/th\x3e\n\t\t\t\x3cth class\x3d\'dijitReset dijitCalendarArrow\' scope\x3d"col" data-dojo-attach-point\x3d"incrementMonth"\x3e\n\t\t\t\t\x3cspan class\x3d"dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\n\t\t\t\x3c/th\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr role\x3d"row"\x3e\n\t\t\t${!dayCellsHtml}\n\t\t\x3c/tr\x3e\n\t\x3c/thead\x3e\n\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\n\t\t\t${!dateRowsHtml}\n\t\x3c/tbody\x3e\n\t\x3ctfoot class\x3d"dijitReset dijitCalendarYearContainer"\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd class\x3d\'dijitReset\' valign\x3d"top" colspan\x3d"7" role\x3d"presentation"\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\x3c/tfoot\x3e\n\x3c/table\x3e\n',
"*now":function(g){g(['dojo/i18n!*preload*app/vm/nls/CustomerGrid*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("app/vm/CustomerGrid","dojo/_base/declare dijit/_TemplatedMixin dojo/text!./tpl/customerGrid.html app/util/_WidgetBase app/util/Functions chanjet/util/JsonStore chanjet/grid/LightGrid dojo/_base/lang dojo/on dojo/dom-construct chanjet/form/Popover dijit/popup dojo/date/locale dojo/dom-class dojo/json app/vm/Scroll2Top dojo/_base/array require dojo/_base/kernel dojo/window app/vm/WorkrecordEditDialog app/vm/TipTodo app/widget/editor/source/textParse".split(" "),function(g,e,c,a,b,f,l,k,d,h,
m,n,q,r,s,t,p,y,w,z,A,B,C){function v(a,b,c){c||(c="yes");b*=2;for(var d=0,e="",f=0;f<a.length;++f)if(d=1E4<=a.charCodeAt(f)?d+2:d+1,e+=a.substring(f,f+1),d>=b){"yes"==c&&(d>=b&&f+1<a.length)&&(e+="...");break}return e}function D(a){for(var b=0,c=0;c<a.length;++c)b=1E4<=a.charCodeAt(c)?b+2:b+1;return parseInt((b+1)/2)}return g("app/vm/CustomerGrid",[a,e],{templateString:c,listColumn:null,listStore:null,listGridComp:null,urlPageno:1,from:null,target:null,load:function(a){a=a||{};this.listStore.load({params:a,
callback:a.callback||function(){App.hideLoading()}})},postCreate:function(){var a=this;this.sessionStorage=App.sessionStorage();this.lastParams={};this.listColumn=[{field:"id",label:"\u5173\u6ce8",style:{width:"120px"},sortable:!1,resizeable:!1,renderCell:function(b,c,e,f){e="";e=b.follow?e+('\x3cdiv class\x3d"heart2" customerId\x3d"'+b.id+'"\x3e\x3c/div\x3e'):e+('\x3cdiv class\x3d"heart1" customerId\x3d"'+b.id+'"\x3e\x3c/div\x3e');c=h.toDom('\x3cdiv class\x3d"customerfollow"\x3e\x3c/div\x3e');e=
h.toDom(e);b=b.follow?k.hitch(a,a.onCancleFollow):k.hitch(a,a.onFollow);d(e,"click",b);c.appendChild(e);return c}},{field:"name",label:"\u5ba2\u6237\u540d\u79f0",style:{width:"175px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){b=App.escapeQuote(App.trimHTML(b));c="";a=a.id;if(6>=D(b))c+='\x3cdiv class\x3d"customername1 customernamesmall" customerId\x3d"'+a+'"\x3e'+v(b,8)+"\x3c/div\x3e",c+='\x3cdiv class\x3d"customername1 customernamebig" customerId\x3d"'+a+'"\x3e'+v(b,6)+"\x3c/div\x3e";
else{if(8>=D(b)){d=v(b,8);var e=v(b,6,"no");b=v(b.substring(e.length,b.length),6);c+='\x3cdiv class\x3d"customername1 customernamesmall" customerId\x3d"'+a+'"\x3e'+d+"\x3c/div\x3e"}else{d=v(b,8,"no");var f=v(b.substring(d.length,b.length),8),e=v(b,6,"no");b=v(b.substring(e.length,b.length),6);c=c+('\x3cdiv class\x3d"customername2 customernamesmall" customerId\x3d"'+a+'"\x3e'+d+"\x3c/div\x3e")+('\x3cdiv class\x3d"customername3 customernamesmall" customerId\x3d"'+a+'"\x3e'+f+"\x3c/div\x3e")}c+='\x3cdiv class\x3d"customername2 customernamebig" customerId\x3d"'+
a+'"\x3e'+e+"\x3c/div\x3e";c+='\x3cdiv class\x3d"customername3 customernamebig" customerId\x3d"'+a+'"\x3e'+b+"\x3c/div\x3e"}return h.toDom(c)}},{field:"contacts",label:"\u8054\u7cfb\u4eba",style:{width:"170px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){c="";b&&0<b.length&&(c=b[0].mobile?'\x3cdiv class\x3d"customercontact" id\x3d"customercontact_'+a.id+'"\x3e\x3ctable class\x3d"customercontact2"\x3e\x3ctr\x3e\x3ctd\x3e'+v(App.escapeQuote(App.trimHTML(b[0].name)),7)+"\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e"+
App.trimHTML(v(b[0].mobile,7))+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e":'\x3cdiv class\x3d"customercontact" id\x3d"customercontact_'+a.id+'"\x3e\x3ctable class\x3d"customercontact1"\x3e\x3ctr\x3e\x3ctd\x3e'+v(App.escapeQuote(App.trimHTML(b[0].name)),7)+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e");return h.toDom(c)}},{field:"name",label:"\u5f53\u524d\u8fdb\u5ea6",style:{width:"105px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return a.status?h.toDom('\x3cdiv class\x3d"customerstatus"\x3e'+
App.trimHTML(a.status.label?a.status.label:"")+"\x3c/div\x3e"):h.toDom('\x3cdiv class\x3d"customerstatus"\x3e\x3c/div\x3e')}},{field:"lastRecord",label:"\u6700\u8fd1\u8ddf\u8fdb",style:{width:"430px"},sortable:!1,resizeable:!1,renderCell:function(c,d,e,f){e=App.trimHTML(b.getTextnode(d?d.owner?d.owner.id==App.user.userId?"\u6211":d.owner.name?d.owner.name:"":"":""));f=C.parseAtText(b.getTextnode(d?d.content?App.trimHTML(d.content):"":""));var g="";d&&d.contactTime&&(g=q.format(new Date(d.contactTime),
{selector:"date",datePattern:"MM\u6708dd\u65e5 HH:mm"}));d=25<D(f)?"customerlastworkrecordmouseover":"";c=['\x3cdiv class\x3d"customerlastworkrecord"\x3e\x3ctable cellspacing\x3d"0"\x3e\x3ctr\x3e\x3ctd style\x3d"color: #98A0AA;width: 130px;vertical-align: bottom;"\x3e\x3cdiv style\x3d"height: 25px;line-height: 35px;"\x3e',g,'\x3c/div\x3e\x3c/td\x3e\x3ctd style\x3d"color: #98A0AA;width:150px;vertical-align: bottom;"\x3e\x3cdiv style\x3d"height: 25px;line-height: 35px;"\x3e',e,'\x3c/div\x3e\x3c/td\x3e\x3ctd style\x3d"padding: 0; margin: 0;vertical-align: top;"\x3e',
"customer_list"==a.from?'\x3cdiv class\x3d"addNew fr"\x3e\x3cspan class\x3d"addIcon"\x3e\x3c/span\x3e\u65b0\u589e\u8bb0\u5f55\x3c/div\x3e\x3cdiv class\x3d"addNewHide fr"\x3e\x3c/div\x3e':"","\x3c/td\x3e\x3ctr\x3e",'\x3ctd colspan\x3d"3" style\x3d"vertical-align: top"\x3e\x3cdiv id\x3d"customerlastworkrecord_'+c.id+'" class\x3d"'+d+'" style\x3d"height: 20px;line-height: 20px;width: 380px;overflow: hidden;"\x3e',v(f,25),"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e"].join("");return h.toDom(c)}}];
this.listStore=new f({url:URL.customerList,pageSize:20,method:"GET",autoLoad:!1});this.listStore.on("error",function(){App.hideLoading()});this.listStore.on("beforeload",function(b){a.lastParams=b});this.listGridComp=new l({store:this.listStore,loadMask:!0,loadModel:"Pagination",pageSize:20,columns:this.listColumn,autoHeight:!0,onRenderRow:function(a,b){var c=b.id,d=App.sessionStorage().get("readed"),e=[],f="";d&&(e=d.split(","),p.some(e,function(a){return a==c})&&(f="readed"));f&&w.addClass(a,f)}},
this.listContentPanel);this.listGridComp.on(".dgrid-row :click",function(b){var c=a.listGridComp.row(b);k.hitch(this,a._listGridRowClick)(c,b,a)});this.listGridComp.on(".dgrid-row .customercontact :mouseover",k.hitch(this,this.onShowContact));this.listGridComp.on(".dgrid-row .customercontact :mouseout",k.hitch(this,this.onHideContact));this.listGridComp.on(".dgrid-row .customerlastworkrecordmouseover :mouseover",k.hitch(this,this.onShowWorkRecord));this.listGridComp.on(".dgrid-row .customerlastworkrecordmouseover :mouseout",
k.hitch(this,this.onHideWorkRecord));this.scrollComps=new t({showScrollTop:200,appendTarget:this.domNode});this.own(d(this.listStore,"datachanged",k.hitch(this,this._listStoreDataChanged)))},destroy:function(){this.scrollComps.destroy();this.inherited(arguments)},_listGridRowClick:function(a,b,c){c.workRecordTip&&(n.close(),c.workRecordTip.destroy());c.contactTip&&(n.close(),c.contactTip.destroy());b=b.target;if(!r.contains(b,"heart2")&&!r.contains(b,"heart1"))if(r.contains(b,"addNew"))c.onNewWorkRecord(a.data);
else{b=parseInt(a.element.rowIndex)+1;b=c._writeHash(z.getBox().t,b);c=c.sessionStorage;var d=c.get("readed"),e=a.data.id;d?(a=d.split(","),p.some(a,function(a){return a==e})||c.set("readed",d+","+e)):c.set("readed",e);router.go("customer_detail/init/"+e+b);App.bdstatEvent("\u5ba2\u6237\u5217\u8868-\u67e5\u770b\u5ba2\u6237\u8be6\u60c5")}},_writeHash:function(a,b){var c=this.lastParams,d="",e=s.parse(c.queryValue||"{}"),f=0===c.pageno?1:c.pageno,c=20*(f-1)+b;if("customer_list"==this.from){if(e.hasOwnProperty("searchValue"))d=
"searchValue\x3d"+e.searchValue+"\x26";else for(var g in e)var h=g+"\x3d"+e[g].join(",")+"\x26",d=d+h;d+="pageno\x3d"+f+"\x26_dc\x3d"+(new Date).valueOf();e="/"+d+"/y\x3d"+a;router.go(this.from+"/init"+e,!0);return e+"/idx\x3d"+c}if("customer_report"==this.from){d=this.target.reportParams;if(e.owner&&0<e.owner.length)for(c=0;c<d.params.length;++c)if("owner"==d.params[c].field){d.params[c].value=e.owner[0];break}e.hasOwnProperty("searchValue")&&(d.searchValue=e.searchValue);d=encodeURI(s.stringify(d));
router.go(this.from+"/init"+("/"+d)+"/"+(new Date).valueOf(),!0);return""}},_listStoreDataChanged:function(a){var b=a.tag;a=a.data;"clear"==b&&(this.hideDom(this.listNoneCover),this.showDom(this.listGridComp.domNode));"load"==b&&(b=!1,0==a.items.length?"{}"==this.lastParams.queryValue||""==this.lastParams.queryValue||'{"searchValue":""}'==this.lastParams.queryValue?(this.hideDom(this.listGridComp.domNode),this.showDom(this.listNoneCover),this.hideDom(this.searchNoneCover),b=!0):(this.hideDom(this.listGridComp.domNode),
this.hideDom(this.listNoneCover),this.showDom(this.searchNoneCover)):(this.showDom(this.listGridComp.domNode),this.hideDom(this.listNoneCover),this.hideDom(this.searchNoneCover)),this.target&&this.target.listDataChange&&this.target.listDataChange(a.total,b))},onNewWorkRecord:function(a){var b={item:{customer:{id:a.id,name:a.name||""}},fromCustomer:!0};a.status?a.status.value:"";a.status&&(b.item.status={value:a.status.value});a=new A(b);d(a,"dataChange",k.hitch(this,function(a){if("new"==a.action){this.load();
var b={customerId:"",customerName:"",workRecordId:a.item.id||""};a.item&&a.item.customer&&(b.customerId=a.item.customer.id,b.customerName=a.item.customer.name);this.tipTodo=new B(b)}}));a.show();App.bdstatEvent("\u5ba2\u6237\u5217\u8868-\u65b0\u589e\u8ddf\u8fdb\u8bb0\u5f55")},onFollow:function(a){var b=this,c=a.currentTarget.getAttribute("customerId"),e=a.currentTarget.parentNode;App.showLoading();b.ajaxGet({url:"customer/follow?customerId\x3d"+c+"\x26isFollow\x3dtrue",success:function(a){e.innerHTML=
"";a=h.toDom('\x3cdiv class\x3d"customerfollow" customerId\x3d"'+c+'"\x3e\x3cdiv class\x3d"heart2"\x3e\x3c/div\x3e\x3c/div\x3e');var f=k.hitch(b,b.onCancleFollow);d(a,"click",f);e.appendChild(a);App.hideLoading();-1!=b.lastParams.queryValue.indexOf('followed":["unfollow"]')&&b.listStore.remove(c)}})},onCancleFollow:function(a,b){var c=this,e=a.currentTarget.getAttribute("customerId"),f=a.currentTarget.parentNode;App.showLoading();c.ajaxGet({url:"customer/follow?customerId\x3d"+e+"\x26isFollow\x3dfalse",
success:function(a){f.innerHTML="";a=h.toDom('\x3cdiv class\x3d"customerfollow" customerId\x3d"'+e+'"\x3e\x3cdiv class\x3d"heart1"\x3e\x3c/div\x3e\x3c/div\x3e');var b=k.hitch(c,c.onFollow);d(a,"click",b);f.appendChild(a);App.hideLoading();-1!=c.lastParams.queryValue.indexOf('"followed":["followed"]')&&c.listStore.remove(e)}})},onShowContact:function(a){var b=this,c=b.listGridComp.row(a);b.contactTimer&&clearTimeout(b.contactTimer);var e=c.data.contacts;a=h.toDom('\x3cdiv style\x3d"line-height: 26px;font-size: 14px;color: #3d5678;"\x3e\x3c/div\x3e');
for(var f=0;f<e.length;++f)if(3>f){var g="\x3ctr\x3e\x3ctd style\x3d'font-size: 16px;'\x3e"+App.escapeQuote(App.trimHTML(e[f].name?e[f].name:""))+"\x3c/td\x3e\x3c/tr\x3e",k=e[f].position?"\x3ctr\x3e\x3ctd\x3e\u804c\u52a1\uff1a"+App.escapeQuote(App.trimHTML(e[f].position))+"\x3c/td\x3e\x3c/tr\x3e":"",l=e[f].mobile?"\x3ctr\x3e\x3ctd\x3e\u7535\u8bdd\uff1a"+App.trimHTML(e[f].mobile)+"\x3c/td\x3e\x3c/tr\x3e":"",p=e[f].email?"\x3ctr\x3e\x3ctd\x3e\u90ae\u7bb1\uff1a"+App.trimHTML(e[f].email)+"\x3c/td\x3e\x3c/tr\x3e":
"",g=['\x3ctable style\x3d"width: 200px;overflow: hidden;white-space: nowrap;'+(1==f%2?"background-color: #ebebeb;":"")+'"\x3e',g,k,l,p,"\x3c/table\x3e"].join(""),g=h.toDom(g);a.appendChild(g)}else{e=h.toDom('\x3cdiv style\x3d"cursor: pointer;"\x3e...\x3c/div\x3e');a.appendChild(e);d(e,"click",function(a){b.contactTip&&(n.close(),b.contactTip.destroy());router.go("customer_detail/init/"+c.data.id);App.bdstatEvent("\u5ba2\u6237\u5217\u8868-\u67e5\u770b\u5ba2\u6237\u8be6\u60c5")});break}e=$("#customercontact_"+
c.data.id)[0].childNodes[0];b.contactTip?b.contactTip.set("content",a):b.contactTip=new m({content:a,baseClass:"cont-card",onMouseLeave:function(){b.onHideContact()},onBlur:function(){b.onHideContact()},onMouseEnter:function(){b.contactTimer&&clearTimeout(b.contactTimer)}});n.open({popup:b.contactTip,around:e})},onHideContact:function(){this.contactTimer=setTimeout(function(){n.close()},200)},onShowWorkRecord:function(a){var b=this,c=b.listGridComp.row(a);b.workRecordTimer&&clearTimeout(b.workRecordTimer);
a='\x3cdiv style\x3d"line-height: 20px;width: 350px;word-break: break-all;word-wrap:break-word;color: #3d5678;"\x3e'+App.escapeQuote(App.trimHTML(c.data.lastRecord.content))+"\x3c/div\x3e";c=$("#customerlastworkrecord_"+c.data.id)[0];b.workRecordTip?b.workRecordTip.set("content",a):b.workRecordTip=new m({content:a,baseClass:"cont-card",onMouseLeave:function(){b.onHideWorkRecord()},onBlur:function(){b.onHideWorkRecord()},onMouseEnter:function(){b.workRecordTimer&&clearTimeout(b.workRecordTimer)}});
n.open({popup:b.workRecordTip,around:c})},onHideWorkRecord:function(){this.workRecordTimer=setTimeout(function(){n.close()},200)}})});
