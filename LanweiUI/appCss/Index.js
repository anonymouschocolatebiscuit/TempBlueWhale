/*


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20140901
*/
require({cache:{"app/util/_WidgetBase":function(){define(["dojo/_base/declare","dijit/_WidgetBase","app/util/_WidgetMixin","dijit/_TemplatedMixin","dojo/Evented"],function(l,c,h,d,b){return l("app/util/_WidgetBase",[c,h,d,b],{templateString:"\x3cdiv\x3e\x3c/div\x3e"})})},"app/util/_WidgetMixin":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/dom-class","chanjet/widget/Dialog"],function(l,c,h,d){return l("app/util/_WidgetMixin",null,{init:function(){},hideDom:function(b){c.set(b,"display",
"none")},showDom:function(b){c.set(b,"display","block")},getStyle:function(b,d){return c.get(b,d)},setStyle:function(b,d,h){c.set(b,d,h)},containsClass:function(b,c){h.contains(b,c)},addClass:function(b,c){h.add(b,c)},removeClass:function(b,c){h.remove(b,c)},_buildXhr:function(b){var c="business/"+App.apiVersion+"/"+b.url;b.params=b.data;b.url=c;return b},ajaxGet:function(b){xhr.get(this._buildXhr(b))},ajaxPost:function(b){xhr.post(this._buildXhr(b))},ajaxPut:function(b){xhr.put(this._buildXhr(b))},
ajaxDelete:function(b){xhr.del(this._buildXhr(b))},alert:function(b){var c={bottomButtons:[{label:"\u786e\u8ba4",sTag:"ok",baseClass:"blueButton"}],title:"\u63d0\u793a",content:"",autoDestroy:!0,buttonClick:function(c,d,a){b.callback&&b.callback();this.destroy()}};b.title&&(c.title=b.title);b.content&&(c.content=b.content);b.showInfoIcon&&(c.showInfoIcon=b.showInfoIcon);(new d(c)).show()},confirm:function(b){var c={title:"\u6d88\u606f",content:"",autoDestroy:!0,buttonClick:function(c,d,a){"ok"==a&&
b.callback&&b.callback();this.destroy()}};b.title&&(c.title=b.title);b.content&&(c.content=b.content);(new d(c)).show()}})})},"app/vm/WorkList":function(){define("dojo/_base/declare dojo/_base/lang dojo/date/locale dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./tpl/workList.html dojo/on chanjet/util/JsonStore chanjet/widget/DataView".split(" "),function(l,c,h,d,b,u,n,q,a){return l("app/vm/WorkList",[d,b],{"class":"customerList",templateString:u,_colorIndex:0,_totalColorCount:5,_lastDate:0,postCreate:function(){this.isIE=
dojo.isIE;this.createList();this._bindEvents()},createList:function(){var b=URL.workListIndex,t=this.type,m=this;"customer"==t?b=URL.workListForCustomer+"/"+this.customerId:"work"==t&&(b=URL.workListSearch);b=this.store=new q({url:b,loadModel:"hasMore",pageSize:10});b.on("datachanged",c.hitch(this,function(a){var t=a.data.items;if("load"==a.tag){a=0;for(var b=t.length;a<b;a++)this._colorIndex=++this._colorIndex%this._totalColorCount,t[a].labelcolor=this._colorIndex,this._lastDate=t[a].createdDate}}));
new a({templateString:'\x3cdiv\x3e\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"clearfix"\x3e\x3c/ul\x3e\x3c/div\x3e',store:b,itemParams:{type:this.type,store:this.store},onAfterRender:function(){var a=m.isIE,t=this;a&&9>a&&setTimeout(function(){t.domNode.style.filter="alpha(opacity\x3d99)"},200)},itemClass:this.itemClass},this.dvNode)},_bindEvents:function(){this.own()}})})},"chanjet/util/JsonStore":function(){define("dojo/_base/declare dojo/_base/lang dojo/store/Memory chanjet/util/Ajax dojo/Evented dojo/store/Observable dojo/_base/array dojo/Deferred dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine".split(" "),
function(l,c,h,d,b,u,n,q,a,k){return l("chanjet.util.JsonStore",[b],{url:"",loadModel:"Pagination",autoLoad:!1,root:"",method:"GET",pageSize:0,pageNo:1,_totalCount:0,loadMoreKey:"id",loadMoreParamKey:"id",hasMore:!1,queryEngine:k,constructor:function(a){this.proxys={};this.ajax=d;window.xhr&&(this.ajax=xhr);this.data=[];this.baseParams={};this.models=[];this._params={};this.deferred=new q;for(key in a)this[key]=a[key];this.root&&(this.root="items");this.idProperty=this.id||"id";this.url&&this.autoLoad?
(a=(new Date).getTime(),this.proxys[a]=this._execute({series:a})):a&&a.data&&this.setData(this.data||[]);c.mixin(this,u(this))},_execute:function(a,b){a=a||{};var g=a.params||{},r=this,d=this.baseParams;this.pageSize&&(this.pageNo=d.pageno=g.pageno||this.pageNo,d.pagesize=this.pageSize);var k=this.sortInfo=g.sortInfo||this.sortInfo;if(k){for(var q=[],x=0,s=k.length;x<s;x++){var v=k[x],z="",z="DESC"==v.direction?"-"+v.field:"+"+v.field;q.push(z)}d.sortinfo="["+q.join(",")+"]"}delete g.sortInfo;d=c.clone(d);
c.mixin(d,g);this.emit("beforeload",d);var g=this._proxy(this.method,d),I=a.callback,E=a.beforeSetData,h=a.callback||function(a){console.error(a)};g.then(function(v){r.proxys[a.series]=null;"loadMore"==r.loadModel&&v.hasOwnProperty("hasMore")&&(r.hasMore=v.hasMore);v={data:v,tag:"load"};b&&(v.loadMore=!0);r.emit("datachanged",v);v=v.data;E&&E(v,!0);r.setData(v||[],b);r.emit("datachanged",{data:v,tag:"loaded"});I&&I(v,!0)},function(a){h&&h(a,!1)});return g},add:function(a,b){var c=this;if("function"==
typeof a)a(function(a){c.add(a);return a});else return this.data.push(a),this.emit("datachanged",{data:a,tag:"add"}),a},remove:function(a){var b=this;if("function"==typeof a)a(function(a){b.remove(a)});else{for(var c=this.data,r=[],d=0,k=c.length;d<k;d++)if(c[d][this.idProperty]==a){r=this.data.splice(d,1);break}this.emit("datachanged",{data:a,tag:"remove",record:r[0]})}},removeAll:function(){this.data=[];this.emit("datachanged",{data:[],tag:"clear"});return this},update:function(a,b,g){var r=this;
if("function"==typeof b)b(function(b){r.update(a,b)});else{var d=this.getById(a);d&&(c.mixin(d,b),g||this.emit("datachanged",{data:d,tag:"update",minData:b}))}},insert:function(a,b){var c=this;if("function"==typeof b)b(function(b){c.insert(a,b)});else return this.data.splice(a,0,b),this.emit("datachanged",{data:b,tag:"add",index:a,beforeData:this.data[a+1]}),b},getTotalCount:function(){return this._totalCount},_load:function(a,b){var c=(new Date).getTime();a.series=c;this.proxys[c]=this._execute(a,
b)},load:function(a,b){a=a||{};this._params=a.params||{};"Pagination"==this.loadModel?this._load(a):this._load(a,!0)},loadData:function(a,b){b?(this.data=this.data.concat(a),this.emit("append",{data:a})):this.data=a},addParams:function(a){c.mixin(this.baseParams,a)},getPage:function(a,b){b=this._addLastParams(b);1E7<a&&(a=1E7);this.pageNo=a;this.load(b)},nextPage:function(a){a=this._addLastParams(a);var b=Math.ceil(this._totalCount/this.pageSize);this.pageNo<b&&(this.pageNo+=1,this.load(a))},prePage:function(a){a=
this._addLastParams(a);1<this.pageNo&&(this.pageNo-=1,this.load(a))},loadMore:function(a){a=this._addLastParams(a);var b=this.loadMoreKey;this.pageNo+=1;a=a||{};var c=a.params||{},r=this.getLast()||{};c[this.loadMoreParamKey]=r[b]||-1;a.params=c;this.load(a,!0)},_addLastParams:function(a){a=a||{};a.params=a.parmas||{};var b=c.clone(this._params);delete b.pageno;delete b.pagesize;b=c.mixin(b,a.params);a.params=b;return a},each:function(a){return n.forEach(this.data,a)},indexOf:function(a){return this.indexOfId(a[this.idProperty])},
indexOfId:function(a){for(var b=this.data,c=0,r=b.length;c<r;c++)if(b[c][this.idProperty]==a)return c;return-1},getCount:function(){return this.data.length},getLast:function(){return this.data[this.getCount()-1]},find:function(a){var b=[],c=[],r;for(r in a)b.push({key:r,value:a[r]});a=b.length;r=this.data;for(var d=0,k=r.length;d<k;d++){var q=r[d];flag=!0;for(var x=0;x<a;x++){var s=b[x],v=s.value;flag="object"==typeof v&&"function"==typeof v.test&&"function"==typeof v.compile?flag&&v.test(q[s.key]):
flag&&q[s.key]==v}flag&&c.push(q)}return c},filter:function(a){this.data=this.find(a);this.setData(this.data);this.emit("datachanged",{data:this.data,tag:"filter"})},setDataSource:function(a){this.setData(a);this.emit("datachanged",{data:this.data,tag:"reset"})},setData:function(a,b){var c=this.root,r=c.split("."),d=r.length,k=d,q=null;if(1<d)for(q=a||{};k;)q=q[r[d-k]]||{},k-=1;else if(q=a[c])a.items=q;q&&(a.items=q);a.items&&(a=a.items);this.data=b?this.data.concat(a):a;this.emit("datachanged",{data:a,
tag:"setData"})},getById:function(a){var b=this.idProperty,c=null;n.some(this.data,function(r){return r[b]==a?(c=r,!0):!1});return c},get:function(a){return this.getById(a)},getIdentity:function(a){return a[this.idProperty]},_getRecord:function(a){return new Record(a,{store:this})},query:function(b,c){return a(this.queryEngine(b,c)(this.data))},_proxy:function(a,b){var c=this,r=this.ajax,d={};"GET"==a?d=r.getJson(this.url,b):"POST"==a&&(d=r.post({params:b,url:this.url}));d.then(function(a){c.__data=
a;a=a.total;"undefined"!=a&&(c._totalCount=a)},function(a){a=a.message;c.emit("error",{status:a.substring(a.length-3),message:a})});return d},destroy:function(){this.cancel()},cancel:function(){var a=this.proxys,b;for(b in a){var c=a[b];c&&c.cancel&&a[b].cancel()}}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(l,c,h){return l("dojo.store.Memory",null,{constructor:function(c){for(var b in c)this[b]=c[b];this.setData(this.data||
[])},data:null,idProperty:"id",index:null,queryEngine:h,get:function(c){return this.data[this.index[c]]},getIdentity:function(c){return c[this.idProperty]},put:function(c,b){var h=this.data,n=this.index,q=this.idProperty,q=c[q]=b&&"id"in b?b.id:q in c?c[q]:Math.random();if(q in n){if(b&&!1===b.overwrite)throw Error("Object already exists");h[n[q]]=c}else n[q]=h.push(c)-1;return q},add:function(c,b){(b=b||{}).overwrite=!1;return this.put(c,b)},remove:function(c){var b=this.index,h=this.data;if(c in
b)return h.splice(b[c],1),this.setData(h),!0},query:function(d,b){return c(this.queryEngine(d,b)(this.data))},setData:function(c){c.items?(this.idProperty=c.identifier,c=this.data=c.items):this.data=c;this.index={};for(var b=0,h=c.length;b<h;b++)this.index[c[b][this.idProperty]]=b}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(l,c,h){var d=function(b){function u(c){b[c]||(b[c]=function(){var q=arguments;return h(b,function(a){Array.prototype.unshift.call(q,
a);return d(l[c].apply(l,q))})})}if(!b)return b;b.then&&(b=c.delegate(b));u("forEach");u("filter");u("map");b.total||(b.total=h(b,function(b){return b.length}));return b};c.setObject("dojo.store.util.QueryResults",d);return d})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(l){return function(c,h){function d(b){b=l.filter(b,c);var d=h&&h.sort;d&&b.sort("function"==typeof d?d:function(a,b){for(var c,m=0;c=d[m];m++){var g=a[c.attribute],r=b[c.attribute];if(g!=
r)return!!c.descending==(null==g||g>r)?-1:1}return 0});if(h&&(h.start||h.count)){var q=b.length;b=b.slice(h.start||0,(h.start||0)+(h.count||Infinity));b.total=q}return b}switch(typeof c){default:throw Error("Can not query with a "+typeof c);case "object":case "undefined":var b=c;c=function(c){for(var d in b){var q=b[d];if(q&&q.test){if(!q.test(c[d],c))return!1}else if(q!=c[d])return!1}return!0};break;case "string":if(!this[c])throw Error("No filter function "+c+" was found in store");c=this[c];case "function":}d.matches=
c;return d}})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(l,c,h,d){l=function(b){function u(a,c){var d=b[a];d&&(b[a]=function(a){if(k)return d.apply(this,arguments);k=!0;try{var b=d.apply(this,arguments);h(b,function(b){c("object"==typeof b&&b||a)});return b}finally{k=!1}})}var n=[],q=0;b=c.delegate(b);b.notify=function(a,b){q++;for(var c=n.slice(),r=0,d=c.length;r<d;r++)c[r](a,b)};var a=b.query;b.query=function(k,m){m=m||{};var g=
a.apply(this,arguments);if(g&&g.forEach){var r=c.mixin({},m);delete r.start;delete r.count;var y=b.queryEngine&&b.queryEngine(k,r),u=q,l=[],x;g.observe=function(a,v){1==l.push(a)&&n.push(x=function(a,z){h(g,function(c){var s=c.length!=m.count,r,k;if(++u!=q)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var g,t=-1,x=-1;if(void 0!==z){r=0;for(k=c.length;r<k;r++){var h=c[r];if(b.getIdentity(h)==z){g=h;t=r;(y||!a)&&c.splice(r,1);break}}}if(y){if(a&&(y.matches?
y.matches(a):y([a]).length))r=-1<t?t:c.length,c.splice(r,0,a),x=d.indexOf(y(c),a),c.splice(r,1),m.start&&0==x||!s&&x==c.length?x=-1:c.splice(x,0,a)}else a&&(void 0!==z?x=t:m.start||(x=b.defaultIndex||0,c.splice(x,0,a)));if((-1<t||-1<x)&&(v||!y||t!=x)){s=l.slice();for(r=0;c=s[r];r++)c(a||g,t,x)}})});var z={};z.remove=z.cancel=function(){var v=d.indexOf(l,a);-1<v&&(l.splice(v,1),l.length||n.splice(d.indexOf(n,x),1))};return z}}return g};var k;u("put",function(a){b.notify(a,b.getIdentity(a))});u("add",
function(a){b.notify(a)});u("remove",function(a){b.notify(void 0,a)});return b};c.setObject("dojo.store.Observable",l);return l})},"chanjet/widget/DataView":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/_base/lang dojo/_base/kernel dojo/_base/array chanjet/util/query dojo/dom-construct dojo/window dojox/dtl/Context dojox/dtl".split(" "),function(l,c,h,d,b,u,n,q,a,k,t,m){a=l("chanjet.widget.DataView",[c,h],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\x3c/div\x3e',
contextNode:"containerNode",baseClass:"dataview",bufferPx:10,itemClass:null,loadMoreModel:"scroll",pixelsFromNavToBottom:30,postMixInProperties:function(){this._itemCache={};this.state={isDuringAjax:!1,hasMore:!0};this.itemString&&(this.itemTpl=new m.Template(this.itemString))},postCreate:function(){var a=this.loadingNode=u.toDom(""+('\x3cdiv class\x3d"x-loading" style\x3d"visibility: hidden;"\x3e\x3cdiv class\x3d"icon-con"\x3e\x3cimg class\x3d"loading-icon" src\x3d"'+App.imagePath+'loading2.gif" alt\x3d"Loading..."\x3e\x3c/div\x3e\x3cdiv class\x3d"loading-text"\x3e\u6b63\u5728\u52a0\u8f7d...\x3c/div\x3e\x3c/div\x3e'));
this.domNode.appendChild(a);this.bindEvents()},bindEvents:function(){var a=this.store,c=this;a.on("datachanged",b.hitch(this,this._storeChange));a.on("beforeload",function(){c.state.hasMore&&(c._showLoading(),setTimeout(function(){try{c._hideLoading(!0)}catch(a){}},12E4))});"scroll"==this.loadMoreModel&&"hasMore"==this.store.loadModel&&this.own(d(window,"scroll",b.hitch(this,this._onScroll)))},_onScroll:function(){this.scrollTimeout&&clearTimeout(this.scrollTimeout);var a=this;this.scrollTimeout=
setTimeout(function(){a._scroll()},100)},_scroll:function(){var a=this.state;!a.isDuringAjax&&a.hasMore&&this._nearbottom()&&this.retrieve()},retrieve:function(){var a=this.state;a.isDuringAjax=!0;this.store.loadMore({callback:function(b,c){a.hasMore=b.hasMore;a.isDuringAjax=!1}})},_nearbottom:function(){var a=k.getBox(document);return a.h+a.t>this._getDocHeight()-50?!0:!1},_storeChange:function(a){var b=a.data,c=a.tag;"load"==c?this.state.hasMore=b.hasMore:"setData"===c?(this.renderArray(b),this._hideLoading(!0)):
"add"==c?this._addItem(b,a.index):"remove"==c?this._removeItem(b,a.record):"clear"==c&&this.clear()},renderArray:function(a){var b=document.createDocumentFragment();"hasMore"!=this.store.loadModel&&(this._itemCache={});var c=this[this.contextNode],d=!0;9>u.isIE?n.forEach(a,function(a){this.onBeforeInsert(c,a);var b=this._createItem(a).domNode;u.addClass(b,"dataview-item");u.addClass(b,d?"dataview-item-odd":"dataview-item-even");d=!d;c.appendChild(b);this.onAfterInsert(c,a,b)},this):(n.forEach(a,function(a){this.onBeforeInsert(b,
a);var c=this._createItem(a).domNode;u.addClass(c,"dataview-item");u.addClass(c,d?"dataview-item-odd":"dataview-item-even");d=!d;b.appendChild(c);this.onAfterInsert(b,a,c)},this),c.appendChild(b));this.onAfterRender()},onAfterRender:function(){},onBeforeInsert:function(a,b){},onAfterInsert:function(a,b,c){},_createItem:function(a){var c=null;this.itemClass?(c={model:a},b.mixin(c,this.itemParams||{}),this._itemCache[a.id]=c=new this.itemClass(c)):(c="",c=this.prePareItem?this.prePareItem(a):this.itemTpl.render(new t(this.prepareData?
this.prepareData(a):a)),c={templateString:c,data:a,_onClicked:this.onClick},b.mixin(c,this.itemParams||{}),this._itemCache[a.id]=c=new g(c));return c},_removeItem:function(a){(a=this._itemCache[a])&&a.destroy()},_addItem:function(a,b){var c=this._createItem(a).domNode;u.addClass(c,"dataview-item");u.place(c,this[this.contextNode],0===b?"first":"last")},clear:function(){var a=this._itemCache,b;for(b in a){var c=a[b];c&&c.destroy()}this._itemCache={};this.onClear()},onClear:function(){},_getDocHeight:function(){var a=
document;return Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)},_hideLoading:function(a){var b=q(this.loadingNode);b.hide("visibility");a||b.hide()},_showLoading:function(){q(this.loadingNode).show("visibility")},onClick:function(a,b,c){}});var g=l("chanjet.widget.DataViewItem",[c,h],{templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){var a=this;this.own(d(this.domNode,"click",
function(b){a._onClicked(this,a.data,b)},this))},_onClicked:function(a,b,c){}});return a})},"dojox/dtl/Context":function(){define(["dojo/_base/lang","./_base"],function(l,c){return c.Context=l.extend(function(h){this._this={};c._Context.call(this,h)},c._Context.prototype,{getKeys:function(){var c=[],d;for(d in this)this.hasOwnProperty(d)&&"_this"!=d&&c.push(d);return c},extend:function(c){return l.delegate(this,c)},filter:function(h){var d=new c.Context,b=[],u,n;if(h instanceof c.Context)b=h.getKeys();
else if("object"==typeof h)for(var q in h)b.push(q);else for(u=0;n=arguments[u];u++)"string"==typeof n&&b.push(n);u=0;for(q;q=b[u];u++)d[q]=this[q];return d},setThis:function(c){this._this=c},getThis:function(){return this._this},hasKey:function(c){return this._getter&&"undefined"!=typeof this._getter(c)||"undefined"!=typeof this[c]?!0:!1}})})},"dojox/dtl/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojox/string/tokenize dojo/_base/json dojo/dom dojo/_base/xhr dojox/string/Builder dojo/_base/Deferred".split(" "),
function(l,c,h,d,b,u,n,q){l.experimental("dojox.dtl");var a=c.getObject("dojox.dtl",!0);a._base={};a.TOKEN_BLOCK=-1;a.TOKEN_VAR=-2;a.TOKEN_COMMENT=-3;a.TOKEN_TEXT=3;a._Context=c.extend(function(a){a&&(c._mixin(this,a),a.get&&(this._getter=a.get,delete this.get))},{push:function(){var a=this,b=c.delegate(this);b.pop=function(){return a};return b},pop:function(){throw Error("pop() called on empty Context");},get:function(a,b){var c=this._normalize;if(this._getter){var s=this._getter(a);if(void 0!==
s)return c(s)}return void 0!==this[a]?c(this[a]):b},_normalize:function(a){a instanceof Date&&(a.year=a.getFullYear(),a.month=a.getMonth()+1,a.day=a.getDate(),a.date=a.year+"-"+("0"+a.month).slice(-2)+"-"+("0"+a.day).slice(-2),a.hour=a.getHours(),a.minute=a.getMinutes(),a.second=a.getSeconds(),a.microsecond=a.getMilliseconds());return a},update:function(a){var b=this.push();a&&c._mixin(this,a);return b}});var k=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g,t=/\s+/g,m=function(a,
b){a=a||t;a instanceof RegExp||(a=RegExp(a,"g"));if(!a.global)throw Error("You must use a globally flagged RegExp with split "+a);a.exec("");for(var c,s=[],d=0,k=0;(c=a.exec(this))&&!(s.push(this.slice(d,a.lastIndex-c[0].length)),d=a.lastIndex,b&&++k>b-1););s.push(this.slice(d));return s};a.Token=function(a,b){this.token_type=a;this.contents=new String(c.trim(b));this.contents.split=m;this.split=function(){return String.prototype.split.apply(this.contents,arguments)}};a.Token.prototype.split_contents=
function(a){var b,c=[],s=0;for(a=a||999;s++<a&&(b=k.exec(this.contents));)b=b[0],'"'==b.charAt(0)&&'"'==b.slice(-1)?c.push('"'+b.slice(1,-1).replace('\\"','"').replace("\\\\","\\")+'"'):"'"==b.charAt(0)&&"'"==b.slice(-1)?c.push("'"+b.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'"):c.push(b);return c};var g=a.text={_get:function(v,b,s){v=a.register.get(v,b.toLowerCase(),s);if(!v){if(!s)throw Error("No tag found for "+b);return null}s=v[1];v=v[2];-1!=s.indexOf(":")&&(s=s.split(":"),s=s.pop());
var d=v;/\./.test(v)&&(v=v.replace(/\./g,"/"));require([v],function(){});v=c.getObject(d);return v[s||b]||v[b+"_"]||v[s+"_"]},getTag:function(a,b){return g._get("tag",a,b)},getFilter:function(a,b){return g._get("filter",a,b)},getTemplate:function(b){return new a.Template(g.getTemplateString(b))},getTemplateString:function(a){return u._getText(a.toString())||""},_resolveLazy:function(b,c,s){return c?s?s.fromJson(u._getText(b))||{}:a.text.getTemplateString(b):u.get({handleAs:s?"json":"text",url:b})},
_resolveTemplateArg:function(a,b){if(g._isTemplate(a)){if(!b){var c=new q;c.callback(a);return c}return a}return g._resolveLazy(a,b)},_isTemplate:function(a){return void 0===a||"string"==typeof a&&(a.match(/^\s*[<{]/)||-1!=a.indexOf(" "))},_resolveContextArg:function(a,b){if(a.constructor==Object){if(!b){var c=new q;c.callback(a);return c}return a}return g._resolveLazy(a,b,!0)},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(a){return h(a,g._re,g._parseDelims)},_parseDelims:function(b,
s,d){if(b)return[a.TOKEN_VAR,b];if(s){b=c.trim(d).split(/\s+/g);for(s=0;d=b[s];s++)/\./.test(d)&&(d=d.replace(/\./g,"/")),require([d])}else return[a.TOKEN_BLOCK,d]}};a.Template=c.extend(function(b,c){var s=c?b:g._resolveTemplateArg(b,!0)||"",s=g.tokenize(s);this.nodelist=(new a._Parser(s)).parse()},{update:function(c,s){return g._resolveContextArg(s).addCallback(this,function(s){var z=this.render(new a._Context(s));c.forEach?c.forEach(function(a){a.innerHTML=z}):b.byId(c).innerHTML=z;return this})},
render:function(b,c){c=c||this.getBuffer();b=b||new a._Context({});return this.nodelist.render(b,c)+""},getBuffer:function(){return new n}});var r=/\{\{\s*(.+?)\s*\}\}/g;a.quickFilter=function(b){if(!b)return new a._NodeList;if(-1==b.indexOf("{%"))return new a._QuickNodeList(h(b,r,function(b){return new a._Filter(b)}))};a._QuickNodeList=c.extend(function(a){this.contents=a},{render:function(a,b){for(var c=0,s=this.contents.length;c<s;c++)b=this.contents[c].resolve?b.concat(this.contents[c].resolve(a)):
b.concat(this.contents[c]);return b},dummyRender:function(b){return this.render(b,a.Template.prototype.getBuffer()).toString()},clone:function(a){return this}});a._Filter=c.extend(function(a){if(!a)throw Error("Filter must be called with variable name");this.contents=a;var b=this._cache[a];b?(this.key=b[0],this.filters=b[1]):(this.filters=[],h(a,this._re,this._tokenize,this),this._cache[a]=[this.key,this.filters])},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,
_values:{"0":'"',1:'"',2:"",8:'"'},_args:{4:'"',5:'"',6:"",7:"'"},_tokenize:function(){for(var a,b,s=0,d=[];s<arguments.length;s++)d[s]=void 0!==arguments[s]&&"string"==typeof arguments[s]&&arguments[s];if(this.key){for(a in this._args)if(d[a]){b=arguments[a];"'"==this._args[a]?b=b.replace(/\\'/g,"'"):'"'==this._args[a]&&(b=b.replace(/\\"/g,'"'));b=[!this._args[a],b];break}a=g.getFilter(arguments[3]);if(!c.isFunction(a))throw Error(arguments[3]+" is not registered as a filter");this.filters.push([a,
b])}else for(a in this._values)if(d[a]){this.key=this._values[a]+arguments[a]+this._values[a];break}},getExpression:function(){return this.contents},resolve:function(a){if(void 0===this.key)return"";for(var b=this.resolvePath(this.key,a),c=0,s;s=this.filters[c];c++)b=s[1]?s[1][0]?s[0](b,this.resolvePath(s[1][1],a)):s[0](b,s[1][1]):s[0](b);return b},resolvePath:function(b,s){var d,k;d=b.charAt(0);k=b.slice(-1);if(isNaN(parseInt(d)))if('"'==d&&d==k)d=b.slice(1,-1);else{if("true"==b)return!0;if("false"==
b)return!1;if("null"==b||"None"==b)return null;k=b.split(".");d=s.get(k[0]);if(c.isFunction(d)){var r=s.getThis&&s.getThis();d=d.alters_data?"":r?d.call(r):""}for(r=1;r<k.length;r++){var g=k[r];if(d){var m=d;if(c.isObject(d)&&"items"==g&&void 0===d[g]){var g=[],t;for(t in d)g.push([t,d[t]]);d=g}else{if(d.get&&c.isFunction(d.get)&&d.get.safe)d=d.get(g);else if(void 0===d[g]){d=d[g];break}else d=d[g];c.isFunction(d)?d=d.alters_data?"":d.call(m):d instanceof Date&&(d=a._Context.prototype._normalize(d))}}else return""}}else d=
-1==b.indexOf(".")?parseInt(b):parseFloat(b);return d}});a._TextNode=a._Node=c.extend(function(a){this.contents=a},{set:function(a){this.contents=a;return this},render:function(a,b){return b.concat(this.contents)},isEmpty:function(){return!c.trim(this.contents)},clone:function(){return this}});a._NodeList=c.extend(function(a){this.contents=a||[];this.last=""},{push:function(a){this.contents.push(a);return this},concat:function(a){this.contents=this.contents.concat(a);return this},render:function(a,
b){for(var c=0;c<this.contents.length;c++)if(b=this.contents[c].render(a,b),!b)throw Error("Template must return buffer");return b},dummyRender:function(b){return this.render(b,a.Template.prototype.getBuffer()).toString()},unrender:function(a,b){return b},clone:function(){return this},rtrim:function(){for(;;)if(i=this.contents.length-1,this.contents[i]instanceof a._TextNode&&this.contents[i].isEmpty())this.contents.pop();else break;return this}});a._VarNode=c.extend(function(b){this.contents=new a._Filter(b)},
{render:function(b,c){var s=this.contents.resolve(b);s.safe||(s=a._base.escape(""+s));return c.concat(s)}});a._noOpNode=new function(){this.render=this.unrender=function(a,b){return b};this.clone=function(){return this}};a._Parser=c.extend(function(a){this.contents=a},{i:0,parse:function(b){var c={},s;b=b||[];for(var d=0;d<b.length;d++)c[b[d]]=!0;for(d=new a._NodeList;this.i<this.contents.length;)if(s=this.contents[this.i++],"string"==typeof s)d.push(new a._TextNode(s));else{var k=s[0];s=s[1];if(k==
a.TOKEN_VAR)d.push(new a._VarNode(s));else if(k==a.TOKEN_BLOCK){if(c[s])return--this.i,d;var r=s.split(/\s+/g);r.length&&(r=r[0],(r=g.getTag(r))&&d.push(r(this,new a.Token(k,s))))}}if(b.length)throw Error("Could not find closing tag(s): "+b.toString());this.contents.length=0;return d},next_token:function(){var b=this.contents[this.i++];return new a.Token(b[0],b[1])},delete_first_token:function(){this.i++},skip_past:function(b){for(;this.i<this.contents.length;){var c=this.contents[this.i++];if(c[0]==
a.TOKEN_BLOCK&&c[1]==b)return}throw Error("Unclosed tag found when looking for "+b);},create_variable_node:function(b){return new a._VarNode(b)},create_text_node:function(b){return new a._TextNode(b||"")},getTemplate:function(b){return new a.Template(b)}});a.register={_registry:{attributes:[],tags:[],filters:[]},get:function(b,c){for(var s=a.register._registry[b+"s"],d=0,k;k=s[d];d++)if("string"==typeof k[0]){if(k[0]==c)return k}else if(c.match(k[0]))return k},getAttributeTags:function(){for(var b=
[],s=a.register._registry.attributes,d=0,k;k=s[d];d++)if(3==k.length)b.push(k);else{var r=c.getObject(k[1]);r&&c.isFunction(r)&&(k.push(r),b.push(k))}return b},_any:function(b,s,d){for(var k in d)for(var r=0,g;g=d[k][r];r++){var m=g;c.isArray(g)&&(m=g[0],g=g[1]);if("string"==typeof m){if("attr:"==m.substr(0,5)){var t=g;"attr:"==t.substr(0,5)&&(t=t.slice(5));a.register._registry.attributes.push([t.toLowerCase(),s+"."+k+"."+t])}m=m.toLowerCase()}a.register._registry[b].push([m,g,s+"."+k])}},tags:function(b,
c){a.register._any("tags",b,c)},filters:function(b,c){a.register._any("filters",b,c)}};var y=/&/g,w=/</g,A=/>/g,x=/'/g,s=/"/g;a._base.escape=function(b){return a.mark_safe(b.replace(y,"\x26amp;").replace(w,"\x26lt;").replace(A,"\x26gt;").replace(s,"\x26quot;").replace(x,"\x26#39;"))};a._base.safe=function(a){"string"==typeof a&&(a=new String(a));"object"==typeof a&&(a.safe=!0);return a};a.mark_safe=a._base.safe;a.register.tags("dojox.dtl.tag",{date:["now"],logic:["if","for","ifequal","ifnotequal"],
loader:["extends","block","include","load","ssi"],misc:"comment debug filter firstof spaceless templatetag widthratio with".split(" "),loop:["cycle","ifchanged","regroup"]});a.register.filters("dojox.dtl.filter",{dates:["date","time","timesince","timeuntil"],htmlstrings:["linebreaks","linebreaksbr","removetags","striptags"],integers:["add","get_digit"],lists:"dictsort dictsortreversed first join length length_is random slice unordered_list".split(" "),logic:["default","default_if_none","divisibleby",
"yesno"],misc:["filesizeformat","pluralize","phone2numeric","pprint"],strings:"addslashes capfirst center cut fix_ampersands floatformat iriencode linenumbers ljust lower make_list rjust slugify stringformat title truncatewords truncatewords_html upper urlencode urlize urlizetrunc wordcount wordwrap".split(" ")});a.register.filters("dojox.dtl",{_base:["escape","safe"]});return a})},"dojox/string/tokenize":function(){define(["dojo/_base/lang","dojo/_base/sniff"],function(l,c){var h=l.getObject("dojox.string",
!0).tokenize;return h=function(d,b,h,n){var q=[],a,k;for(k=0;a=b.exec(d);){k=d.slice(k,b.lastIndex-a[0].length);k.length&&q.push(k);if(h){if(c("opera")){for(k=a.slice(0);k.length<a.length;)k.push(null);a=k}a=h.apply(n,a.slice(1).concat(q.length));"undefined"!=typeof a&&q.push(a)}k=b.lastIndex}k=d.slice(k);k.length&&q.push(k);return q}})},"dojox/string/Builder":function(){define(["dojo/_base/lang"],function(l){return l.getObject("string",!0,dojox).Builder=function(c){var h="";this.length=0;this.append=
function(c){if(1<arguments.length){var b="";switch(arguments.length){case 9:b=""+arguments[8]+b;case 8:b=""+arguments[7]+b;case 7:b=""+arguments[6]+b;case 6:b=""+arguments[5]+b;case 5:b=""+arguments[4]+b;case 4:b=""+arguments[3]+b;case 3:b=""+arguments[2]+b;case 2:h+=""+arguments[0]+arguments[1]+b;break;default:for(var u=0;u<arguments.length;)b+=arguments[u++];h+=b}}else h+=c;this.length=h.length;return this};this.concat=function(c){return this.append.apply(this,arguments)};this.appendArray=function(c){return this.append.apply(this,
c)};this.clear=function(){h="";this.length=0;return this};this.replace=function(c,b){h=h.replace(c,b);this.length=h.length;return this};this.remove=function(c,b){void 0===b&&(b=h.length);if(0==b)return this;h=h.substr(0,c)+h.substr(c+b);this.length=h.length;return this};this.insert=function(c,b){h=0==c?b+h:h.slice(0,c)+b+h.slice(c);this.length=h.length;return this};this.toString=function(){return h};c&&this.append(c)}})},"dojox/dtl":function(){define(["./dtl/_base"],function(l){return l})},"app/vm/WorkListItem":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./tpl/workListItem.html dojo/on dojo/json dojo/date/locale dojo/date dojo/_base/array dojo/_base/kernel dojo/mouse dojo/dom-attr require app/vm/CommentCompontent app/widget/audio/SMAudio app/vm/Preview app/widget/editor/source/textParse".split(" "),
function(l,c,h,d,b,u,n,q,a,k,t,m,g,r,y,w,A,x){return l("app/vm/WorkListItem",[h,d],{templateString:b,heatClass:"",previewImgs:null,heating:!1,canrun:!0,postMixInProperties:function(){this.nameClass=this.imgBoxClass="";this.previewImgs=[];this.imgPath=App.imagePath;var b=this.model,c=this.type;b.content=b.content||"";var d=b.owner,k=App.getAvatarWithSize(d.headPicture||App.avatar,"small"),r=b.status||{label:""},g=(b.customer||{name:""}).name,m="",t="",h="",u="";g&&(this.nameClass="worklist-name");
b.remindTime&&(t=q.format(new Date(b.remindTime),{selector:"date",datePattern:"yyyy-MM-dd HH:mm"}));if(b.todoWorks&&0<b.todoWorks.length){var n=b.todoWorks[0];n.planTime&&(u=q.format(new Date(n.planTime),{selector:"date",datePattern:"yyyy-MM-dd HH:mm"}));n.workContent&&(h=n.workContent)}var n=new Date(b.contactTime),l="",l=0==a.compare(n,new Date,"date")?"\u4eca\u5929  "+q.format(n,{selector:"date",datePattern:"HH:mm"}):q.format(n,{selector:"date",datePattern:"yyyy\u5e74M\u6708d\u65e5  HH:mm:ss"});
r.value&&(r.label="\x3cspan class\x3dcustomerTag\x3e"+r.label+"\x3c/span\x3e");"index"==c&&(this.heatClass="heart2");var y="";"customer"==c?(y="\x3cspan class\x3dtime\x3e"+this.dateFormat()+"\x3c/span\x3e",g=""):y="\x3cspan class\x3davatar\x3e\x3cimg src\x3d"+k+" onerror\x3dApp.nofind(this) /\x3e\x3c/span\x3e";30<App.strlen(g)&&(m=g,g=App.substr(g,30)+"...");this.uiModel={avatar:y,name:d.id==App.userId?"\u6211":d.name,date:l,week:"\u5468"+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[n.getDay()],
customerName:App.escapeQuote(g),fullCusName:m,content:b.content||"",status:r.label,remindTime:t?"\x3cdiv class\x3d'remindTime'\x3e\x3cspan class\x3d'remindGrayIcon'\x3e\x3c/span\x3e"+t+"\x3c/div\x3e":"",address:b.address?"\x3cdiv class\x3d'address'\x3e\x3cspan class\x3d'addrIcon'\x3e\x3c/span\x3e"+b.address+"\x3c/div\x3e":"",borderColor:this._getColor(b.labelcolor||0),workTodoTip:""!=h?"\x3cdiv class\x3d'todoTip'\x3e\u4e0b\u4e00\u6b65\u5f85\u529e\uff1a\x3c/div\x3e":"",workTodoRemindTime:u?"\x3cdiv class\x3d'todoTime'\x3e"+
u+"\x3c/div\x3e":"",workTodoContent:h?"\x3cdiv class\x3d'todoContent' title\x3d'"+h+"'\x3e"+h+"\x3c/div\x3e":""};b.createdBy.id==App.userId&&(this.isMaster=!0,this.uiModel.tipTime="");b.commentCount=b.commentCount||0;b=App.escape(b.content);b=x.parseAt(b);this.uiModel.content=b.replace(/[\r\n]/ig,"\x3cbr/\x3e")},postCreate:function(){this._renderAttachment(this.model.attachments||[]);this.imgNode.innerHTML=this.uiModel.pics;this._initComps();var a=this.model;a.customer&&!1===a.customerExits&&(t.addClass(this.customerNameNode,
"no-limit-name"),t.place('\x3cdiv class\x3d"no-limit"\x3e\u5df2\u65e0\u6743\u67e5\u770b\x3c/div\x3e',this.nameConNode));this._bindEvents();this.inherited(arguments)},destroy:function(){this.previewComps&&this.previewComps.destroy();this.inherited(arguments)},_renderAttachment:function(a){for(var b=a.length,c="",d=0;d<b;d++)-1!=k.indexOf(["image",""],a[d].category)?c+=this._renderPic(a[d]):"audio"==a[d].category&&this._renderMp3(a[d]);this.uiModel.pics=c},_renderPic:function(a){var b={};a.thumbUri?
(b.normal=b.small=a.thumbUri,b.oldData=!0):a.fileDir&&(a.fileType||(a.fileType=a.fileDir.split(".").pop()),b.small=a.fileDir+".small."+a.fileType,b.normal=a.fileDir);b||(b=App.avatar);var c=this.previewImgs.length;this.previewImgs.push({oldData:b.oldData,item:a,uri:b.normal,sizeInfo:{name:c,suffix:a.fileType}});return""+("\x3cspan class\x3dviewImage \x3e\x3cem class\x3dalinMid\x3e\x3c/em\x3e\x3cimg src\x3d"+b.small+' onerror\x3dApp.nofind(this,"mrImg.png")  _idx\x3d'+c+"\x3e\x3c/span\x3e")},_renderMp3:function(a){var b=
n.parse(a.extend||"{}");this.audio=new w({url:a.fileDir,imMode:!1,my:a.createdBy.id==App.user.userId,time:b.playtime,width:(100*(b.playtime/180)).toFixed(2)+"%",sid:a.id,relateToType:a.relateToType,relateToID:a.relateToID},this.audioNode)},_initComps:function(){this.commentCmp=new y({model:this.model,parent:this},this.commentNode)},_bindEvents:function(){var a=this;this.own(u(this.heatNode,"click",c.hitch(this,this._clickHeart)),u(this.editNode,"click",c.hitch(this,this._editHandler)),u(this.customerNameNode,
"click",c.hitch(this,this._jumpCustomerHandler)),u(this.imgNode,u.selector(".viewImage","click"),c.hitch(this,this._previewHandler)),u(this.commentBtn,"click",c.hitch(this,this._onCommentNodeClick)));var b=2>App.privilege||this.model.owner.id==App.user.userId||this.canEdit,d=this.domNode;this.own(u(d,m.enter,function(c){core.addClass(d,"itemHover");b&&(t.removeClass(a.closeNode,"hide"),t.removeClass(a.editNode,"hide"))}),u(this.domNode,m.leave,function(c){core.removeClass(d,"itemHover");b&&(t.addClass(a.closeNode,
"hide"),t.addClass(a.editNode,"hide"))}))},_onCommentNodeClick:function(a,b){this._toggleComment()},_toggleComment:function(a){var b=this;this.canrun&&(this.canrun=!1,this._flag?(this._flag=0,this._commentCollapse()):(this._flag=1,this._commentExpand(a)),setTimeout(function(){b.canrun=!0},250))},_commentExpand:function(){this.commentCmp.expand()},_commentCollapse:function(){this.commentCmp.collapse()},_clickHeart:function(){if(!this.heating){this.heating=!0;var a=!1,b=this,c=this.type,d=this.model,
k=this.store;"index"==c?t.replaceClass(this,"heart1","heart2"):"work"==c&&(t.hasClass(this,"heart1")?(a=!0,t.replaceClass(this,"heart2","heart1")):t.replaceClass(this,"heart1","heart2"));var r=a;xhr.get(URL.follow+"?customerId\x3d"+d.customer.id+"\x26isFollow\x3d"+a,function(a){"index"==c&&k.remove(d.id);this.heating=!1},function(a){a="heart2";var c="heart1";r&&(a="heart1",c="heart2");t.replaceClass(b,a,c);this.heating=!1})}},_editHandler:function(a){r(["app/vm/WorkrecordEditDialog"],c.hitch(this,
function(a){this._wrEditDialog=new a({item:this.model});this.own(u(this._wrEditDialog,"dataChange",c.hitch(this,this._dataSaveHandler)));this._wrEditDialog.show()}))},_jumpCustomerHandler:function(){var a="",a=this.model;if(a.customer){if(!1===a.customerExits)return;a=a.customer.id}else a=App.userId;router.go("customer_detail/init/"+a)},_previewHandler:function(a){this.previewComps=new A({from:"image",item:this.previewImgs,currentIndex:parseInt(g.get(a.target,"_idx"))});window.document.body.appendChild(this.previewComps.domNode)},
_toggleCommentHandler:function(){},_updateCommentCountHandler:function(a){this.commentNum.innerHTML=a.count},_dataSaveHandler:function(a){"modify"==a.action&&(this.store.update(a.item.id,a.item),this.contentContainer.innerHTML=a.item.content)},_onDel:function(a){var b=this;App.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bb0\u5f55\uff1f","\u63d0\u793a",{labels:"\u4e0d\u5220\u9664,\u5220\u9664",confirm:function(c,d){var k=a.target,r=b.store,g=b.model;$(k).hide();xhr.del(URL.workList+"/"+g.id,
function(a){App.tip("\u5220\u9664\u6210\u529f");r.remove(g.id);c.close()},function(a){setTimeout(function(){k.style.display=""},500);c.close()})}})},_getColor:function(a){return["#5fd0dd","#72c4f7","#c8abdb","#ff887c","#fcc04a"][a]},dateFormat:function(){var b=a.difference(new Date(this.model.createdDate),new Date,"day"),c="";0==b?c="\x3cspan class\x3dsingle\x3e\u4eca\x3c/span\x3e":1==b?c="\x3cspan class\x3dsingle\x3e\u6628\x3c/span\x3e":2==b?c="\x3cspan class\x3dsingle\x3e\u524d\x3c/span\x3e":7>
b?c="\x3cspan class\x3ddate\x3e"+(b-1)+"\x3c/span\x3e\x3cspan class\x3dstr\x3e\u5929\u524d\x3c/span\x3e":31>b?c="\x3cspan class\x3ddate\x3e"+Math.ceil(b/7)+"\x3c/span\x3e\x3cspan class\x3dstr\x3e\u5468\u524d\x3c/span\x3e":365>b?c="\x3cspan class\x3ddate\x3e"+Math.ceil(b/31)+"\x3c/span\x3e\x3cspan class\x3dstr\x3e\u6708\u524d\x3c/span\x3e":365<b&&(c="\x3cspan class\x3ddate\x3e1\x3c/span\x3e\x3cspan class\x3dstr\x3e\u5e74\u524d\x3c/span\x3e");return c}})})},"app/vm/CommentCompontent":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/fx dojo/fx dojo/dom-style app/widget/editor/index app/widget/editor/source/textParse dojo/on dojo/query dojo/mouse dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin app/util/_InputChangeMixin chanjet/scrollBar/ScrollBar chanjet/util/query dojo/text!./tpl/commentCompontent.html app/widget/audio/SMAudio dojo/json".split(" "),
function(l,c,h,d,b,u,n,q,a,k,t,m,g,r,y,w,A,x,s,v){return l("app/vm/CommentCompontent",[g,r,y],{templateString:x,maxLength:255,replyCommentId:0,replyText:"",lastCommentId:0,updatebefore:0,hasMore:!0,loadMoreLocked:!1,commentCount:50,timer:null,expanding:!1,collapsing:!1,showType:"common",postMixInProperties:function(){var a=this.model;this.notInWaterfall=!0;this.topicId=a.id;this.teamId=App.orgId;a.__from__="not_add";this.commentData=[];this.inherited(arguments)},postCreate:function(){this.$domNode=
A(this.domNode);this.editId=h.attr(this.replyNode,"id");this._notInWarterfallHandle();this._bindEvent();dojo.setStyle(this.commentArea,{position:"relative"})},_bindEvent:function(){var b=this,d=this.replyNode;this.own(a(d,"focus",c.hitch(this,this._onFocus)),a(d,"blur",c.hitch(this,this._onBlur)),a(d,this.keyType,c.hitch(this,this._inputHandler)),a(this.cancelNode,"click",c.hitch(this,this._onCancelClick)),a(this.commitNode,"click",c.hitch(this,this._onCommitClick)),a(this.listNode,"click",c.hitch(this,
this._onListClick)),a(this.listConNode,a.selector("[node-type\x3dreload]","click"),c.hitch(this,this.reloadComment)),a(this.listConNode,a.selector("[node-type\x3dexpand]","click"),c.hitch(this,this.expandComment)),a(d,"keyup",function(a){var c=a.keyCode;a.ctrlKey&&13===c&&!b.commitNode.disabled&&(b._onCommitClick(),b.replyNode.blur())}))},expandComment:function(a){this.expand();this.parent._flag=1;dojo.stopEvent(a)},_notInWarterfallHandle:function(){this.notInWaterfall&&(h.style(this.listNode,{maxHeight:"none"}),
h.addClass(this.commentArea,"comment_area"))},_onListClick:function(a){a=a.target;var b=A(a).closest("li"),c=b.attr("cid")[0],d=b.attr("uid")[0],b=b.attr("uname")[0];h.hasClass(a,"_replay")&&this.replayComment(c,b,d)},replayComment:function(a,b,c){this.replyCommentId=a;this.replyText=0===a?"":"\u56de\u590d "+App.escape(b)+"\uff1a";b=App.escape(this.replyText);n.setReplyUser(this.replyNode,'\x3ca href\x3d"javascript:void(0)" node-data\x3d"cid\x3d'+a+"\x26uid\x3d"+c+'" node-type\x3d"reply" default\x3d"'+
b+'" class\x3d"tw_hfName wk_colBlue" onselectstart\x3d"return false;" title\x3d"'+b+'"\x3e'+b+"\x3c/a\x3e\x26nbsp;");dojo.removeClass(this.replyNode,"tw_plBg");dojo.isFF&&this.replyNode.focus()},_positionToReplyText:function(){var a=dojo.query(this.replyNode).parents('[data-dojo-attach-point\x3d"topicContainer"]')[0];if(a){var b=dojo.position(this.replyNode),c=dojo.position(a);0<b.y+b.h-c.h-c.y?a.scrollTop+=Math.max(b.y-c.y-10,0):0>b.y-c.y&&(a.scrollTop=Math.max(a.scrollTop-(c.y-b.y)-10,0))}},_onCommitClick:function(){var a=
this,b=this.model;h.attr(this.replyNode,"id");var c=b.id,d={},s=this.replyNode.cloneNode(!0),v=k("a[node-type\x3dreply]",s),b=h.trim(s.innerText||s.textContent||"");if(v[0]){var r=dojo.queryToObject(v[0].getAttribute("node-data"));if(0!=r.cid&&(d.replyId=parseInt(r.cid),v.remove(),b=h.trim(s.innerText||s.textContent||""),""==b)){App.tips("\u56de\u590d\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a");return}}b.length>this.maxLength?(c=App.common.sliceByte(b,this.maxLength),App.common.tips("\u60a8\u8f93\u5165\u7684\u5b57\u6570\u8d85\u8fc7\u4e86"+
b.substr(c.length).length+"\u4e2a\u5b57")):(b=h.trim(n.getContent(s)),d.relateToID=c,d.relateToType="WorkRecord",d.content=b,d.commenttime=(new Date).getTime(),this._setSaveBtnStatus(!0),xhr.post(URL.comment,d,function(b){a._setEditorStatus(!0);a._onInputChange();dojo.setStyle(a.listConNode,{display:""});a.commentData.unshift(b);a._createList([b],a.listNode,"first",!0);a.freshState(1,"add");a.replyCommentId=0;a.replyText="";a.listScroll?(a.listScroll.resize(),a.listScroll.setScrollTop(0)):a.listConNode.scrollHeight>
a.listConNode.offsetHeight&&(a.listScroll=new w({dom:a.listConNode,className:"wk_reBg",autoSize:!0}))},function(b){a._setSaveBtnStatus()}))},_onCancelClick:function(){h.attr(this.replyNode,"id");h.addClass(this.operNode,"none");this.replyCommentId=0;this._setEditorStatus(!0);this._setSaveBtnStatus(!0);this._onInputChange()},_onFocus:function(a){this._freshStatus();this._setEditorStatus();h.removeClass(this.operNode,"none")},_onBlur:function(a){this.timer&&(window.clearInterval(this.timer),this.timer=
null);h.trim(this.replyNode.innerText||this.replyNode.textContent||"")||(this._setSaveBtnStatus(!0),this._setEditorStatus(!0))},_freshStatus:function(){var a=this;this.timer=window.setInterval(function(){if(a.replyNode){var b=h.trim(a.replyNode.innerText||a.replyNode.textContent||"");1==b.length&&160==b.charCodeAt(0)&&(b="");b?a.contentIsValid?a._setSaveBtnStatus(!1):a._setSaveBtnStatus(!0):a._setSaveBtnStatus(!0)}else window.clearInterval(a.timer),a.timer=null},100)},_setEditorStatus:function(a){a?
(this.replyNode.innerHTML="",dojo.addClass(this.replyNode,"tw_plBg")):dojo.removeClass(this.replyNode,"tw_plBg")},_setSaveBtnStatus:function(a){this.commitNode.disabled!=a&&(a?dojo.hasClass(this.commitNode,"tw_disableBt")||(this.commitNode.setAttribute("disabled","disabled"),dojo.addClass(this.commitNode,"tw_disableBt"),dojo.removeClass(this.commitNode,"tw_blueBt")):dojo.hasClass(this.commitNode,"tw_blueBt")||(dojo.addClass(this.commitNode,"tw_blueBt"),dojo.removeClass(this.commitNode,"tw_disableBt"),
this.commitNode.removeAttribute("disabled")))},expand:function(a,b,c){this.lastCommentId=this.updatebefore=0;this.hasMore=!0;this.loadMoreLocked=!1;this.listNode.innerHTML="";this.commentData=[];dojo.addClass(this.searchTip,"none");k("div[node-type\x3dexpand]",this.listConNode).remove();var d=this.replyNode;n.bind({editor:this.replyNode,parent:c?this.replayBox:null});this.firstCreateList(a,b);h.isChrome&&setTimeout(function(){d.focus();d.blur()},100)},firstCreateList:function(a,c){this.freshList(!0,
this.model.id,function(c){var d=this,s=d.domNode;u.set(this.listConNode,{display:0===c.length?"none":""});d.expanding||(d.expanding=!0,u.set(s,{height:0,display:"block"}),b.wipeIn({node:s,duration:150,onEnd:function(){d.expanding=!1;a&&d.replyNode.focus()}}).play())},function(){c&&(dojo.removeClass(this.replayBox,"noticeCommentFixed"),c.viewTopic||(this.replayComment(c.commentid,c.name,c.replyuid),this._positionToReplyText()))})},collapse:function(){var a=this;this.listScroll&&(this.listScroll.dom.scrollTop=
0);this.replyCommentId=0;this.collapsing||(this.collapsing=!0,d.animateProperty({node:a.domNode,duration:200,properties:{height:{start:a.domNode.offsetHeight,end:1}},onEnd:function(){u.set(a.domNode,"display","none");a.collapsing=!1}}).play(),this._setEditorStatus(!0),this._setSaveBtnStatus(!0))},setReloadNode:function(){var a=this.listConNode,b=this.reloadNode;b||(b=this.reloadNode=dojo.toDom('\x3ca href\x3d"#" node-type\x3d"reload" class\x3d"wk_jzLink"\x3e\u91cd\u65b0\u52a0\u8f7d\x3c/a\x3e'),a.appendChild(b));
dojo.setStyle(this.listConNode,{display:""});this.$domNode.show();this.listScroll&&this.listScroll.resize()},reloadComment:function(a){var b=a.target;b.parentNode.removeChild(b);this.reloadNode=null;this.firstCreateList();dojo.stopEvent(a)},freshList:function(a,b,c,d){var s=this;s.loadMoreLocked=!0;var v=s.lastReqTime=(new Date).getTime();xhr.get(URL.comment+"/listByWorkRecord/"+this.model.id,function(a){if(v===s.lastReqTime){a=a.items;var b=a.length;0===b?s.hasMore=!1:s.lastCommentId=a[b-1].id;s.commentData=
s.commentData.concat(a);c&&c.call(s,a);s._createList(a,s.listNode);s._addScrollBar();s.freshState(a);s.loadMoreLocked=!1;d&&"function"===typeof d&&d.call(s)}},function(b){a&&s.setReloadNode();s.loadMoreLocked=!1})},_addScrollBar:function(){!this.listScroll&&this.listConNode.scrollHeight>this.listConNode.offsetHeight&&(this.listScroll=new w({dom:this.listConNode,className:"wk_reBg",autoSize:!0}))},_getCommentCount:function(){},_createList:function(a,b,c,d){d||A(b).empty();var k="",r=this;m.forEach(a,
function(a){var g=a.createdBy,m=g.headPicture,t=g.id,g=App.escape(g.name),x=a.commentTime,z=q.parseAt(App.escape(a.content)),n='\x3ca class\x3d"fr wk_operLine _replay"\x3e\u56de\u590d\x3c/a\x3e';a.replyId&&(z='\u56de\u590d \x3ca href\x3d"#!app/type\x3dhome\x26uid\x3d'+a.replyId+'" class\x3d"wk_hfName wk_colBlue"\x3e'+(App.escape(a.replyerName)||"")+"\x3c/a\x3e\uff1a"+z);d||(r.updatebefore=x);"number"===typeof x&&(x=this.showDate(a.createtime));App.userId==t&&(n='\x3ca class\x3d"fr wk_operLine wk_borLeft _replay"\x3e\u56de\u590d\x3c/a\x3e');
k=['\x3cli class\x3d"clearfix" cid\x3d"'+a.id+'" uid\x3d"'+t+'" uname\x3d"'+g+'"\x3e','\x3ca href\x3d"#!app/type\x3dhome\x26uid\x3d'+t+'" class\x3d"fl wk_repHead wk_userinfo"\x3e\x3cimg src\x3d"'+m+'64.jpg" class\x3d"replayAvatar" onerror\x3d"App.nofind(this)"\x3e\x3c/a\x3e','\x3cdiv class\x3d"fl wk_repRight"\x3e\x3cp class\x3d"wk_reLine1 clearfix"\x3e','\x3ca href\x3d"#!app/type\x3dhome\x26uid\x3d'+t+'" class\x3d"fl wk_hfName"\x3e'+g+"\x3c/a\x3e",'\x3cspan class\x3d"wk_reTime fl"\x3e'+x+"\x3c/span\x3e",
n,"\x3c/p\x3e",'\x3cp class\x3d"clear wk_plTitle"\x3e'+z+"\x3c/p\x3e","\x3c/div\x3e\x3c/li\x3e"].join("");m=dojo.toDom(k);h.place(m,b,c?c:null);a.attachments&&0<a.attachments.length&&(a=a.attachments[0],t=v.parse(a.extend||"{}"),(new s({url:a.fileDir,imMode:!0,my:a.createdBy.id==App.user.userId,time:t.playtime,width:(100*(t.playtime/180)).toFixed(2)+"%",sid:a.id,relateToType:a.relateToType,relateToID:a.relateToID})).placeAt(A(m).query(".wk_plTitle")[0]))},this)},freshState:function(a,b){var c=this.parent.commentNum;
c.innerHTML=b?parseInt(c.innerHTML)+1:a.length},showDate:function(a,b){var c=this.getDateObj(a),d=c.getFullYear(),s=c.getMonth()+1,v=c.getDate(),k=c.getHours(),c=c.getMinutes(),r=this.getDateObj(!1),g=r.getMonth()+1;showDate="";return showDate=d==r.getFullYear()&&!b?s==g&&v==r.getDate()?this.fix2Length(k)+":"+this.fix2Length(c):this.fix2Length(s)+"-"+this.fix2Length(v)+" "+this.fix2Length(k)+":"+this.fix2Length(c):d+"-"+this.fix2Length(s)+"-"+this.fix2Length(v)+" "+this.fix2Length(k)+":"+this.fix2Length(c)},
getDateObj:function(a){return(a=parseInt(a))?new Date(a):new Date},fix2Length:function(a){a=a.toString();return 2>a.length?"0"+a:a},_onInputChange:function(){var a=h.trim(q.parseAtText(n.getContent(this.replyNode)));1==a.length&&160==a.charCodeAt(0)&&(a="");a=a.length;0==a||255<a?255<a?(A(this.tipNode).html('\u60a8\u5df2\u8d85\u51fa\u4e86\x3cspan class\x3d"notice-label-num notice-label-num-error"\x3e'+(a-255)+"\x3c/span\x3e\u5b57"),this.contentIsValid=!1,this.contentInValidMessage="\u5185\u5bb9\u5df2\u8d85\u8fc7255\u5b57\uff0c\u4e0d\u80fd\u4fdd\u5b58"):
(A(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e255\x3c/span\x3e\u5b57'),this.contentIsValid=!1,this.contentInValidMessage="\u8f93\u5165\u5de5\u4f5c\u8bb0\u5f55\u6b63\u6587\u540e\uff0c\u624d\u53ef\u4ee5\u4fdd\u5b58"):(A(this.tipNode).html('\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e'+(255-a)+"\x3c/span\x3e\u5b57"),this.contentIsValid=!0,this.contentInValidMessage="");this._setSaveBtnStatus(!this.contentIsValid)}})})},
"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(l,c,h,d,b,u,n,q,a,k,t){h.isAsync||k(0,function(){t(["./fx/Toggler"])});h=h.fx={};k={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var m=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=
a.duration;a.delay&&(this.duration+=a.delay)},this)};m.prototype=new c;l.extend(m,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=b.after(this._current,"onAnimate",l.hitch(this,"_onAnimate"),!0),this._onEndCtx=b.after(this._current,"onEnd",l.hitch(this,"_onEnd"),
!0),this._current.play(0,!0))},play:function(a,c){this._current||(this._current=this._animations[this._index=0]);if(!c&&"playing"==this._current.status())return this;var d=b.after(this._current,"beforeBegin",l.hitch(this,function(){this._fire("beforeBegin")}),!0),k=b.after(this._current,"onBegin",l.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),g=b.after(this._current,"onPlay",l.hitch(this,function(a){this._fire("onPlay",arguments);d.remove();k.remove();g.remove()}));this._onAnimateCtx&&
this._onAnimateCtx.remove();this._onAnimateCtx=b.after(this._current,"onAnimate",l.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=b.after(this._current,"onEnd",l.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=b.after(this._current,"onPause",l.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();
var c=this.duration*a;this._current=null;d.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var c=b.after(this._current,"onStop",l.hitch(this,function(a){this._fire("onStop",arguments);
c.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});l.extend(m,k);h.chain=function(a){return new m(a)};var g=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;d.forEach(a,function(a){var c=a.duration;a.delay&&(c+=a.delay);this.duration<c&&(this.duration=c);this._connects.push(b.after(a,
"onEnd",l.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new u.Animation({curve:[0,1],duration:this.duration});var c=this;d.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){c._connects.push(b.after(c._pseudoAnimation,a,function(){c._fire(a,arguments)},!0))})};l.extend(g,{_doAction:function(a,b){d.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,
b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",
arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){d.forEach(this._connects,function(a){a.remove()})}});l.extend(g,k);h.combine=function(a){return new g(a)};h.wipeIn=function(a){var c=a.node=n.byId(a.node),d=c.style,k;a=u.animateProperty(l.mixin({properties:{height:{start:function(){k=d.overflow;d.overflow="hidden";if("hidden"==d.visibility||"none"==d.display)return d.height="1px",d.display="",d.visibility="",1;var a=q.get(c,"height");return Math.max(a,
1)},end:function(){return c.scrollHeight}}}},a));var g=function(){d.height="auto";d.overflow=k};b.after(a,"onStop",g,!0);b.after(a,"onEnd",g,!0);return a};h.wipeOut=function(a){var c=(a.node=n.byId(a.node)).style,d;a=u.animateProperty(l.mixin({properties:{height:{end:1}}},a));b.after(a,"beforeBegin",function(){d=c.overflow;c.overflow="hidden";c.display=""},!0);var k=function(){c.overflow=d;c.height="auto";c.display="none"};b.after(a,"onStop",k,!0);b.after(a,"onEnd",k,!0);return a};h.slideTo=function(c){var d=
null,k=null,g=function(b){return function(){var c=q.getComputedStyle(b),v=c.position;d="absolute"==v?b.offsetTop:parseInt(c.top)||0;k="absolute"==v?b.offsetLeft:parseInt(c.left)||0;"absolute"!=v&&"relative"!=v&&(c=a.position(b,!0),d=c.y,k=c.x,b.style.position="absolute",b.style.top=d+"px",b.style.left=k+"px")}}(c.node=n.byId(c.node));g();c=u.animateProperty(l.mixin({properties:{top:c.top||0,left:c.left||0}},c));b.after(c,"beforeBegin",g,!0);return c};return h})},"app/widget/editor/index":function(){define("app/widget/editor/index",
["./source/editor","./source/face","./source/textParse"],function(l,c,h){return{_idIncrements:(new Date).getTime(),hasRegEditors:{},logOffEditor:function(c){for(var b in this.hasRegEditors)dojo.byId(b)||(c=this.hasRegEditors[b],c.editor.unbind(),delete this.hasRegEditors[b])},getContent:function(c){return h.getText(c)},bind:function(c){this.logOffEditor();var b=c.editor,h=c.teamid,n=c.faceBtn||null,q=c.notAt||!1,a=b.id;c=c.parent;if(a){if(a in this.hasRegEditors){this.hasRegEditors[a].teamid=h;this.hasRegEditors[a].editor.update(b,
h);return}}else b.id=a="editor_"+this._idIncrements++;b=new l(b,n,h,c,q);this.hasRegEditors[a]={teamid:h,editor:b}},unbind:function(c){var b;if(c=this.getEditorByNode(c))c.editor.unbind();else for(b in this.hasRegEditors)dojo.byId(b)||(c=this.hasRegEditors[b],c.editor.unbind())},getEditorByNode:function(c){return c&&c.id&&(c=c.id,c in this.hasRegEditors)?this.hasRegEditors[c]:null},setReplyUser:function(c,b){var h=this.getEditorByNode(c);h&&(c.innerHTML="",c.focus(),h.editor.insertHTML(b))},clear:function(c){}}})},
"app/widget/editor/source/editor":function(){define("app/widget/editor/source/editor","dojo/_base/declare dojo/on dojo/query dojo/_base/lang ./at ./face ./textParse dojo/Evented".split(" "),function(l,c,h,d,b,u,n,q){function a(a,b){if(b&&a){var c=dojo.position(b),d=a.y-c.y,k=b.scrollTop;d>c.h/2&&(b.scrollTop=k+d)}}function k(a,b){var c,d=0,k=0,g=!1;if(y){if(a.rangeCount&&(b=b.cloneRange(),b.getClientRects&&(c=b.getClientRects()[0])))d=c.left+c.width,k=c.top+c.height,g=!0}else d=b.boundingLeft+b.boundingWidth,
k=b.boundingTop+b.boundingHeight,g=!0;return!g?!1:{x:d,y:k}}var t=dojo.keys,m=dojo.isIE,g=dojo.isFF,r=-1!=navigator.userAgent.toLowerCase().search(/(msie\s|trident.*rv:)([\w.]+)/),y=!!window.getSelection&&!m;try{document.execCommand("MultipleSelection",!0,!0),document.execCommand("AutoUrlDetect",!1,!1)}catch(w){}var A=window.setTimeout;return l([q],{markNode:'\x3cb node-type\x3d"mark" style\x3d"visibility:hidden; width:1px;overflow:hidden"\x3ei\x3c/b\x3e',constructor:function(a,b,c,d,k){this._eventList=
[];this._oldRng=null;this.editor=a;this.teamid=c;this.faceBtn=b;this.parent=d||document.body;this.notAt=!!k;this.initEditor();this.bind();this.keyword=null},update:function(a,b){this.editor=a;this.teamid=b},getSelection:function(){return y?window.getSelection():document.selection},createRange:function(){},getRange:function(){try{return y?this.getSelection().getRangeAt(0):this.getSelection().createRange()}catch(a){return null}},regEvent:function(a,b,d){a=c(a,b,d);this._eventList.push(a)},cacheRange:function(){var a=
this;A(function(){a._oldRng=a.getRange()})},onMouseup:function(a){this.cacheRange()},onKeydown:function(a){a=a.keyCode;var b=this.getRange();switch(a){case t.DELETE:case t.BACKSPACE:m&&this.deleteAtUser(b,a==t.DELETE)}},onKeyup:function(a){var b=a.keyCode,c=this.getRange();if(!(a.ctrlKey&&86==b)){switch(b){case t.ENTER:case t.UP_ARROW:case t.DOWN_ARROW:this.cacheRange();return;case t.LEFT_ARROW:case t.RIGHT_ARROW:dojo.stopEvent(a);if(this.moveFocus(c,b==t.LEFT_ARROW,a)){this.cacheRange();return}break;
case t.DELETE:case t.BACKSPACE:m||this.deleteAtUser(c,b==t.DELETE);break;default:this.fixInsertInUser()}this.searchAt(c)}this.cacheRange()},checkInput:function(){var a=this;this.stopCheckInput();this.timer=window.setInterval(function(){var b=a.getRange();a.searchAt(b)},100)},stopCheckInput:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null)},onPaste:function(b){b=b?b:window.event;var c=(b.clipboardData||window.clipboardData).getData("text"),c=c.replace(/</ig,"\x26lt;"),c=c.replace(/\r\n|\n|\r/g,
"\x3cbr\x3e"),c=c.replace(/\s/ig,"\x26nbsp;");if(this.fixOnPasteInAt(c))this.cacheRange(),dojo.stopEvent(b);else{var d=this.getRange();this.insertHTML(c,d);var c=h("A[default]",this.editor),g;dojo.some(c,function(a,b){g=a.textContent||a.innerText;if(""==g)return a.parentNode.removeChild(a),!0})}dojo.stopEvent(b);!m&&!r&&((b=k(this.getSelection(),this.getRange()))||(b=this.getCursorPosByMarkNode(this.getRange())),a(b,this.editor));this.cacheRange()},fixOnPasteInAt:function(a){var b=this.getRange(),
c=this.getCursorPos(b);y?(b=b.startContainer,"A"!=b.tagName&&(b=b.parentNode)):b=b.parentElement();if("A"==b.tagName&&b.getAttribute("default")){var d="@"+b.getAttribute("default");if(0==c)return dojo.place(dojo.toDom(a),b,"before"),!0;if(c==d.length)return a=dojo.toDom(a),dojo.place(a,b,"after"),a=a.lastChild||a,this.setNewRange(a),!0}return!1},moveFocus:function(a,b,c){if(!a)return!1;if(y){var d=a.startContainer;if(1==d.nodeType||"A"==d.parentNode.tagName)if(c=d,"A"==d.parentNode.tagName&&(c=d.parentNode),
c.getAttribute("default"))return d=this.getSelection(),b&&!(c.getAttribute("node-type")&&"reply"==c.getAttribute("node-type"))?a.setStartBefore(c):a.setStartAfter(c),a.collapse(!0),d.removeAllRanges(),d.addRange(a),!0}else if(c=a.parentElement(),1==c.nodeType&&"A"==c.tagName&&c.getAttribute("default")){d=c.getAttribute("default").length;if(c.getAttribute("node-type")&&"reply"==c.getAttribute("node-type"))return!0;b?a.move("character",-d):a.move("character",d);a.collapse(!0);a.select();return!0}return!1},
getCursorPos:function(a){if(y)return a.endOffset;this.getSelection();var b=document.body.createTextRange();b.moveToElementText(a.parentElement());var c;for(c=0;0>b.compareEndPoints("StartToStart",a);c++)b.moveStart("character",1);return c},deleteAtUser:function(a,b){if(a)if(m)if(a=document.selection.createRange(),b)if(a.moveStart("character",1),p=a.parentElement(),"A"==p.tagName&&(p.getAttribute("default")||p.getAttribute("reply")))p.parentNode.removeChild(p),dojo.stopEvent(e);else return a.moveStart("character",
-1),!1;else if(a.moveStart("character",-1),p=a.parentElement(),"A"==p.tagName&&(p.getAttribute("default")||p.getAttribute("reply")))p.parentNode.removeChild(p);else return a.moveStart("character",1),!1;else{var c=h("A[default]",this.editor),d;dojo.some(c,function(a,b){if(a.getAttribute("node-type")&&"reply"==a.getAttribute("node-type"))return d=a.getAttribute("default"),App.unescape(a.innerHTML)!=d&&a.parentNode.removeChild(a),!1;d=a.getAttribute("default");if(App.unescape(a.innerHTML)!="@"+d)return a.parentNode.removeChild(a),
!0})}},getCursorPosByMarkNode:function(a){this.insertHTML(this.markNode,a);a=h("b[node-type\x3dmark]",this.editor);var b=a.position()[0];a.remove();return b},searchAt:function(a){if(!this.notAt&&a){var c=this,d,g,m=this.getCursorPos(a);if(y){a=a.endContainer;if(1==a.nodeType&&"A"==a.tagName||"A"==a.parentNode.tagName){b.hide();this.stopCheckInput();return}d=a.textContent||a.innerText||a.textContent}else a=a.parentElement(),d=a.innerText;d=d.substr(0,m);g=d.lastIndexOf("@");if(dojo.isDescendant(a,
this.editor)){var t=0,r;dojo.some(a.childNodes,function(a,d){if(!y&&1==a.nodeType&&"BR"==a.tagName){var k=document.createElement("div");k.innerHTML="\x3cbr\x3e1";r=k.innerText;r=r.substr(0,r.length-1)}else r=a.innerText||a.textContent||a.nodeValue||"";t+=r.length;if(t>g)return 1==a.nodeType&&"A"==a.tagName&&(g=-1,b.hide(),c.stopCheckInput()),!0});if(-1<g&&(m=d.substring(g+1,m),20>=m.length&&!/\s{2}/.test(m))){if(this.keyword==m&&""!=m)return;a=this.getRange();d=this.getSelection();d=k(d,a);if(!d||
0==d.x&&0==d.y)d=this.getCursorPosByMarkNode(a),d.y+=d.h;b.show(m,this.editor,this.teamid,this,d,this.parent);this.keyword=m;return}b.hide();this.keyword=null;this.stopCheckInput()}}},fixInsertInUser:function(){var a=h("A[default]",this.editor),b,c,d=this,k;dojo.some(a,function(a,g){if(a.getAttribute("node-type")&&"reply"==a.getAttribute("node-type"))return!1;b="@"+a.getAttribute("default");c=h(a).text();if(b!=c){var m=RegExp(b+"$");k=a;0==c.indexOf(b)?(k=dojo.toDom(c.substr(b.length)),dojo.place(k,
a,"after")):m.test(c)&&(k=dojo.toDom(c.substr(0,c.length-b.length)),dojo.place(k,a,"before"));h(a).text(b);k=k.lastChild||k;d.setNewRange(k);return!0}})},getValue:function(){return n.getText(this.editor)},showFace:function(a){u.show(this.faceBtn,this,this.parent);a.preventDefault()},getAtPosition:function(){},insertFace:function(a){this.insertHTML(a);this.fixInsertInUser();this.cacheRange()},insertUser:function(a,b){b=b||"";var c=this._oldRng;c||(c=this.getRange());var d=this.getCursorPos(c);y?(d=
Math.max(d-b.length-1,0),c.setStart(c.startContainer,d),c.deleteContents()):(d=b.length+1,c.moveStart("character",-d),c.select());this.insertHTML(a,c);this.cacheRange()},insertHTMLInIE:function(a,b){document.selection.empty();b.pasteHTML(a);var c=document.createElement("div");c.innerHTML=a;b.moveStart("character",c.innerText.length);b.collapse();b.select()},checkRangeInEditor:function(a){return a&&(a=a.startContainer||a.parentElement())?dojo.isDescendant(a,this.editor):!1},insertHTML:function(a,b){var c=
b||this._oldRng;if(!c||!this.checkRangeInEditor(c))this.editor.focus(),c=this.getRange();var d=this.getSelection();if(y){c.deleteContents();var k=dojo.toDom(a),g=k.lastChild||k;c.insertNode(k)}else document.selection.empty(),c.pasteHTML(a),c.collapse(),c.select();this.setNewRange(g,c,d);this.cacheRange()},setNewRange:function(a,b,c){b=b||this.getRange();c=c||this.getSelection();if(y)try{b=b.cloneRange(),b.setStartAfter(a),b.setEndAfter(a),b.collapse(!0),c.removeAllRanges(),c.addRange(b)}catch(d){}g&&
this.editor.focus()},bind:function(){var a=this;this.regEvent(this.editor,"keyup",d.hitch(this,this.onKeyup));this.regEvent(this.editor,"keydown",d.hitch(this,this.onKeydown));this.regEvent(this.editor,"mouseup",d.hitch(this,this.onMouseup));this.regEvent(this.editor,"paste",d.hitch(this,this.onPaste));this.faceBtn&&this.regEvent(this.faceBtn,"click",d.hitch(this,this.showFace));this.regEvent(this.editor,"blur",d.hitch(this,this.stopCheckInput));this.on("insertUser",function(b){var c=App.escape(b.name);
a.insertUser('\x3ca href\x3d"javascript:void(0)" class\x3d"wk_atLink" uid\x3d"'+b.uid+'" default\x3d"'+c+'"\x3e@'+c+"\x3c/a\x3e\x26nbsp;",b.key)});this.on("insertFace",this.insertFace)},unbind:function(){this._eventList.length&&dojo.forEach(this._eventList,function(a){a.remove()});this.stopCheckInput()},initEditor:function(){this.editor.setAttribute("contenteditable",!0);this.editor.setAttribute("autocomplete","off");this.editor.innerHTML='\x3cp name\x3d"ffc5"\x3e\x3c/p\x3e'}})})},"app/widget/editor/source/at":function(){define("app/widget/editor/source/at",
["dojo/query","dojo/on","dojo/window","dojo/text!./templates/at.html"],function(l,c,h,d){var b=dojo.keys;return function(){function u(a,b,c){var d=[];0==a.length?(""==b?(b="\u6dfb\u52a0\u4f01\u4e1a\u6210\u5458\u540e\u53ef\u4ee5@\u4ed6\u4eec\u54e6~",O[c]=0):b="\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u641c\u7d22\u7ed3\u679c",w.innerHTML=b,dojo.setStyle(w,{display:""})):(10<=a.length?(w.innerHTML="\u9009\u62e9\u8981@\u7684\u4eba\u6216\u7ee7\u7eed\u8f93\u5165",dojo.setStyle(w,{display:""})):dojo.setStyle(w,
{display:"none"}),O[c]=1);dojo.forEach(a,function(a,b){var c=App.escape(a.name);d.push('\x3cli class\x3d"'+(0==b?H:"")+'" action-type\x3d"select" _index\x3d"'+b+'" _id\x3d"'+a.userId+'" _name\x3d"'+c+'"\x3e');d.push('\x3cdiv class\x3d"wk_atLeft fl"\x3e\x3cimg src\x3d"'+a.headPicture+'64.jpg" onerror\x3d"App.nofind(this)"\x3e\x3c/div\x3e');d.push('\x3cdiv class\x3d"wk_atRight fl"\x3e\x3ca href\x3d"javascript:void(0);" class\x3d"wk_uName"\x3e'+c+"\x3c/a\x3e\x3cp\x3e"+(a.email||a.mobile)+"\x3c/p\x3e\x3c/div\x3e");
d.push("\x3c/li\x3e")});g.innerHTML=d.join("");y.scrollTop=0;dojo.setStyle(r,{display:0==O[c]?"none":""})}function n(a){var b=a.getAttribute("_name");a=a.getAttribute("_id");I.emit("insertUser",{name:b,uid:a,key:s})}function q(){c(m,"li[action-type\x3dselect]:click",function(a){n(this);dojo.stopEvent(a);k()});c(document,"keydown",function(a){if(v){var c=a.keyCode;if(c==b.ENTER){dojo.stopEvent(a);var d=l("li."+H,y)[0];d&&n(d);dojo.stopEvent(a);k()}else if(c==b.UP_ARROW||c==b.DOWN_ARROW){var d=l("li",
y),g=d.length;if(g){var m=l("li."+H,y)[0];if(m){var t=parseInt(m.getAttribute("_index"),10),c=c==b.UP_ARROW?t-1:t+1,c=c>g-1?0:c,c=0>c?g-1:c;dojo.removeClass(m,H);d=d[c];g=d.offsetTop+d.offsetHeight;m=y.clientHeight;dojo.addClass(d,H);g>m+y.scrollTop?y.scrollTop=g-m:d.offsetTop<y.scrollTop&&(y.scrollTop=d.offsetTop)}}dojo.stopEvent(a)}}});c(g,"mousemove",function(a){if(a=l(a.target||a.srcElement).closest("li[action-type\x3dselect]")[0]){x=a;var b=l("li."+H,y)[0];dojo.removeClass(b,H);dojo.addClass(a,
H)}});c(r,"click",function(a){I.emit("insertUser",{name:"\u5168\u4f53\u6210\u5458",uid:0,key:s});dojo.stopEvent(a);k()});c(r,"mouseover",function(a){if(a=l("li."+H,g)[0])x=a.getAttribute("_index"),dojo.removeClass(a,H)});c(r,"mouseout",function(a){(a=l("li[_index\x3d"+x+"]",g)[0])&&dojo.addClass(a,H)});c(document.body,"click",function(a){a=a.target;m&&!dojo.isDescendant(a,m)&&k()})}function a(a,b,c){xhr.get(URL.atSearch,{keyWord:a},function(a){0==a.code&&c&&"function"==typeof c&&c(a.data.result)},
function(){})}function k(){dojo.setStyle(m,{display:"none"});g.innerHTML="";v=!1;z=s=null}function t(a){dojo.setStyle(m,{zIndex:a})}var m=dojo.toDom(d).cloneNode(!0),g=l("ul[node-type\x3dcontent]",m)[0],r=l("div[node-type\x3datAll]",m)[0],y=l("div[node-type\x3dfriendBox]",m)[0],w=l("div[node-type\x3dtips]",m)[0],A=l("[node-type\x3darrow]",m)[0],x,s=null,v=!1,z=null,I=null,E=!1,H="wk_atListCur",E=!1,O={};return{show:function(b,c,d,k,g,r){var h=this;E||(q(),t(1100),E=!0);if(!z||z!=r)r=r||document.body,
r.appendChild(m),z=r;I=k;s!=b&&(s=b,h.setPosition(g,v),dojo.setStyle(m,{display:"block"}),a(b,d,function(a){s==b&&(u(a,b,d),h.setPosition(g,v,!0),v=!0)}))},hide:k,remove:function(){m.parentNode&&m.parentNode.removeChild(m)},getDocumentScrollY:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},setPosition:function(a,b,c){var d=dojo.position(z),k=z.scrollTop;z==document.body&&(d={x:0,y:0},k=this.getDocumentScrollY());
var g=h.getBox(),t=dojo.getMarginBox(m),s=a.x-d.x,r=a.y,q=g.h-r;a=a.y+k-d.y;q<t.h&&r>q?(a=a-t.h-25,dojo.setStyle(A,{display:"none"})):dojo.setStyle(A,{display:""});dojo.setStyle(m,{top:a+"px",position:"absolute"});b||dojo.setStyle(m,{left:s+"px"});c&&(d=dojo.position(m),d.x+250>g.w&&dojo.setStyle(m,{left:s-(d.x+250-g.w)+"px"}))},setZIndex:t}}()})},"app/widget/editor/source/face":function(){define("app/widget/editor/source/face",["dojo/string","dojo/on","dojo/query","./faceMap","dojo/text!./templates/face.html"],
function(l,c,h,d,b){return function(){function u(){var a=[],b,c,k=App.imagePath+"/face/face.png",g;for(g in d)b=d[g],c=b[0],a.push('\x3ca action-type\x3d"face" title\x3d"'+c+'"\x3e\x3cimg class\x3d"wk_face '+b[1]+'" alt\x3d"['+c+']"  src\x3d"'+k+'"\x3e\x3c/a\x3e');return a.join("")}function n(){dojo.setStyle(a,{display:"none"});m=!1;g=null}function q(b){dojo.setStyle(a,{zIndex:b})}var a=dojo.toDom(b),k=!1,t=null,m=!1,g=null,r=document.body,l=h("span[node-type\x3darrow1]",a)[0],w=h("span[node-type\x3darrow2]",
a)[0];c(a,"click",function(a){var b=h(a.target||a.srcElement).closest("[action-type\x3dface]")[0];b&&(b="["+b.getAttribute("title")+"]",t&&t.emit("insertFace",b),n());a.preventDefault()});c(document.body,"click",function(b){b=b.target;a&&(!dojo.isDescendant(b,a)&&!dojo.isDescendant(b,g))&&n()});q(1100);return{show:function(b,c,d){k||(a.appendChild(dojo.toDom(u())),App.msg.on("hideFace",n),k=!0);r=d=d||document.body;d.appendChild(a);g==b&&m?n():(g=b,m=!0,t=c,dojo.setStyle(a,{display:""}),this.setPosition(b))},
hide:n,setZIndex:q,remove:function(){a.parentNode&&a.parentNode.removeChild(a)},setPosition:function(b){var c="wk_sjTout",d="wk_sjTin";b=dojo.position(b);var k=dojo.position(r),g=r.scrollTop,m=-30;r==document.body?(k={x:0,y:0},g=App.common.getDocumentScrollY(),m=-60,dojo.removeClass(a,"wk_bqBox_a")):dojo.addClass(a,"wk_bqBox_a");var t=dojo.window.getBox(),h=b.y+b.h,t=t.h-h,q=dojo.getMarginBox(a),m=b.x+b.w/2-k.x+m,n=b.y+b.h-k.y+10+g;t<q.h&&h>t&&(c="wk_sjBout",d="wk_sjBin",n=b.y-q.h-k.y-10+g);l.className=
c;w.className=d;dojo.setStyle(a,{left:m+"px",top:n+"px",position:"absolute"})}}}()})},"app/widget/editor/source/faceMap":function(){define([],function(){return{wx:["\u5fae\u7b11","bqWx"],zy:["\u9f87\u7259","bqZy"],fd:["\u594b\u6597","bqFd"],yw:["\u7591\u95ee","bqYw"],zhk:["\u6293\u72c2","bqZhk"],jy:["\u60ca\u8bb6","bqJy"],lh:["\u6d41\u6c57","bqLh"],hx:["\u61a8\u7b11","bqHx"],ll:["\u6d41\u6cea","bqLl"],fn:["\u6124\u6012","bqFn"],kx:["\u5f00\u5fc3","bqKx"],bz:["\u95ed\u5634","bqBz"],yun:["\u6655","bqYun"],
shh:["\u4f7f\u574f","bqShh"],am:["\u66a7\u6627","bqAm"],hq:["\u54c8\u6b20","bqHq"],tp:["\u8c03\u76ae","bqTp"],shw:["\u5931\u671b","bqShw"],gd:["\u611f\u52a8","bqGd"],qq:["\u4eb2\u4eb2","bqQq"],zj:["\u518d\u89c1","bqZj"],wsh:["\u63e1\u624b","bqWsh"],hd:["\u597d\u7684","bqHd"],qiang:["\u5f3a","bqQiang"]}})},"app/widget/editor/source/textParse":function(){define(["dojo/query","dojo/_base/lang","./faceMap"],function(l,c,h){var d=dojo.isIE;return{parseAt:function(b){var c="";return c=b.replace(/{(@)([^{<]+?),\s*(\d+?)}/g,
function(b,c,a,d){b=c+a;return"\x3ca  class\x3dwk_atLink  autoid\x3d"+d+" cardid\x3d"+d+" default\x3d"+b+"\x3e"+b+"\x3c/a\x3e"})},parseAtText:function(b){var c="";return c=b.replace(/{(@)([^{<]+?),\s*(\d+?)}/g,function(b,c,a,d){return c+a})},parseTopic:function(b){var h=document.createElement("div");b=b.replace(/<img[^<]* default="([a-z]+)"[^<]*>/ig,"\x3ca\x3e{!$1}\x3c/a\x3e");b=b.replace(/<br>|<div><br><\/div>/ig,"\x3ca\x3e\n\x3c/a\x3e");b=b.replace(/<div>([\s\S]*?)<\/div>/ig,"\x3ca\x3e\n\x3c/a\x3e$1");
for(b=b.replace(/<P>([\s\S]*?)<\/P>/ig,"\x3ca\x3e\n\x3c/a\x3e$1");"\x3ca\x3e\x26lt;br\x26gt;\x3c/a\x3e"==b.substr(0,17);)b=b.substr(17);d&&9>d&&(b=b.replace(/\n/g,"{[!n]}"));h.innerHTML=b;b=l(h).query("A[default]");for(var n=0;n<b.length;n++){var q=c.trim(l(b[n]).text())||"",a="@"+b[n].getAttribute("default");l(b[n]).attr("uid")[0]&&q==a?l(b[n]).text("{"+q+","+l(b[n]).attr("uid")+"}"):l(b[n]).remove()}b=l(h).text();for(d&&9>d&&(b=b.replace(/{\[\!n\]}/ig,"\n"));"\n"==b.substr(0,1);)b=b.substr(1);h.parentElement&&
h.parentElement.removeChild(h);return b=b.replace(/&amp;/g,"\x26")},parseText:function(b){if(!dojo.isString(b)||!b.length)return"";var c="",c=this.parseAt(b);return c=c.replace(/\n/g,"\x3cbr\x3e").replace(/\r/g,"\x3cbr\x3e")},getText:function(b){return this.parseTopic(b.innerHTML)}}})},"app/util/_InputChangeMixin":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang"],function(l,c,h){return l("app/util/_InputChangeMixin",[],{postMixInProperties:function(){this.keyType="keydown, paste, cut, input, compositionend, propertychange";
9>dojo.isIE&&(this.keyType="keyup , input , paste , propertychange");this.inherited(arguments)},_inputHandler:function(d){if(9>dojo.isIE)this.defer(function(){this._onInputChange()});else{var b;if("keydown"==d.type){b=d.keyCode;switch(b){case c.SHIFT:case c.ALT:case c.CTRL:case c.META:case c.CAPS_LOCK:case c.NUM_LOCK:case c.SCROLL_LOCK:return}if(!d.ctrlKey&&!d.metaKey&&!d.altKey){switch(b){case c.NUMPAD_0:case c.NUMPAD_1:case c.NUMPAD_2:case c.NUMPAD_3:case c.NUMPAD_4:case c.NUMPAD_5:case c.NUMPAD_6:case c.NUMPAD_7:case c.NUMPAD_8:case c.NUMPAD_9:case c.NUMPAD_MULTIPLY:case c.NUMPAD_PLUS:case c.NUMPAD_ENTER:case c.NUMPAD_MINUS:case c.NUMPAD_PERIOD:case c.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==c.SPACE)return;b=!1;for(var l in c)if(c[l]===d.keyCode){b=!0;break}if(!b)return}}(b=32<=d.charCode?String.fromCharCode(d.charCode):d.charCode)||(b=65<=d.keyCode&&90>=d.keyCode||48<=d.keyCode&&57>=d.keyCode||d.keyCode==c.SPACE?String.fromCharCode(d.keyCode):d.keyCode);b||(b=229);if("keypress"==d.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(d.ctrlKey||d.metaKey||d.altKey)return}if("input"==d.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var n={faux:!0},q;for(q in d)"layerX"!=q&&"layerY"!=q&&(l=d[q],"function"!=typeof l&&"undefined"!=typeof l&&(n[q]=l));h.mixin(n,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){n._wasConsumed=!0;d.preventDefault()},stopPropagation:function(){d.stopPropagation()}});n._wasConsumed||this.defer(function(){this._onInputChange(n)})}}})})},"chanjet/scrollBar/ScrollBar":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/on dojo/Evented dojo/query dojo/mouse dojo/dom-class dojo/dom-construct chanjet/scrollBar/ScrollBarH chanjet/scrollBar/ScrollBarV dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(l,c,h,d,b,u,n,q,a,k,t,m){return l("chanjet.scrollBar.ScrollBar",[m,b],{dom:null,autoSize:!1,autoMode:!1,hasArrow:!1,isFixed:!1,step:20,scrollWidth:8,lockScroll:!1,_mode:null,_finish:!1,templateString:"\x3cdiv\x3e\x3c/div\x3e",postCreate:function(){this.inherited(arguments);this._initFrame();this._bindEvent();this._finish=!0},_bindEvent:function(){this.isFixed&&this.own(d(window,"resize",c.hitch(this,this.resize)));this.own(d(this.domNode,n.enter,c.hitch(this,this._onMouseEnter)),d(this.domNode,
n.leave,c.hitch(this,this._onMouseLeave)))},triggerEvent:function(a,b){b.scrollWidth=this.dom.scrollWidth;b.scrollHeight=this.dom.scrollHeight;b.domWidth=this.dom.offsetWidth;b.domHeight=this.dom.offsetHeight;this.emit(a,b)},_initFrame:function(){dojo.style(this.dom,{overflow:"hidden"});var a=dojo.getStyle(this.dom);this.className&&q.add(this.domNode,this.className);this.style&&dojo.style(this.domNode,this.style);dojo.style(this.domNode,{overflow:"hidden"});!this.className&&!this.style&&this._replaceCss(a);
"absolute"!=a.position&&dojo.style(this.dom,{position:"absolute"});dojo.style(this.dom,{left:0,right:0,top:0,bottom:0,margin:0,width:"100%",height:"100%","min-width":"","min-height":"","max-width":"","max-height":""});dojo.place(this.domNode,this.dom,"before");dojo.place(this.dom,this.domNode,"first");this._addScrollBar()},_replaceCss:function(a){var b=a.position;"fixed"!=b&&"absolute"!=b||"relative"!=b?dojo.style(this.domNode,{position:a.position,left:a.left,right:a.right,top:a.top,bottom:a.bottom}):
dojo.style(this.container,{position:"relative"});dojo.style(this.domNode,{margin:a.margin,width:a.width,height:a.height,minWidth:a.minWidth,maxWidth:a.maxWidth,minHeight:a.minHeight,maxHeight:a.maxHeight,overflow:"hidden"})},_addScrollBar:function(){this.isFixed?dojo.style(this.dom,{position:"absolute",padding:0,margin:0,overflow:"hidden",left:0,top:0,right:0,bottom:0,width:"auto",height:"auto",minwidth:"none",minheight:"none",maxwidth:"none",maxheight:"none"}):dojo.style(this.dom,{position:"absolute",
left:0,right:0,top:0,bottom:0,padding:0,margin:0,overflow:"hidden",width:"100%",height:"100%",minwidth:"100%",minheight:"100%",maxwidth:"100%",maxheight:"100%"});this.scrollBarH=new k({dom:this.dom,container:this.domNode,owner:this});this.scrollBarV=new t({dom:this.dom,container:this.domNode,owner:this});dojo.place(this.scrollBarH.domNode,this.domNode,"last");dojo.place(this.scrollBarV.domNode,this.domNode,"last");this.resize()},_onMouseEnter:function(){if(dojo.isIE){var a=window.event,b=a.fromElement;
if("mouseover"==a.type&&(this.domNode===b||this.domNode.contains(b)))return}this.resize();this.isFixed||(this.scrollBarH._onMouseEnter(),this.scrollBarV._onMouseEnter())},_onMouseLeave:function(){if(dojo.isIE){var a=window.event,b=a.toElement;if("mouseout"==a.type&&(this.domNode===b||this.domNode.contains(b)))return}this.isFixed||(this.scrollBarH._onMouseLeave(),this.scrollBarV._onMouseLeave())},resize:function(){if(this.autoSize)if(this.autoMode){if(!this._finish||this._finish&&this.dom.scrollHeight<=
this.dom.offsetHeight){dojo.style(this.dom,{height:"auto",position:"relative"});var a=this.dom.scrollHeight,b=dojo.style(this.dom,"maxHeight");b&&(a=a>b?b:a);dojo.style(this.domNode,{height:a+"px"});dojo.style(this.dom,{height:"100%",position:"absolute"})}}else dojo.style(this.domNode,{display:"block",height:0}),a=this.dom.scrollHeight,(b=dojo.style(this.dom,"maxHeight"))&&(a=a>b?b:a),dojo.style(this.domNode,{height:a+"px"}),dojo.style(this.dom,{height:"100%",position:"absolute"});a=this.dom.offsetHeight;
b=this.dom.scrollHeight;this.dom.scrollWidth>this.dom.offsetWidth?b>a?(this._mode="both",dojo.style(this.dom,{right:this.scrollWidth+"px",bottom:this.scrollWidth+"px"}),dojo.style(this.scrollBarH.domNode,{display:"block",right:this.scrollWidth+"px"}),dojo.style(this.scrollBarV.domNode,{display:"block",bottom:this.scrollWidth+"px"}),this.scrollBarH.resize(),this.scrollBarV.resize()):(this._mode="horizontal",dojo.style(this.dom,{right:0,bottom:this.scrollWidth+"px"}),dojo.style(this.scrollBarV.domNode,
{display:"none"}),dojo.style(this.scrollBarH.domNode,{display:"block",right:0}),this.scrollBarH.resize()):b>a?(this._mode="vertical",dojo.style(this.dom,{right:this.scrollWidth+"px",bottom:0}),dojo.style(this.scrollBarH.domNode,{display:"none"}),dojo.style(this.scrollBarV.domNode,{display:"block",bottom:0}),this.scrollBarV.resize()):(this._mode="none",dojo.style(this.scrollBarH.domNode,{display:"none"}),dojo.style(this.scrollBarV.domNode,{display:"none"}))},setScrollTop:function(a){this.dom.scrollTop=
a;this.resize()},setScrollLeft:function(a){this.dom.scrollLeft=a;this.resize()},scrollTo:function(a,b){this.dom.scrollLeft=a;this.dom.scrollTop=b;this.resize()}})})},"chanjet/scrollBar/ScrollBarH":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/on dojo/Evented dojo/query dojo/mouse chanjet/scrollBar/ScrollBarBase".split(" "),function(l,c,h,d,b,u,n,q){return l("chanjet.scrollBar.ScrollBarH",[q,b],{_add:0,_drag:!1,_arrowLeft:0,baseClass:"scrollBarH",postCreate:function(){this.inherited(arguments)},
resize:function(){this.owner.hasArrow?(dojo.style(this.arrowStart,{display:"block"}),dojo.style(this.arrowEnd,{display:"block"}),this._arrowLeft=this.arrowStart.offsetHeight+2,dojo.style(this.bg,{left:this._arrowLeft+"px",right:this._arrowLeft+"px"})):(dojo.style(this.arrowStart,{display:"none"}),dojo.style(this.arrowEnd,{display:"none"}),this._arrowTop=0,dojo.style(this.bg,{left:0,right:0}));this._render()},_render:function(){var a,b,c=this.bg.offsetWidth,d=this.dom.offsetWidth,g=this.dom.scrollWidth;
a=g-d;b=!1!==this._drag?this._drag:this.dom.scrollLeft+this._add;0>b&&(b=0);b>a&&(b=a);a=c*b/g+this._arrowLeft;this.dom.scrollLeft=b;dojo.style(this.block,{left:a+"px",width:c*d/g+"px"});this._add=0;this._drag=!1},_onMouseEnter:function(){("both"==this.owner._mode||"horizontal"==this.owner._mode)&&this.inherited(arguments)},_onMouseLeave:function(){("both"==this.owner._mode||"horizontal"==this.owner._mode)&&this.inherited(arguments)},_onClickScroll:function(a){var b=this.getBgPos();this._add=(a.pageX-
b.x-document.body.scrollTop)*this.dom.scrollWidth/this.bg.offsetWidth-this.dom.offsetWidth/2-this.dom.scrollLeft;this._render()},_onArrowStart:function(){this._add=-this._step;this._render()},_onArrowEnd:function(){this._add=this._step;this._render()},_onDragStart:function(a){this.inherited(arguments);this.owner.drag="horizontal";this._dragLeft=dojo.style(this.block,"left")},_onDrag:function(a){"horizontal"==this.owner.drag&&(this._drag=parseInt((this._dragLeft+(a.clientX-this._oldMouse.x)-this._arrowLeft)*
this.dom.scrollWidth/this.dom.offsetWidth),this._render(),this.inherited(arguments))}})})},"chanjet/scrollBar/ScrollBarBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/on dojo/query dojo/mouse dojo/dom-geometry dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./ScrollBarBase.html".split(" "),function(l,c,h,d,b,u,n,q,a,k){return l("chanjet.scrollBar.ScrollBarBase",[q,a],{_isShow:!1,_duration:500,templateString:k,postCreate:function(){this.inherited(arguments);this._step=
this.owner.step;this._lockScroll=this.owner.lockScroll;this.owner.isFixed||this._fadeOut(1);this.resize();this._bindEvent()},_bindEvent:function(){var a=dojo.isIE?document:window;this.own(d(this.bg,"click",c.hitch(this,this._onClickScroll)),d(this.arrowStart,"click",c.hitch(this,this._onArrowStart)),d(this.arrowEnd,"click",c.hitch(this,this._onArrowEnd)),d(this.block,"mousedown",c.hitch(this,this._onDragStart)),d(a,"mousemove",c.hitch(this,this._onDrag)),d(a,"mouseup",c.hitch(this,this._onDragStop)))},
resize:function(){},_render:function(){},_fadeIn:function(a){var c=a||this._duration;8<dojo.isIE||void 0==dojo.isIE?dojo.fadeIn({node:this.domNode,duration:c}).play():b("div",this.domNode).forEach(function(a){dojo.style(a,{opacity:1});dojo.fadeIn({node:a,duration:c}).play()})},_fadeOut:function(a){var c=a||this._duration;8<dojo.isIE||void 0==dojo.isIE?dojo.fadeOut({node:this.domNode,duration:c}).play():b("div",this.domNode).forEach(function(a){dojo.style(a,{opacity:1});dojo.fadeOut({node:a,duration:c}).play()})},
getBgPos:function(){return n.position(this.bg)},_onMouseEnter:function(){this._isShow=!0;!this._drag&&(!this.owner.drag&&!this.owner.isFixed)&&this._fadeIn()},_onMouseLeave:function(){this._isShow=!1;!this._drag&&(!this.owner.drag&&!this.owner.isFixed)&&this._fadeOut()},_onClickScroll:function(a){},_onArrowStart:function(){},_onArrowEnd:function(){},_onDragStart:function(a){a.preventDefault();this._oldMouse={x:a.clientX,y:a.clientY}},_onDrag:function(a){a.scrollLeft=this.dom.scrollLeft;a.scrollTop=
this.dom.scrollTop;a.scrollType="drag";this.owner.triggerEvent("scroll",a)},_onDragStop:function(){!this._isShow&&!this.owner.isFixed&&this._fadeOut();this.owner.drag=!1;this._dragTop=this._oldMouse=null}})})},"chanjet/scrollBar/ScrollBarV":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojo/on dojo/Evented dojo/query dojo/mouse chanjet/scrollBar/ScrollBarBase".split(" "),function(l,c,h,d,b,u,n,q){return l("chanjet.scrollBar.ScrollBarV",[q,b],{_add:0,_drag:!1,_arrowTop:0,baseClass:"scrollBarV",
postCreate:function(){this.inherited(arguments);d(this.container,n.wheel,c.hitch(this,this._onMouseWheel))},resize:function(){this.owner.hasArrow?(dojo.style(this.arrowStart,{display:"block"}),dojo.style(this.arrowEnd,{display:"block"}),this._arrowTop=this.arrowStart.offsetHeight+2,dojo.style(this.bg,{top:this._arrowTop+"px",bottom:this._arrowTop+"px"})):(dojo.style(this.arrowStart,{display:"none"}),dojo.style(this.arrowEnd,{display:"none"}),this._arrowTop=0,dojo.style(this.bg,{top:0,bottom:0}));
this._render()},_render:function(){var a,b,c=this.bg.offsetHeight,d=this.dom.offsetHeight,g=this.dom.scrollHeight;a=g-d;b=!1!==this._drag?this._drag:this.dom.scrollTop+this._add;0>b&&(b=0);b>a&&(b=a);a=(0==g?0:c*b/g)+this._arrowTop;this.dom.scrollTop=b;dojo.style(this.block,{top:a+"px",height:(0==g?0:c*d/g)+"px"});this._add=0;this._drag=!1},_onMouseWheel:function(a){var b,c,d;a.wheelDelta?b=a.wheelDelta:a.detail&&(b=a.detail);this._add=0>=b?this._step:-this._step;this._isShow||(this._isShow=!0,dojo.style(this.domNode,
{opacity:1}),u("div",this.domNode).forEach(function(a){dojo.style(a,{opacity:1})}));c=this.dom.scrollTop;d=this.dom.scrollHeight-this.dom.offsetHeight;if(this._lockScroll)a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1,(0<b&&0<c||0>b&&c<=d)&&this._render();else if(0<b&&0<c||0>b&&c<d)a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1,this._render();a.scrollLeft=this.dom.scrollLeft;a.scrollTop=this.dom.scrollTop;a.scrollType="mousewheel";this.owner.triggerEvent("scroll",
a)},_onMouseEnter:function(){("both"==this.owner._mode||"vertical"==this.owner._mode)&&this.inherited(arguments)},_onMouseLeave:function(){("both"==this.owner._mode||"vertical"==this.owner._mode)&&this.inherited(arguments)},_onClickScroll:function(a){var b=this.getBgPos();this._add=(a.pageY-b.y-document.body.scrollTop)*this.dom.scrollHeight/this.bg.offsetHeight-this.dom.offsetHeight/2-this.dom.scrollTop;this.owner.triggerEvent("scroll",a);this._render()},_onArrowStart:function(){this._add=-this._step;
this._render()},_onArrowEnd:function(){this._add=this._step;this._render()},_onDragStart:function(a){this.inherited(arguments);this.owner.drag="vertical";this._dragTop=dojo.style(this.block,"top")},_onDrag:function(a){"vertical"==this.owner.drag&&(this._drag=parseInt((this._dragTop+(a.clientY-this._oldMouse.y)-this._arrowTop)*this.dom.scrollHeight/this.dom.offsetHeight),this._render(),this.inherited(arguments))}})})},"app/widget/audio/SMAudio":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-class dojo/dom-style dojo/text!./templates/smaudio.html dijit/_WidgetBase dijit/_TemplatedMixin ./script/soundmanager2 app/global".split(" "),
function(l,c,h,d,b,u,n,q,a,k){a.setup({url:k.sm2swfPath,allowScriptAccess:"always",flashVersion:9,debugMode:!1});return l("SMAudio",[n,q],{url:"",smObject:null,templateString:u,status:!1,imMode:!1,my:!1,time:0,width:"25%",sid:"",relateToID:"",relateToType:"",_checkReady:!1,postCreate:function(){this.inherited(arguments);this._init()},destroy:function(){a.destroySound(this.smid);this.inherited(arguments)},_initUI:function(){this.imMode?(d.add(this.domNode,"im-mode"),this.my&&d.add(this.domNode,"my"),
b.set(this.actionNode,"width",this.width)):d.add(this.domNode,"btn-mode");this.timeLabel.innerHTML=parseInt(this.time)+"''"},_init:function(){b.set(this.domNode,"display","none");this.smObject||(a.audioFormats.mp3.type.push("audio/x-mpeg"),a.setup({onready:c.hitch(this,function(){this.smid=this.url+(new Date).getTime();this.smObject=a.createSound({url:this.url+".mp3",id:this.smid,onbufferchange:c.hitch(this,this._onbufferChange),onplay:c.hitch(this,this._onplay),onstop:c.hitch(this,this._onstop),
onpause:c.hitch(this,this._onpause),onfinish:c.hitch(this,this._playFinish),onplayerror:c.hitch(this,this._onplayerror),ondataerror:c.hitch(this,this._ondataerror),onconnect:c.hitch(this,this._onconnect)});this._initUI();this._initEvent();b.set(this.domNode,"display","")})}))},_onbufferChange:function(){this.smObject.isBuffering?d.add(this.domNode,"downloading"):d.remove(this.domNode,"downloading")},_onplay:function(){this.status=!0;d.add(this.domNode,["playing"])},_onstop:function(){this.status=
!1;d.remove(this.domNode,["playing","loading"])},_onpause:function(){this.status=!1;d.remove(this.domNode,["playing","loading"])},_playFinish:function(){d.remove(this.domNode,"playing");this.status=!1},_onplayerror:function(){},_ondataerror:function(a){this.status=!1;d.remove(this.domNode,["playing","loading"])},_onconnect:function(a){},_initEvent:function(){this.own(h(this.actionNode,"click",c.hitch(this,this.togglePlay)))},togglePlay:function(){this._checkReady?this.status?a.stop(this.smid):(a.stopAll(),
a.play(this.smid)):xhr.get("business/"+App.apiVersion+"/workrecord/convertInfo",{id:this.sid,relateToID:this.relateToID,relateToType:this.relateToType,url:this.url,targetType:"mp3"},c.hitch(this,function(a){1==a.state?(this._checkReady=!0,this.togglePlay()):App.tip("\u8bed\u97f3\u8f6c\u6362\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}),function(){App.tip("\u8bed\u97f3\u8f6c\u6362\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},play:function(){a.play(this.smid)},pause:function(){a.pause(this.smid)},
stop:function(){a.stop(this.smid)}})})},"app/widget/audio/script/soundmanager2":function(){define(function(){function l(d,b){function h(b){return a.preferFlash&&P&&!a.ignoreFlash&&a.flash[b]!==c&&a.flash[b]}function n(b){return function(c){var d=this._s;!d||!d._a?(d&&d.id?a._wD(d.id+": Ignoring "+c.type):a._wD(m+"Ignoring "+c.type),c=null):c=b.call(this,c);return c}}this.setupOptions={url:d||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",
useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1E3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,
pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs\x3d"mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs\x3d"mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM",
"audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs\x3dvorbis"],required:!1},opus:{type:["audio/ogg; codecs\x3dopus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs\x3d"1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=b||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20140901";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds=
{};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,
noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var q,a=this,k=null,t=null,m="HTML5::",g,r=navigator.userAgent,l=window.location.href.toString(),w=document,A,x,s,v,z=[],I=!0,E,H=!1,O=!1,F=!1,K=!1,la=!1,B,pb=0,da,J,Aa,Y,Ba,V,Z,aa,Va,Ca,Da,ma,R,na,Ea,W,Fa,ea,oa,pa,ba,Wa,Ga,Xa=["log","info","warn","error"],Ya,Ha,Za,fa=null,Ia=null,C,Ja,ca,$a,qa,ra,S,D,ga=!1,Ka=!1,ab,bb,cb,sa=0,ha=null,ta,X=[],ia,L=null,db,ua,ja,T,va,La,eb,G,fb=Array.prototype.slice,
N=!1,Ma,P,Na,gb,Q,hb,Oa,wa,ib=0,xa=r.match(/(ipad|iphone|ipod)/i),jb=r.match(/android/i),U=r.match(/msie/i),qb=r.match(/webkit/i),ya=r.match(/safari/i)&&!r.match(/chrome/i),Pa=r.match(/opera/i),Qa=r.match(/(mobile|pre\/|xoom)/i)||xa||jb,Ra=!l.match(/usehtml5audio/i)&&!l.match(/sm2\-ignorebadua/i)&&ya&&!r.match(/silk/i)&&r.match(/OS X 10_6_([3-7])/i),Sa=window.console!==c&&console.log!==c,Ta=w.hasFocus!==c?w.hasFocus():null,za=ya&&(w.hasFocus===c||!w.hasFocus()),kb=!za,lb=/(mp3|mp4|mpa|m4a|m4b)/i,
ka=w.location?w.location.protocol.match(/http/i):null,mb=!ka?"http://":"",nb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ob="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),rb=RegExp("\\.("+ob.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!ka;var Ua;try{Ua=Audio!==c&&(Pa&&opera!==c&&10>opera.version()?new Audio(null):new Audio).canPlayType!==c}catch(sb){Ua=!1}this.hasHTML5=Ua;this.setup=
function(b){var d=!a.url;b!==c&&(F&&L&&a.ok()&&(b.flashVersion!==c||b.url!==c||b.html5Test!==c))&&S(C("setupLate"));Aa(b);b&&(d&&(ea&&b.url!==c)&&a.beginDelayedInit(),!ea&&(b.url!==c&&"complete"===w.readyState)&&setTimeout(W,1));return a};this.supported=this.ok=function(){return L?F&&!K:a.useHTML5Audio&&a.hasHTML5};this.getMovie=function(a){return g(a)||w[a]||window[a]};this.createSound=function(b,d){function k(){g=qa(g);a.sounds[g.id]=new q(g);a.soundIDs.push(g.id);return a.sounds[g.id]}var f,g;
f=null;f="soundManager.createSound(): "+C(!F?"notReady":"notOK");if(!F||!a.ok())return S(f),!1;d!==c&&(b={id:b,url:d});g=J(b);g.url=ta(g.url);void 0===g.id&&(g.id=a.setupOptions.idPrefix+ib++);g.id.toString().charAt(0).match(/^[0-9]$/)&&a._wD("soundManager.createSound(): "+C("badID",g.id),2);a._wD("soundManager.createSound(): "+g.id+(g.url?" ("+g.url+")":""),1);if(D(g.id,!0))return a._wD("soundManager.createSound(): "+g.id+" exists",1),a.sounds[g.id];if(ua(g))f=k(),a._wD(g.id+": Using HTML5"),f._setup_html5(g);
else{if(a.html5Only)return a._wD(g.id+": No HTML5 support for this sound, and no Flash. Exiting."),k();if(a.html5.usingFlash&&g.url&&g.url.match(/data\:/i))return a._wD(g.id+": data: URIs not supported via Flash. Exiting."),k();8<v&&(null===g.isMovieStar&&(g.isMovieStar=!(!g.serverURL&&!(g.type&&g.type.match(nb)||g.url&&g.url.match(rb)))),g.isMovieStar&&(a._wD("soundManager.createSound(): using MovieStar handling"),1<g.loops&&B("noNSLoop")));g=ra(g,"soundManager.createSound(): ");f=k();8===v?t._createSound(g.id,
g.loops||1,g.usePolicyFile):(t._createSound(g.id,g.url,g.usePeakData,g.useWaveformData,g.useEQData,g.isMovieStar,g.isMovieStar?g.bufferTime:!1,g.loops||1,g.serverURL,g.duration||null,g.autoPlay,!0,g.autoLoad,g.usePolicyFile),g.serverURL||(f.connected=!0,g.onconnect&&g.onconnect.apply(f)));!g.serverURL&&(g.autoLoad||g.autoPlay)&&f.load(g)}!g.serverURL&&g.autoPlay&&f.play();return f};this.destroySound=function(b,c){if(!D(b))return!1;var d=a.sounds[b],f;d._iO={};d.stop();d.unload();for(f=0;f<a.soundIDs.length;f++)if(a.soundIDs[f]===
b){a.soundIDs.splice(f,1);break}c||d.destruct(!0);delete a.sounds[b];return!0};this.load=function(b,c){return!D(b)?!1:a.sounds[b].load(c)};this.unload=function(b){return!D(b)?!1:a.sounds[b].unload()};this.onposition=this.onPosition=function(b,c,d,f){return!D(b)?!1:a.sounds[b].onposition(c,d,f)};this.clearOnPosition=function(b,c,d){return!D(b)?!1:a.sounds[b].clearOnPosition(c,d)};this.start=this.play=function(b,c){var d=null,f=c&&!(c instanceof Object);if(!F||!a.ok())return S("soundManager.play(): "+
C(!F?"notReady":"notOK")),!1;if(D(b,f))f&&(c={url:c});else{if(!f)return!1;f&&(c={url:c});c&&c.url&&(a._wD('soundManager.play(): Attempting to create "'+b+'"',1),c.id=b,d=a.createSound(c).play())}null===d&&(d=a.sounds[b].play(c));return d};this.setPosition=function(b,c){return!D(b)?!1:a.sounds[b].setPosition(c)};this.stop=function(b){if(!D(b))return!1;a._wD("soundManager.stop("+b+")",1);return a.sounds[b].stop()};this.stopAll=function(){var b;a._wD("soundManager.stopAll()",1);for(b in a.sounds)a.sounds.hasOwnProperty(b)&&
a.sounds[b].stop()};this.pause=function(b){return!D(b)?!1:a.sounds[b].pause()};this.pauseAll=function(){var b;for(b=a.soundIDs.length-1;0<=b;b--)a.sounds[a.soundIDs[b]].pause()};this.resume=function(b){return!D(b)?!1:a.sounds[b].resume()};this.resumeAll=function(){var b;for(b=a.soundIDs.length-1;0<=b;b--)a.sounds[a.soundIDs[b]].resume()};this.togglePause=function(b){return!D(b)?!1:a.sounds[b].togglePause()};this.setPan=function(b,c){return!D(b)?!1:a.sounds[b].setPan(c)};this.setVolume=function(b,
c){return!D(b)?!1:a.sounds[b].setVolume(c)};this.mute=function(b){var c=0;b instanceof String&&(b=null);if(b){if(!D(b))return!1;a._wD('soundManager.mute(): Muting "'+b+'"');return a.sounds[b].mute()}a._wD("soundManager.mute(): Muting all sounds");for(c=a.soundIDs.length-1;0<=c;c--)a.sounds[a.soundIDs[c]].mute();return a.muted=!0};this.muteAll=function(){a.mute()};this.unmute=function(b){b instanceof String&&(b=null);if(b){if(!D(b))return!1;a._wD('soundManager.unmute(): Unmuting "'+b+'"');return a.sounds[b].unmute()}a._wD("soundManager.unmute(): Unmuting all sounds");
for(b=a.soundIDs.length-1;0<=b;b--)a.sounds[a.soundIDs[b]].unmute();a.muted=!1;return!0};this.unmuteAll=function(){a.unmute()};this.toggleMute=function(b){return!D(b)?!1:a.sounds[b].toggleMute()};this.getMemoryUse=function(){var a=0;t&&8!==v&&(a=parseInt(t._getMemoryUse(),10));return a};this.disable=function(b){var d;b===c&&(b=!1);if(K)return!1;K=!0;B("shutdown",1);for(d=a.soundIDs.length-1;0<=d;d--)Ya(a.sounds[a.soundIDs[d]]);da(b);G.remove(window,"load",Z);return!0};this.canPlayMIME=function(b){var c;
a.hasHTML5&&(c=ja({type:b}));!c&&L&&(c=b&&a.ok()?!!(8<v&&b.match(nb)||b.match(a.mimePattern)):null);return c};this.canPlayURL=function(b){var c;a.hasHTML5&&(c=ja({url:b}));!c&&L&&(c=b&&a.ok()?!!b.match(a.filePattern):null);return c};this.canPlayLink=function(b){return b.type!==c&&b.type&&a.canPlayMIME(b.type)?!0:a.canPlayURL(b.href)};this.getSoundById=function(b,c){if(!b)return null;var d=a.sounds[b];!d&&!c&&a._wD('soundManager.getSoundById(): Sound "'+b+'" not found.',2);return d};this.onready=function(b,
c){if("function"===typeof b)F&&a._wD(C("queue","onready")),c||(c=window),Ba("onready",b,c),V();else throw C("needFunction","onready");return!0};this.ontimeout=function(b,c){if("function"===typeof b)F&&a._wD(C("queue","ontimeout")),c||(c=window),Ba("ontimeout",b,c),V({type:"ontimeout"});else throw C("needFunction","ontimeout");return!0};this._writeDebug=function(b,d){var k,f;if(!a.debugMode)return!1;if(Sa&&a.useConsole){if(!(d&&"object"===typeof d)&&Xa[d]!==c)console[Xa[d]](b);if(a.consoleOnly)return!0}k=
g("soundmanager-debug");if(!k)return!1;f=w.createElement("div");0===++pb%2&&(f.className="sm2-alt");d=d===c?0:parseInt(d,10);f.appendChild(w.createTextNode(b));d&&(2<=d&&(f.style.fontWeight="bold"),3===d&&(f.style.color="#ff3333"));k.insertBefore(f,k.firstChild);return!0};-1!==l.indexOf("sm2-debug\x3dalert")&&(this._writeDebug=function(a){window.alert(a)});this._wD=this._writeDebug;this._debug=function(){var b,c;B("currentObj",1);b=0;for(c=a.soundIDs.length;b<c;b++)a.sounds[a.soundIDs[b]]._debug()};
this.reboot=function(b,c){a.soundIDs.length&&a._wD("Destroying "+a.soundIDs.length+" SMSound object"+(1!==a.soundIDs.length?"s":"")+"...");var d,f,g;for(d=a.soundIDs.length-1;0<=d;d--)a.sounds[a.soundIDs[d]].destruct();if(t)try{U&&(Ia=t.innerHTML),fa=t.parentNode.removeChild(t)}catch(k){B("badRemove",2)}Ia=fa=L=t=null;a.enabled=ea=F=ga=Ka=H=O=K=N=a.swfLoaded=!1;a.soundIDs=[];a.sounds={};ib=0;if(b)z=[];else for(d in z)if(z.hasOwnProperty(d)){f=0;for(g=z[d].length;f<g;f++)z[d][f].fired=!1}c||a._wD("soundManager: Rebooting...");
a.html5={usingFlash:null};a.flash={};a.html5Only=!1;a.ignoreFlash=!1;window.setTimeout(function(){Ea();c||a.beginDelayedInit()},20);return a};this.reset=function(){B("reset");return a.reboot(!0,!0)};this.getMoviePercent=function(){return t&&"PercentLoaded"in t?t.PercentLoaded():null};this.beginDelayedInit=function(){la=!0;W();setTimeout(function(){if(Ka)return!1;pa();na();return Ka=!0},20);aa()};this.destruct=function(){a._wD("soundManager.destruct()");a.disable(!0)};q=function(b){var d,g,f=this,
m,s,h,r,q,n,l=!1,u=[],z=0,y,w,x=null,I;g=d=null;this.sID=this.id=b.id;this.url=b.url;this._iO=this.instanceOptions=this.options=J(b);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;I=this.url?!1:!0;this.id3={};this._debug=function(){a._wD(f.id+": Merged options:",f.options)};this.load=function(b){var d=null,g;b!==c?f._iO=J(b,f.options):(b=f.options,f._iO=b,x&&x!==f.url&&(B("manURL"),f._iO.url=f.url,f.url=null));f._iO.url||(f._iO.url=f.url);f._iO.url=ta(f._iO.url);
g=f.instanceOptions=f._iO;a._wD(f.id+": load ("+g.url+")");if(!g.url&&!f.url)return a._wD(f.id+": load(): url is unassigned. Exiting.",2),f;!f.isHTML5&&(8===v&&!f.url&&!g.autoPlay)&&a._wD(f.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1);if(g.url===f.url&&0!==f.readyState&&2!==f.readyState)return B("onURL",1),3===f.readyState&&g.onload&&wa(f,function(){g.onload.apply(f,[!!f.duration])}),f;f.loaded=!1;f.readyState=1;f.playState=0;f.id3={};if(ua(g))d=f._setup_html5(g),
d._called_load?a._wD(f.id+": Ignoring request to load again"):(f._html5_canplay=!1,f.url!==g.url&&(a._wD(B("manURL")+": "+g.url),f._a.src=g.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0);else{if(a.html5Only)return a._wD(f.id+": No flash support. Exiting."),f;if(f._iO.url&&f._iO.url.match(/data\:/i))return a._wD(f.id+": data: URIs not supported via Flash. Exiting."),f;try{f.isHTML5=!1;f._iO=ra(qa(g));if(f._iO.autoPlay&&(f._iO.position||f._iO.from))a._wD(f.id+
": Disabling autoPlay because of non-zero offset case"),f._iO.autoPlay=!1;g=f._iO;8===v?t._load(f.id,g.url,g.stream,g.autoPlay,g.usePolicyFile):t._load(f.id,g.url,!!g.stream,!!g.autoPlay,g.loops||1,!!g.autoLoad,g.usePolicyFile)}catch(M){B("smError",2),E("onload",!1),ba({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}f.url=g.url;return f};this.unload=function(){0!==f.readyState&&(a._wD(f.id+": unload()"),f.isHTML5?(r(),f._a&&(f._a.pause(),x=va(f._a))):8===v?t._unload(f.id,"about:blank"):t._unload(f.id),
m());return f};this.destruct=function(b){a._wD(f.id+": Destruct");f.isHTML5?(r(),f._a&&(f._a.pause(),va(f._a),N||h(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,t._destroySound(f.id));b||a.destroySound(f.id,!0)};this.start=this.play=function(b,d){var g,M,k,m,s,h=!0,h=null;g=f.id+": play(): ";d=d===c?!0:d;b||(b={});f.url&&(f._iO.url=f.url);f._iO=J(f._iO,f.options);f._iO=J(b,f._iO);f._iO.url=ta(f._iO.url);f.instanceOptions=f._iO;if(!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||
(a._wD(g+" Netstream not connected yet - setting autoPlay"),f.setAutoPlay(!0)),f;ua(f._iO)&&(f._setup_html5(f._iO),q());1===f.playState&&!f.paused&&((M=f._iO.multiShot)?a._wD(g+"Already playing (multi-shot)",1):(a._wD(g+"Already playing (one-shot)",1),f.isHTML5&&f.setPosition(f._iO.position),h=f));if(null!==h)return h;b.url&&b.url!==f.url&&(!f.readyState&&!f.isHTML5&&8===v&&I?I=!1:f.load(f._iO));f.loaded?a._wD(g.substr(0,g.lastIndexOf(":"))):0===f.readyState?(a._wD(g+"Attempting to load"),!f.isHTML5&&
!a.html5Only?(f._iO.autoPlay=!0,f.load(f._iO)):f.isHTML5?f.load(f._iO):(a._wD(g+"Unsupported type. Exiting."),h=f),f.instanceOptions=f._iO):2===f.readyState?(a._wD(g+"Could not load - exiting",2),h=f):a._wD(g+"Loading - attempting to play...");if(null!==h)return h;!f.isHTML5&&(9===v&&0<f.position&&f.position===f.duration)&&(a._wD(g+"Sound at end, resetting to position:0"),b.position=0);if(f.paused&&0<=f.position&&(!f._iO.serverURL||0<f.position))a._wD(g+"Resuming from paused state",1),f.resume();
else{f._iO=J(b,f._iO);if((!f.isHTML5&&null!==f._iO.position&&0<f._iO.position||null!==f._iO.from&&0<f._iO.from||null!==f._iO.to)&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){M=function(){f._iO=J(b,f._iO);f.play(f._iO)};if(f.isHTML5&&!f._html5_canplay)a._wD(g+"Beginning load for non-zero offset case"),f.load({_oncanplay:M}),h=!1;else if(!f.isHTML5&&!f.loaded&&(!f.readyState||2!==f.readyState))a._wD(g+"Preloading for non-zero offset case"),f.load({onload:M}),h=!1;if(null!==h)return h;f._iO=
w()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!N||!f.isHTML5&&8<v&&!f.getAutoPlay())&&f.instanceCount++;f._iO.onposition&&0===f.playState&&n(f);f.playState=1;f.paused=!1;f.position=f._iO.position!==c&&!isNaN(f._iO.position)?f._iO.position:0;f.isHTML5||(f._iO=ra(qa(f._iO)));f._iO.onplay&&d&&(f._iO.onplay.apply(f),l=!0);f.setVolume(f._iO.volume,!0);f.setPan(f._iO.pan,!0);f.isHTML5?2>f.instanceCount?(q(),g=f._setup_html5(),f.setPosition(f._iO.position),g.play()):(a._wD(f.id+
": Cloning Audio() for instance #"+f.instanceCount+"..."),k=new Audio(f._iO.url),m=function(){G.remove(k,"ended",m);f._onfinish(f);va(k);k=null},s=function(){G.remove(k,"canplay",s);try{k.currentTime=f._iO.position/1E3}catch(a){S(f.id+": multiShot play() failed to apply position of "+f._iO.position/1E3)}k.play()},G.add(k,"ended",m),void 0!==f._iO.volume&&(k.volume=Math.max(0,Math.min(1,f._iO.volume/100))),f.muted&&(k.muted=!0),f._iO.position?G.add(k,"canplay",s):k.play()):(h=t._start(f.id,f._iO.loops||
1,9===v?f.position:f.position/1E3,f._iO.multiShot||!1),9===v&&!h&&(a._wD(g+"No sound hardware, or 32-sound ceiling hit",2),f._iO.onplayerror&&f._iO.onplayerror.apply(f)))}return f};this.stop=function(b){var c=f._iO;1===f.playState&&(a._wD(f.id+": stop()"),f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),y(),c.to&&f.clearOnPosition(c.to),f.isHTML5?f._a&&(b=f.position,f.setPosition(0),f.position=b,f._a.pause(),f.playState=0,f._onTimer(),r()):(t._stop(f.id,b),c.serverURL&&
f.unload()),f.instanceCount=0,f._iO={},c.onstop&&c.onstop.apply(f));return f};this.setAutoPlay=function(b){a._wD(f.id+": Autoplay turned "+(b?"on":"off"));f._iO.autoPlay=b;f.isHTML5||(t._setAutoPlay(f.id,b),b&&(!f.instanceCount&&1===f.readyState)&&(f.instanceCount++,a._wD(f.id+": Incremented instance count to "+f.instanceCount)))};this.getAutoPlay=function(){return f._iO.autoPlay};this.setPosition=function(b){b===c&&(b=0);var d=f.isHTML5?Math.max(b,0):Math.min(f.duration||f._iO.duration,Math.max(b,
0));f.position=d;b=f.position/1E3;f._resetOnPosition(f.position);f._iO.position=d;if(f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==b){a._wD(f.id+": setPosition("+b+")");try{f._a.currentTime=b,(0===f.playState||f.paused)&&f._a.pause()}catch(g){a._wD(f.id+": setPosition("+b+") failed: "+g.message,2)}}}else if(b)return a._wD(f.id+": setPosition("+b+"): Cannot seek yet, sound not ready",2),f;f.paused&&f._onTimer(!0)}}else b=9===v?f.position:b,f.readyState&&2!==f.readyState&&t._setPosition(f.id,
b,f.paused||!f.playState,f._iO.multiShot);return f};this.pause=function(b){if(f.paused||0===f.playState&&1!==f.readyState)return f;a._wD(f.id+": pause()");f.paused=!0;f.isHTML5?(f._setup_html5().pause(),r()):(b||b===c)&&t._pause(f.id,f._iO.multiShot);f._iO.onpause&&f._iO.onpause.apply(f);return f};this.resume=function(){var b=f._iO;if(!f.paused)return f;a._wD(f.id+": resume()");f.paused=!1;f.playState=1;f.isHTML5?(f._setup_html5().play(),q()):(b.isMovieStar&&!b.serverURL&&f.setPosition(f.position),
t._pause(f.id,b.multiShot));!l&&b.onplay?(b.onplay.apply(f),l=!0):b.onresume&&b.onresume.apply(f);return f};this.togglePause=function(){a._wD(f.id+": togglePause()");if(0===f.playState)return f.play({position:9===v&&!f.isHTML5?f.position:f.position/1E3}),f;f.paused?f.resume():f.pause();return f};this.setPan=function(a,b){a===c&&(a=0);b===c&&(b=!1);f.isHTML5||t._setPan(f.id,a);f._iO.pan=a;b||(f.pan=a,f.options.pan=a);return f};this.setVolume=function(b,d){b===c&&(b=100);d===c&&(d=!1);f.isHTML5?f._a&&
(a.muted&&!f.muted&&(f.muted=!0,f._a.muted=!0),f._a.volume=Math.max(0,Math.min(1,b/100))):t._setVolume(f.id,a.muted&&!f.muted||f.muted?0:b);f._iO.volume=b;d||(f.volume=b,f.options.volume=b);return f};this.mute=function(){f.muted=!0;f.isHTML5?f._a&&(f._a.muted=!0):t._setVolume(f.id,0);return f};this.unmute=function(){f.muted=!1;var a=f._iO.volume!==c;f.isHTML5?f._a&&(f._a.muted=!1):t._setVolume(f.id,a?f._iO.volume:f.options.volume);return f};this.toggleMute=function(){return f.muted?f.unmute():f.mute()};
this.onposition=this.onPosition=function(a,b,d){u.push({position:parseInt(a,10),method:b,scope:d!==c?d:f,fired:!1});return f};this.clearOnPosition=function(a,b){var c;a=parseInt(a,10);if(isNaN(a))return!1;for(c=0;c<u.length;c++)if(a===u[c].position&&(!b||b===u[c].method))u[c].fired&&z--,u.splice(c,1)};this._processOnPosition=function(){var a,b;a=u.length;if(!a||!f.playState||z>=a)return!1;for(a-=1;0<=a;a--)b=u[a],!b.fired&&f.position>=b.position&&(b.fired=!0,z++,b.method.apply(b.scope,[b.position]));
return!0};this._resetOnPosition=function(a){var b,c;b=u.length;if(!b)return!1;for(b-=1;0<=b;b--)c=u[b],c.fired&&a<=c.position&&(c.fired=!1,z--);return!0};w=function(){var b=f._iO,c=b.from,d=b.to,g,k;k=function(){a._wD(f.id+': "To" time of '+d+" reached.");f.clearOnPosition(d,k);f.stop()};g=function(){a._wD(f.id+': Playing "from" '+c);if(null!==d&&!isNaN(d))f.onPosition(d,k)};null!==c&&!isNaN(c)&&(b.position=c,b.multiShot=!1,g());return b};n=function(){var a,b=f._iO.onposition;if(b)for(a in b)if(b.hasOwnProperty(a))f.onPosition(parseInt(a,
10),b[a])};y=function(){var a,b=f._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&f.clearOnPosition(parseInt(a,10))};q=function(){f.isHTML5&&ab(f)};r=function(){f.isHTML5&&bb(f)};m=function(a){a||(u=[],z=0);l=!1;f._hasTimer=null;f._a=null;f._html5_canplay=!1;f.bytesLoaded=null;f.bytesTotal=null;f.duration=f._iO&&f._iO.duration?f._iO.duration:null;f.durationEstimate=null;f.buffered=[];f.eqData=[];f.eqData.left=[];f.eqData.right=[];f.failures=0;f.isBuffering=!1;f.instanceOptions={};f.instanceCount=
0;f.loaded=!1;f.metadata={};f.readyState=0;f.muted=!1;f.paused=!1;f.peakData={left:0,right:0};f.waveformData={left:[],right:[]};f.playState=0;f.position=null;f.id3={}};m();this._onTimer=function(a){var b,c=!1,k={};if(f._hasTimer||a){if(f._a&&(a||(0<f.playState||1===f.readyState)&&!f.paused))b=f._get_html5_duration(),b!==d&&(d=b,f.duration=b,c=!0),f.durationEstimate=f.duration,b=1E3*f._a.currentTime||0,b!==g&&(g=b,c=!0),(c||a)&&f._whileplaying(b,k,k,k,k);return c}};this._get_html5_duration=function(){var a=
f._iO;return(a=f._a&&f._a.duration?1E3*f._a.duration:a&&a.duration?a.duration:null)&&!isNaN(a)&&Infinity!==a?a:null};this._apply_loop=function(b,c){!b.loop&&1<c&&a._wD("Note: Native HTML5 looping is infinite.",1);b.loop=1<c?"loop":""};this._setup_html5=function(a){a=J(f._iO,a);var b=N?k:f._a,c=decodeURI(a.url),d;N?c===decodeURI(Ma)&&(d=!0):c===decodeURI(x)&&(d=!0);if(b){if(b._s)if(N)b._s&&(b._s.playState&&!d)&&b._s.stop();else if(!N&&c===decodeURI(x))return f._apply_loop(b,a.loops),b;d||(x&&m(!1),
b.src=a.url,Ma=x=f.url=a.url,b._called_load=!1)}else a.autoLoad||a.autoPlay?(f._a=new Audio(a.url),f._a.load()):f._a=Pa&&10>opera.version()?new Audio(null):new Audio,b=f._a,b._called_load=!1,N&&(k=b);f.isHTML5=!0;f._a=b;b._s=f;s();f._apply_loop(b,a.loops);a.autoLoad||a.autoPlay?f.load():(b.autobuffer=!1,b.preload="auto");return b};s=function(){if(f._a._added_events)return!1;var a;f._a._added_events=!0;for(a in Q)Q.hasOwnProperty(a)&&f._a&&f._a.addEventListener(a,Q[a],!1);return!0};h=function(){var b;
a._wD(f.id+": Removing event listeners");f._a._added_events=!1;for(b in Q)Q.hasOwnProperty(b)&&f._a&&f._a.removeEventListener(b,Q[b],!1)};this._onload=function(b){var c=!!b||!f.isHTML5&&8===v&&f.duration;b=f.id+": ";a._wD(b+(c?"onload()":"Failed to load / invalid sound?"+(!f.duration?" Zero-length duration reported.":" -")+" ("+f.url+")"),c?1:2);!c&&!f.isHTML5&&(!0===a.sandbox.noRemote&&a._wD(b+C("noNet"),1),!0===a.sandbox.noLocal&&a._wD(b+C("noLocal"),1));f.loaded=c;f.readyState=c?3:2;f._onbufferchange(0);
f._iO.onload&&wa(f,function(){f._iO.onload.apply(f,[c])});return!0};this._onbufferchange=function(b){if(0===f.playState||b&&f.isBuffering||!b&&!f.isBuffering)return!1;f.isBuffering=1===b;f._iO.onbufferchange&&(a._wD(f.id+": Buffer state change: "+b),f._iO.onbufferchange.apply(f,[b]));return!0};this._onsuspend=function(){f._iO.onsuspend&&(a._wD(f.id+": Playback suspended"),f._iO.onsuspend.apply(f));return!0};this._onfailure=function(b,c,d){f.failures++;a._wD(f.id+": Failure ("+f.failures+"): "+b);
if(f._iO.onfailure&&1===f.failures)f._iO.onfailure(b,c,d);else a._wD(f.id+": Ignoring failure")};this._onwarning=function(a,b,c){if(f._iO.onwarning)f._iO.onwarning(a,b,c)};this._onfinish=function(){var b=f._iO.onfinish;f._onbufferchange(0);f._resetOnPosition(0);if(f.instanceCount&&(f.instanceCount--,f.instanceCount||(y(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},r(),f.isHTML5&&(f.position=0)),(!f.instanceCount||f._iO.multiShotEvents)&&b))a._wD(f.id+": onfinish()"),
wa(f,function(){b.apply(f)})};this._whileloading=function(a,b,c,d){var g=f._iO;f.bytesLoaded=a;f.bytesTotal=b;f.duration=Math.floor(c);f.bufferLength=d;f.durationEstimate=!f.isHTML5&&!g.isMovieStar?g.duration?f.duration>g.duration?f.duration:g.duration:parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10):f.duration;f.isHTML5||(f.buffered=[{start:0,end:f.duration}]);(3!==f.readyState||f.isHTML5)&&g.whileloading&&g.whileloading.apply(f)};this._whileplaying=function(a,b,d,g,k){var M=f._iO;if(isNaN(a)||
null===a)return!1;f.position=Math.max(0,a);f._processOnPosition();!f.isHTML5&&8<v&&(M.usePeakData&&(b!==c&&b)&&(f.peakData={left:b.leftPeak,right:b.rightPeak}),M.useWaveformData&&(d!==c&&d)&&(f.waveformData={left:d.split(","),right:g.split(",")}),M.useEQData&&(k!==c&&k&&k.leftEQ)&&(a=k.leftEQ.split(","),f.eqData=a,f.eqData.left=a,k.rightEQ!==c&&k.rightEQ&&(f.eqData.right=k.rightEQ.split(","))));1===f.playState&&(!f.isHTML5&&(8===v&&!f.position&&f.isBuffering)&&f._onbufferchange(0),M.whileplaying&&
M.whileplaying.apply(f));return!0};this._oncaptiondata=function(b){a._wD(f.id+": Caption data received.");f.captiondata=b;f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[b])};this._onmetadata=function(b,c){a._wD(f.id+": Metadata received.");var d={},g,k;g=0;for(k=b.length;g<k;g++)d[b[g]]=c[g];f.metadata=d;f._iO.onmetadata&&f._iO.onmetadata.call(f,f.metadata)};this._onid3=function(b,c){a._wD(f.id+": ID3 data received.");var d=[],g,k;g=0;for(k=b.length;g<k;g++)d[b[g]]=c[g];f.id3=J(f.id3,d);f._iO.onid3&&
f._iO.onid3.apply(f)};this._onconnect=function(b){b=1===b;a._wD(f.id+": "+(b?"Connected.":"Failed to connect? - "+f.url),b?1:2);if(f.connected=b)f.failures=0,D(f.id)&&(f.getAutoPlay()?f.play(c,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[b])};this._ondataerror=function(b){0<f.playState&&(a._wD(f.id+": Data error: "+b),f._iO.ondataerror&&f._iO.ondataerror.apply(f))};this._debug()};oa=function(){return w.body||w.getElementsByTagName("div")[0]};g=function(a){return w.getElementById(a)};
J=function(b,d){var g=b||{},f,k;f=d===c?a.defaultOptions:d;for(k in f)f.hasOwnProperty(k)&&g[k]===c&&(g[k]="object"!==typeof f[k]||null===f[k]?f[k]:J(g[k],f[k]));return g};wa=function(a,b){!a.isHTML5&&8===v?window.setTimeout(b,0):b()};Y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};Aa=function(b,d){var g,f=!0,k=d!==c,m=a.setupOptions;if(b===c){f=[];for(g in m)m.hasOwnProperty(g)&&f.push(g);for(g in Y)Y.hasOwnProperty(g)&&("object"===typeof a[g]?f.push(g+": {...}"):a[g]instanceof
Function?f.push(g+": function() {...}"):f.push(g));a._wD(C("setup",f.join(", ")));return!1}for(g in b)if(b.hasOwnProperty(g))if("object"!==typeof b[g]||null===b[g]||b[g]instanceof Array||b[g]instanceof RegExp)k&&Y[d]!==c?a[d][g]=b[g]:m[g]!==c?(a.setupOptions[g]=b[g],a[g]=b[g]):Y[g]===c?(S(C(a[g]===c?"setupUndef":"setupError",g),2),f=!1):a[g]instanceof Function?a[g].apply(a,b[g]instanceof Array?b[g]:[b[g]]):a[g]=b[g];else if(Y[g]===c)S(C(a[g]===c?"setupUndef":"setupError",g),2),f=!1;else return Aa(b[g],
g);return f};G=function(){function a(b){b=fb.call(b);var f=b.length;c?(b[1]="on"+b[1],3<f&&b.pop()):3===f&&b.push(!1);return b}function b(a,d){var g=a.shift(),k=[f[d]];if(c)g[k](a[0],a[1]);else g[k].apply(g,a)}var c=window.attachEvent,f={add:c?"attachEvent":"addEventListener",remove:c?"detachEvent":"removeEventListener"};return{add:function(){b(a(arguments),"add")},remove:function(){b(a(arguments),"remove")}}}();Q={abort:n(function(){a._wD(this._s.id+": abort")}),canplay:n(function(){var b=this._s,
d;if(b._html5_canplay)return!0;b._html5_canplay=!0;a._wD(b.id+": canplay");b._onbufferchange(0);d=b._iO.position!==c&&!isNaN(b._iO.position)?b._iO.position/1E3:null;if(this.currentTime!==d){a._wD(b.id+": canplay: Setting position to "+d);try{this.currentTime=d}catch(g){a._wD(b.id+": canplay: Setting position of "+d+" failed: "+g.message,2)}}b._iO._oncanplay&&b._iO._oncanplay()}),canplaythrough:n(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),
a._onload(!0))}),durationchange:n(function(){var b=this._s,c;c=b._get_html5_duration();!isNaN(c)&&c!==b.duration&&(a._wD(this._s.id+": durationchange ("+c+")"+(b.duration?", previously "+b.duration:"")),b.durationEstimate=b.duration=c)}),ended:n(function(){var b=this._s;a._wD(b.id+": ended");b._onfinish()}),error:n(function(){a._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:n(function(){var b=this._s;a._wD(b.id+": loadeddata");!b._loaded&&!ya&&(b.duration=
b._get_html5_duration())}),loadedmetadata:n(function(){a._wD(this._s.id+": loadedmetadata")}),loadstart:n(function(){a._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:n(function(){this._s._onbufferchange(0)}),playing:n(function(){a._wD(this._s.id+": playing "+String.fromCharCode(9835));this._s._onbufferchange(0)}),progress:n(function(b){var c=this._s,d,f,g;d=0;var k="progress"===b.type,m=b.target.buffered,h=b.loaded||0,s=b.total||1;c.buffered=[];if(m&&m.length){d=0;for(f=m.length;d<
f;d++)c.buffered.push({start:1E3*m.start(d),end:1E3*m.end(d)});d=1E3*(m.end(0)-m.start(0));h=Math.min(1,d/(1E3*b.target.duration));if(k&&1<m.length){g=[];f=m.length;for(d=0;d<f;d++)g.push(1E3*b.target.buffered.start(d)+"-"+1E3*b.target.buffered.end(d));a._wD(this._s.id+": progress, timeRanges: "+g.join(", "))}k&&!isNaN(h)&&a._wD(this._s.id+": progress, "+Math.floor(100*h)+"% loaded")}isNaN(h)||(c._whileloading(h,s,c._get_html5_duration()),h&&(s&&h===s)&&Q.canplaythrough.call(this,b))}),ratechange:n(function(){a._wD(this._s.id+
": ratechange")}),suspend:n(function(b){var c=this._s;a._wD(this._s.id+": suspend");Q.progress.call(this,b);c._onsuspend()}),stalled:n(function(){a._wD(this._s.id+": stalled")}),timeupdate:n(function(){this._s._onTimer()}),waiting:n(function(){var b=this._s;a._wD(this._s.id+": waiting");b._onbufferchange(1)})};ua=function(b){return!b||!b.type&&!b.url&&!b.serverURL?!1:b.serverURL||b.type&&h(b.type)?!1:b.type?ja({type:b.type}):ja({url:b.url})||a.html5Only||b.url.match(/data\:/i)};va=function(b){var c;
b&&(c=ya?"about:blank":a.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w\x3d\x3d":"about:blank",b.src=c,void 0!==b._called_unload&&(b._called_load=!1));N&&(Ma=null);return c};ja=function(b){if(!a.useHTML5Audio||!a.hasHTML5)return!1;var d=b.url||null;b=b.type||null;var g=a.audioFormats,f;if(b&&a.html5[b]!==c)return a.html5[b]&&!h(b);if(!T){T=[];for(f in g)g.hasOwnProperty(f)&&(T.push(f),g[f].related&&(T=T.concat(g[f].related)));
T=RegExp("\\.("+T.join("|")+")(\\?.*)?$","i")}f=d?d.toLowerCase().match(T):null;!f||!f.length?b&&(d=b.indexOf(";"),f=(-1!==d?b.substr(0,d):b).substr(6)):f=f[1];f&&a.html5[f]!==c?d=a.html5[f]&&!h(f):(b="audio/"+f,d=a.html5.canPlayType({type:b}),d=(a.html5[f]=d)&&a.html5[b]&&!h(b));return d};eb=function(){function b(c){var f,g=f=!1;if(!d||"function"!==typeof d.canPlayType)return f;if(c instanceof Array){h=0;for(f=c.length;h<f;h++)if(a.html5[c[h]]||d.canPlayType(c[h]).match(a.html5Test))g=!0,a.html5[c[h]]=
!0,a.flash[c[h]]=!!c[h].match(lb);f=g}else c=d&&"function"===typeof d.canPlayType?d.canPlayType(c):!1,f=!(!c||!c.match(a.html5Test));return f}if(!a.useHTML5Audio||!a.hasHTML5)return L=a.html5.usingFlash=!0,!1;var d=Audio!==c?Pa&&10>opera.version()?new Audio(null):new Audio:null,g,f,k={},m,h;m=a.audioFormats;for(g in m)if(m.hasOwnProperty(g)&&(f="audio/"+g,k[g]=b(m[g].type),k[f]=k[g],g.match(lb)?(a.flash[g]=!0,a.flash[f]=!0):(a.flash[g]=!1,a.flash[f]=!1),m[g]&&m[g].related))for(h=m[g].related.length-
1;0<=h;h--)k["audio/"+m[g].related[h]]=k[g],a.html5[m[g].related[h]]=k[g],a.flash[m[g].related[h]]=k[g];k.canPlayType=d?b:null;a.html5=J(a.html5,k);a.html5.usingFlash=db();L=a.html5.usingFlash;return!0};R={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash \x3d true for more security details (output goes to SWF.)",
checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+w.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",
waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",
secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",
fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout \x3d 0 (infinite) for off-screen, mobile flash case",
needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",
noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};C=function(){var a,b,c,f;a=fb.call(arguments);b=a.shift();if((f=R&&R[b]?R[b]:"")&&a&&a.length){b=0;for(c=a.length;b<c;b++)f=f.replace("%s",a[b])}return f};qa=function(a){8===
v&&(1<a.loops&&a.stream)&&(B("as2loop"),a.stream=!1);return a};ra=function(b,c){if(b&&!b.usePolicyFile&&(b.onid3||b.usePeakData||b.useWaveformData||b.useEQData))a._wD((c||"")+C("policy")),b.usePolicyFile=!0;return b};S=function(b){Sa&&console.warn!==c?console.warn(b):a._wD(b)};A=function(){return!1};Ya=function(a){for(var b in a)a.hasOwnProperty(b)&&"function"===typeof a[b]&&(a[b]=A)};Ha=function(b){b===c&&(b=!1);(K||b)&&a.disable(b)};Za=function(b){var c=null;if(b)if(b.match(/\.swf(\?.*)?$/i)){if(c=
b.substr(b.toLowerCase().lastIndexOf(".swf?")+4))return b}else b.lastIndexOf("/")!==b.length-1&&(b+="/");b=(b&&-1!==b.lastIndexOf("/")?b.substr(0,b.lastIndexOf("/")+1):"./")+a.movieURL;a.noSWFCache&&(b+="?ts\x3d"+(new Date).getTime());return b};Da=function(){v=parseInt(a.flashVersion,10);8!==v&&9!==v&&(a._wD(C("badFV",v,8)),a.flashVersion=v=8);var b=a.debugMode||a.debugFlash?"_debug.swf":".swf";a.useHTML5Audio&&(!a.html5Only&&a.audioFormats.mp4.required&&9>v)&&(a._wD(C("needfl9")),a.flashVersion=
v=9);a.version=a.versionNumber+(a.html5Only?" (HTML5-only mode)":9===v?" (AS3/Flash 9)":" (AS2/Flash 8)");8<v?(a.defaultOptions=J(a.defaultOptions,a.flash9Options),a.features.buffering=!0,a.defaultOptions=J(a.defaultOptions,a.movieStarOptions),a.filePatterns.flash9=RegExp("\\.(mp3|"+ob.join("|")+")(\\?.*)?$","i"),a.features.movieStar=!0):a.features.movieStar=!1;a.filePattern=a.filePatterns[8!==v?"flash9":"flash8"];a.movieURL=(8===v?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",b);
a.features.peakData=a.features.waveformData=a.features.eqData=8<v};Wa=function(a,b){if(!t)return!1;t._setPolling(a,b)};Ga=function(){a.debugURLParam.test(l)&&(a.debugMode=!0);if(g(a.debugID))return!1;var b,c,d,f;if(a.debugMode&&!g(a.debugID)&&(!Sa||!a.useConsole||!a.consoleOnly)){b=w.createElement("div");b.id=a.debugID+"-toggle";c={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",
color:"#333",zIndex:10001};b.appendChild(w.createTextNode("-"));b.onclick=$a;b.title="Toggle SM2 debug console";r.match(/msie 6/i)&&(b.style.position="absolute",b.style.cursor="hand");for(f in c)c.hasOwnProperty(f)&&(b.style[f]=c[f]);c=w.createElement("div");c.id=a.debugID;c.style.display=a.debugMode?"block":"none";if(a.debugMode&&!g(b.id)){try{d=oa(),d.appendChild(b)}catch(k){throw Error(C("domError")+" \n"+k.toString());}d.appendChild(c)}}};D=this.getSoundById;B=function(b,c){return!b?"":a._wD(C(b),
c)};$a=function(){var b=g(a.debugID),c=g(a.debugID+"-toggle");if(!b)return!1;I?(c.innerHTML="+",b.style.display="none"):(c.innerHTML="-",b.style.display="block");I=!I};E=function(a,b,d){if(window.sm2Debugger!==c)try{sm2Debugger.handleEvent(a,b,d)}catch(f){return!1}return!0};ca=function(){var b=[];a.debugMode&&b.push("sm2_debug");a.debugFlash&&b.push("flash_debug");a.useHighPerformance&&b.push("high_performance");return b.join(" ")};Ja=function(){var b=C("fbHandler"),c=a.getMoviePercent(),d={type:"FLASHBLOCK"};
if(a.html5Only)return!1;a.ok()?(a.didFlashBlock&&a._wD(b+": Unblocked"),a.oMC&&(a.oMC.className=[ca(),"movieContainer","swf_loaded"+(a.didFlashBlock?" swf_unblocked":"")].join(" "))):(L&&(a.oMC.className=ca()+" movieContainer "+(null===c?"swf_timedout":"swf_error"),a._wD(b+": "+C("fbTimeout")+(c?" ("+C("fbLoaded")+")":""))),a.didFlashBlock=!0,V({type:"ontimeout",ignoreInit:!0,error:d}),ba(d))};Ba=function(a,b,d){z[a]===c&&(z[a]=[]);z[a].push({method:b,scope:d||null,fired:!1})};V=function(b){b||(b=
{type:a.ok()?"onready":"ontimeout"});if(!F&&b&&!b.ignoreInit||"ontimeout"===b.type&&(a.ok()||K&&!b.ignoreInit))return!1;var c={success:b&&b.ignoreInit?a.ok():!K},d=b&&b.type?z[b.type]||[]:[],f=[],g,c=[c],k=L&&!a.ok();b.error&&(c[0].error=b.error);b=0;for(g=d.length;b<g;b++)!0!==d[b].fired&&f.push(d[b]);if(f.length){b=0;for(g=f.length;b<g;b++)f[b].scope?f[b].method.apply(f[b].scope,c):f[b].method.apply(this,c),k||(f[b].fired=!0)}return!0};Z=function(){window.setTimeout(function(){a.useFlashBlock&&
Ja();V();"function"===typeof a.onload&&(B("onload",1),a.onload.apply(window),B("onloadOK",1));a.waitForWindowLoad&&G.add(window,"load",Z)},1)};Na=function(){if(P!==c)return P;var a=!1,b=navigator,d=b.plugins,f,g=window.ActiveXObject;if(d&&d.length)(b=b.mimeTypes)&&(b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.description)&&(a=!0);else if(g!==c&&!r.match(/MSAppHost/i)){try{f=new g("ShockwaveFlash.ShockwaveFlash")}catch(k){f=
null}a=!!f}return P=a};db=function(){var b,c,d=a.audioFormats;if(xa&&r.match(/os (1|2|3_0|3_1)\s/i))a.hasHTML5=!1,a.html5Only=!0,a.oMC&&(a.oMC.style.display="none");else if(a.useHTML5Audio){if(!a.html5||!a.html5.canPlayType)a._wD("SoundManager: No HTML5 Audio() support detected."),a.hasHTML5=!1;Ra&&a._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id\x3d32159 - "+(!P?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),
1)}if(a.useHTML5Audio&&a.hasHTML5)for(c in ia=!0,d)if(d.hasOwnProperty(c)&&d[c].required)if(a.html5.canPlayType(d[c].type)){if(a.preferFlash&&(a.flash[c]||a.flash[d[c].type]))b=!0}else ia=!1,b=!0;a.ignoreFlash&&(b=!1,ia=!0);a.html5Only=a.hasHTML5&&a.useHTML5Audio&&!b;return!a.html5Only};ta=function(b){var c,d,f=0;if(b instanceof Array){c=0;for(d=b.length;c<d;c++)if(b[c]instanceof Object){if(a.canPlayMIME(b[c].type)){f=c;break}}else if(a.canPlayURL(b[c])){f=c;break}b[f].url&&(b[f]=b[f].url);b=b[f]}return b};
ab=function(b){b._hasTimer||(b._hasTimer=!0,!Qa&&a.html5PollingInterval&&(null===ha&&0===sa&&(ha=setInterval(cb,a.html5PollingInterval)),sa++))};bb=function(b){b._hasTimer&&(b._hasTimer=!1,!Qa&&a.html5PollingInterval&&sa--)};cb=function(){var b;if(null!==ha&&!sa)return clearInterval(ha),ha=null,!1;for(b=a.soundIDs.length-1;0<=b;b--)a.sounds[a.soundIDs[b]].isHTML5&&a.sounds[a.soundIDs[b]]._hasTimer&&a.sounds[a.soundIDs[b]]._onTimer()};ba=function(b){b=b!==c?b:{};"function"===typeof a.onerror&&a.onerror.apply(window,
[{type:b.type!==c?b.type:null}]);b.fatal!==c&&b.fatal&&a.disable()};gb=function(){if(!Ra||!Na())return!1;var b=a.audioFormats,c,d;for(d in b)if(b.hasOwnProperty(d)&&("mp3"===d||"mp4"===d))if(a._wD("soundManager: Using flash fallback for "+d+" format"),a.html5[d]=!1,b[d]&&b[d].related)for(c=b[d].related.length-1;0<=c;c--)a.html5[b[d].related[c]]=!1};this._setSandboxType=function(b){var d=a.sandbox;d.type=b;d.description=d.types[d.types[b]!==c?b:"unknown"];"localWithFile"===d.type?(d.noRemote=!0,d.noLocal=
!1,B("secNote",2)):"localWithNetwork"===d.type?(d.noRemote=!1,d.noLocal=!0):"localTrusted"===d.type&&(d.noRemote=!1,d.noLocal=!1)};this._externalInterfaceOK=function(b){if(a.swfLoaded)return!1;var c;E("swf",!0);E("flashtojs",!0);a.swfLoaded=!0;za=!1;Ra&&gb();if(!b||b.replace(/\+dev/i,"")!==a.versionNumber.replace(/\+dev/i,""))return c='soundManager: Fatal: JavaScript file build "'+a.versionNumber+'" does not match Flash SWF build "'+b+'" at '+a.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(c);
},0),!1;setTimeout(s,U?100:1)};pa=function(b,d){function k(){var b=[],c,f=[];c="SoundManager "+a.version+(!a.html5Only&&a.useHTML5Audio?a.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");a.html5Only?a.html5PollingInterval&&b.push("html5PollingInterval ("+a.html5PollingInterval+"ms)"):(a.preferFlash&&b.push("preferFlash"),a.useHighPerformance&&b.push("useHighPerformance"),a.flashPollingInterval&&b.push("flashPollingInterval ("+a.flashPollingInterval+"ms)"),a.html5PollingInterval&&b.push("html5PollingInterval ("+
a.html5PollingInterval+"ms)"),a.wmode&&b.push("wmode ("+a.wmode+")"),a.debugFlash&&b.push("debugFlash"),a.useFlashBlock&&b.push("flashBlock"));b.length&&(f=f.concat([b.join(" + ")]));a._wD(c+(f.length?" + "+f.join(", "):""),1);hb()}function f(a,b){return'\x3cparam name\x3d"'+a+'" value\x3d"'+b+'" /\x3e'}if(H&&O)return!1;if(a.html5Only)return Da(),k(),a.oMC=g(a.movieID),s(),O=H=!0,!1;var m=d||a.url,h=a.altURL||m,t=oa(),q=ca(),v=null,v=w.getElementsByTagName("html")[0],n,l,u,v=v&&v.dir&&v.dir.match(/rtl/i);
b=b===c?a.id:b;Da();a.url=Za(ka?m:h);d=a.url;a.wmode=!a.wmode&&a.useHighPerformance?"transparent":a.wmode;if(null!==a.wmode&&(r.match(/msie 8/i)||!U&&!a.useHighPerformance)&&navigator.platform.match(/win32|win64/i))X.push(R.spcWmode),a.wmode=null;t={name:b,id:b,src:d,quality:"high",allowScriptAccess:a.allowScriptAccess,bgcolor:a.bgColor,pluginspage:mb+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:a.wmode,hasPriority:"true"};
a.debugFlash&&(t.FlashVars="debug\x3d1");a.wmode||delete t.wmode;if(U)m=w.createElement("div"),l=['\x3cobject id\x3d"'+b+'" data\x3d"'+d+'" type\x3d"'+t.type+'" title\x3d"'+t.title+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase\x3d"'+mb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version\x3d6,0,40,0"\x3e',f("movie",d),f("AllowScriptAccess",a.allowScriptAccess),f("quality",t.quality),a.wmode?f("wmode",a.wmode):"",f("bgcolor",a.bgColor),f("hasPriority","true"),
a.debugFlash?f("FlashVars",t.FlashVars):"","\x3c/object\x3e"].join("");else for(n in m=w.createElement("embed"),t)t.hasOwnProperty(n)&&m.setAttribute(n,t[n]);Ga();q=ca();if(t=oa())if(a.oMC=g(a.movieID)||w.createElement("div"),a.oMC.id)u=a.oMC.className,a.oMC.className=(u?u+" ":"movieContainer")+(q?" "+q:""),a.oMC.appendChild(m),U&&(n=a.oMC.appendChild(w.createElement("div")),n.className="sm2-object-box",n.innerHTML=l),O=!0;else{a.oMC.id=a.movieID;a.oMC.className="movieContainer "+q;n=q=null;a.useFlashBlock||
(a.useHighPerformance?q={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(q={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},v&&(q.left=Math.abs(parseInt(q.left,10))+"px")));qb&&(a.oMC.style.zIndex=1E4);if(!a.debugFlash)for(u in q)q.hasOwnProperty(u)&&(a.oMC.style[u]=q[u]);try{U||a.oMC.appendChild(m),t.appendChild(a.oMC),U&&(n=a.oMC.appendChild(w.createElement("div")),n.className="sm2-object-box",n.innerHTML=l),O=!0}catch(z){throw Error(C("domError")+
" \n"+z.toString());}}H=!0;k();return!0};na=function(){if(a.html5Only)return pa(),!1;if(t)return!1;if(!a.url)return B("noURL"),!1;t=a.getMovie(a.id);t||(fa?(U?a.oMC.innerHTML=Ia:a.oMC.appendChild(fa),fa=null,H=!0):pa(a.id,a.url),t=a.getMovie(a.id));"function"===typeof a.oninitmovie&&setTimeout(a.oninitmovie,1);Oa();return!0};aa=function(){setTimeout(Va,1E3)};Ca=function(){window.setTimeout(function(){S("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");
a.setup({preferFlash:!1}).reboot();a.didFlashBlock=!0;a.beginDelayedInit()},1)};Va=function(){var b,c=!1;if(!a.url||ga)return!1;ga=!0;G.remove(window,"load",aa);if(P&&za&&!Ta)return B("waitFocus"),!1;F||(b=a.getMoviePercent(),0<b&&100>b&&(c=!0));setTimeout(function(){b=a.getMoviePercent();if(c)return ga=!1,a._wD(C("waitSWF")),window.setTimeout(aa,1),!1;F||(a._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+
(a.debugFlash?" "+C("checkSWF"):""),2),!ka&&b&&(B("localFail",2),a.debugFlash||B("tryDebug",2)),0===b&&a._wD(C("swf404",a.url),1),E("flashtojs",!1,": Timed out"+ka?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"));!F&&kb&&(null===b?a.useFlashBlock||0===a.flashLoadTimeout?(a.useFlashBlock&&Ja(),B("waitForever")):!a.useFlashBlock&&ia?Ca():(B("waitForever"),V({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===a.flashLoadTimeout?B("waitForever"):!a.useFlashBlock&&
ia?Ca():Ha(!0))},a.flashLoadTimeout)};ma=function(){if(Ta||!za)return G.remove(window,"focus",ma),!0;Ta=kb=!0;B("gotFocus");ga=!1;aa();G.remove(window,"focus",ma);return!0};Oa=function(){X.length&&(a._wD("SoundManager 2: "+X.join(" "),1),X=[])};hb=function(){Oa();var b,c=[];if(a.useHTML5Audio&&a.hasHTML5){for(b in a.audioFormats)a.audioFormats.hasOwnProperty(b)&&c.push(b+" \x3d "+a.html5[b]+(!a.html5[b]&&L&&a.flash[b]?" (using flash)":a.preferFlash&&a.flash[b]&&L?" (preferring flash)":!a.html5[b]?
" ("+(a.audioFormats[b].required?"required, ":"")+"and no flash support)":""));a._wD("SoundManager 2 HTML5 support: "+c.join(", "),1)}};da=function(b){if(F)return!1;if(a.html5Only)return B("sm2Loaded",1),F=!0,Z(),E("onload",!0),!0;var c=!0,d;if(!a.useFlashBlock||!a.flashLoadTimeout||a.getMoviePercent())F=!0;d={type:!P&&L?"NO_FLASH":"INIT_TIMEOUT"};a._wD("SoundManager 2 "+(K?"failed to load":"loaded")+" ("+(K?"Flash security/load error":"OK")+") "+String.fromCharCode(K?10006:10003),K?2:1);K||b?(a.useFlashBlock&&
a.oMC&&(a.oMC.className=ca()+" "+(null===a.getMoviePercent()?"swf_timedout":"swf_error")),V({type:"ontimeout",error:d,ignoreInit:!0}),E("onload",!1),ba(d),c=!1):E("onload",!0);K||(a.waitForWindowLoad&&!la?(B("waitOnload"),G.add(window,"load",Z)):(a.waitForWindowLoad&&la&&B("docLoaded"),Z()));return c};x=function(){var b,d=a.setupOptions;for(b in d)d.hasOwnProperty(b)&&(a[b]===c?a[b]=d[b]:a[b]!==d[b]&&(a.setupOptions[b]=a[b]))};s=function(){if(F)return B("didInit"),!1;if(a.html5Only)return F||(G.remove(window,
"load",a.beginDelayedInit),a.enabled=!0,da()),!0;na();try{t._externalInterfaceTest(!1),Wa(!0,a.flashPollingInterval||(a.useHighPerformance?10:50)),a.debugMode||t._disableDebug(),a.enabled=!0,E("jstoflash",!0),a.html5Only||G.add(window,"unload",A)}catch(b){return a._wD("js/flash exception: "+b.toString()),E("jstoflash",!1),ba({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Ha(!0),da(),!1}da();G.remove(window,"load",a.beginDelayedInit);return!0};W=function(){if(ea)return!1;ea=!0;x();Ga();var b=null,b=null,
c=l.toLowerCase();-1!==c.indexOf("sm2-usehtml5audio\x3d")&&(b="1"===c.charAt(c.indexOf("sm2-usehtml5audio\x3d")+18),a.setup({useHTML5Audio:b}));-1!==c.indexOf("sm2-preferflash\x3d")&&(b="1"===c.charAt(c.indexOf("sm2-preferflash\x3d")+16),a.setup({preferFlash:b}));!P&&a.hasHTML5&&(a._wD("SoundManager 2: No Flash detected"+(!a.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1),a.setup({useHTML5Audio:!0,preferFlash:!1}));eb();!P&&L&&(X.push(R.needFlash),a.setup({flashLoadTimeout:1}));
w.removeEventListener&&w.removeEventListener("DOMContentLoaded",W,!1);na();return!0};La=function(){"complete"===w.readyState&&(W(),w.detachEvent("onreadystatechange",La));return!0};Fa=function(){la=!0;W();G.remove(window,"load",Fa)};Ea=function(){if(Qa&&((!a.setupOptions.useHTML5Audio||a.setupOptions.preferFlash)&&X.push(R.mobileUA),a.setupOptions.useHTML5Audio=!0,a.setupOptions.preferFlash=!1,xa||jb&&!r.match(/android\s2\.3/i)))X.push(R.globalHTML5),xa&&(a.ignoreFlash=!0),N=!0};Ea();Na();G.add(window,
"focus",ma);G.add(window,"load",aa);G.add(window,"load",Fa);w.addEventListener?w.addEventListener("DOMContentLoaded",W,!1):w.attachEvent?w.attachEvent("onreadystatechange",La):(E("onload",!1),ba({type:"NO_DOM2_EVENTS",fatal:!0}))}var c=void 0;if(!window||!window.document)throw Error("SoundManager requires a browser with window and document objects.");var h=null;if(void 0===window.SM2_DEFER||!SM2_DEFER)h=new l;window.SoundManager=l;return window.soundManager=h})},"app/vm/Preview":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin app/widget/preview/slider app/util/pdfobject dojo/text!./tpl/preview.html dojo/_base/kernel app/widget/preview/PreviewInfo".split(" "),
function(l,c,h,d,b,u,n,q,a,k,t){return l("app/vm/Preview",[b,u],{templateString:a,item:null,currentIndex:0,SliderComps:null,postMixInProperties:function(){},postCreate:function(){this.inherited(arguments);this._initComps();this._initEvent();d.set(document.body,"overflow","hidden")},destroy:function(){this.inherited(arguments);this.SliderComps&&this.SliderComps.destroy();d.set(document.body,"overflow","")},_initComps:function(){var a=this.model,b=this.from,d=this.url;if("file"==b)k.removeClass(this.rightBox,
"hide"),this._showFileBox(),this._onViewFile({uri:this.url,fileName:this.fileName}),this.info=(new t({owner:this,parent:this.rightBox,model:a,from:"image"!=b,onPictureClick:c.hitch(this,this._onViewFileImage),onFileClick:c.hitch(this,this._onViewFile),onNotSupportFileClick:c.hitch(this,this._onNotSupport)})).placeAt(this.rightBox);else if("fileImage"==b)k.removeClass(this.rightBox,"hide"),this._showFileBox(),this._onViewFileImage({uri:this.url,sizeInfo:{},fileName:this.fileName}),this.info=(new t({owner:this,
parent:this.rightBox,model:a,from:"image"!=b,onPictureClick:c.hitch(this,this._onViewFileImage),onFileClick:c.hitch(this,this._onViewFile),onNotSupportFileClick:c.hitch(this,this._onNotSupport)})).placeAt(this.rightBox);else{this._showImageBox();if("image"==b){this.current={url:d,type:"image"};a=0;for(b=this.item.length;a<b;a++)this.item[a].sizeInfo||(this.item[a].sizeInfo={name:a,suffix:this.item[a].fileType,height:200,width:200})}else this.current={url:d,type:"file"},this.item=[{uri:this.url,sizeInfo:"{}"}];
this.SliderComps=(new n({images:this.item,currentIndex:this.currentIndex})).placeAt(this.imgViewNode)}},_initEvent:function(){this.own(h(this.closeNode,"click",c.hitch(this,this._closeHandler)),h(this.fileDownloadNode,"click",c.hitch(this,this._onDownLoad)))},_onDownLoad:function(a){a=this.current;App.download(a.url+"\x26fileName\x3d"+encodeURI(a.fileName||this.fileName))},_onViewFileImage:function(a){k.addClass(this.imgViewNode,"fileView");this.pdf=null;var b={uri:a.uri,sizeInfo:{name:a.name},fileName:a.fileName};
this.current={url:a.uri,type:"file",fileName:a.name};this._showImageBox();this.slider?(this.slider.images=[b],this.slider.updateFileImg(b)):this.slider=(new n({images:[b],currentIndex:0,isFileImage:!0})).placeAt(this.imgViewNode);this._showImageBox()},_onViewFile:function(a){this.current={url:a.uri,type:"file",fileName:a.name||a.fileName};this._showFileBox();this.createFileView(a)},createFileView:function(a){var b=dojo.isIE;url=a.uri+(-1<a.uri.lastIndexOf(".pdf")?"":".pdf");var c=url.substr(0,url.length-
4);b&&9>b?this.flashNode.innerHTML='\x3cp class\x3d"un_pdf" style\x3d"color:#fff;text-align:center;"\x3eIE8\u6682\u4e0d\u652f\u6301\u9644\u4ef6\u9884\u89c8\uff0c\u5efa\u8bae\u60a8\u5347\u7ea7\u81f3IE9\u4ee5\u4e0a\u6216 \x3ca target\x3d"_blank" href\x3d"'+URL.attachmentDownload+"?url\x3d"+c+"\x26fileName\x3d"+encodeURI(a.fileName)+'" style\x3d"color:#7E7E7F;"\x3e\u70b9\u51fb\u6b64\u5904\u4e0b\u8f7d\u6587\u6863\x3c/a\x3e \x3c/p\x3e':(this.pdf=(new q({url:url,pdfOpenParams:{view:"FitH",pagemode:"thumbs",
search:"pdfobject",messages:0,navpanes:1,scrollbars:1,toolbar:0,statusbar:0}})).embed(this.flashNode),this.pdf||(this.flashNode.innerHTML='\x3cp class\x3d"un_pdf" style\x3d"color:#fff;text-align:center;"\x3e\u60a8\u4f3c\u4e4e\u5e76\u672a\u5b89\u88c5 Adobe Reader \u6216\u8005 \u6d4f\u89c8\u5668\u652f\u6301 PDF \u63d2\u4ef6. \x3ca target\x3d"_blank" href\x3d"'+URL.attachmentDownload+"?url\x3d"+c+"\x26fileName\x3d"+encodeURI(a.fileName)+'"\x3e\u70b9\u51fb\u6b64\u5904\u4e0b\u8f7d\u6b64\u6587\u4ef6\x3c/a\x3e \x3c/p\x3e'))},
_showImageBox:function(){dojo.style(this.fileViewNode,{display:"none"});dojo.style(this.imgViewNode,{display:""})},_showFileBox:function(){dojo.style(this.imgViewNode,{display:"none"});dojo.style(this.fileViewNode,{display:""})},_onNotSupport:function(a){this._showFileBox();this.flashNode.innerHTML='\x3cdiv class\x3d"tw_imgMain tw_clueImg"\x3e\x3cimg src\x3d"'+App.imagePath+'/clueImg.png"\x3e\x3c/div\x3e';this.current={url:a.uri,type:"file"}},_closeHandler:function(){this.destroy()}})})},"app/widget/preview/slider":function(){define("dojo/_base/declare dojo/query dojo/_base/lang dojo/on dojo/dnd/move ./imageRotate dojo/json dojo/_base/fx dojo/fx/easing dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/photoSilder.html".split(" "),
function(l,c,h,d,b,u,n,q,a,k,t,m,g){var r=Math.max,y=Math.min,w=window.setTimeout,A=window.clearTimeout,x=dojo.isFF?"DOMMouseScroll":"mousewheel";return l("app.view.slider",[t,m,k],{currentIndex:0,isFileImage:!1,forward:"right",speed:4E3,autoPlay:!1,isStop:!0,hideTime:4E3,hideTimer:null,model:null,templateString:g,currentData:null,angle:0,tempImage:null,tempMove:null,imgMove:null,zoomLocked:!1,postMixInProperties:function(){this.image=new Image;this.prevSize={totalW:0,singleW:0,isOverflow:!1,visibleW:0}},
postCreate:function(){this.init()},init:function(){var a=this;this.imageContent.appendChild(this.image);this.domNode.setAttribute("tabIndex",-1);this.domNode.setAttribute("hidefocus",!0);this.domNode.onselectstart=function(){return!1};this.domNode.ondblclick=function(){var a=document.selection;a?a.empty():window.getSelection().removeAllRanges();return!1};this.initCurrentPhoto();this.isFileImage||(this.createPreviewPhotos(),w(function(){a.initPreviewPhoto()},50),this.updateCount());this.setButtonStatus();
this.bind();this.imgMove=new dojo.dnd.Moveable(this.image)},updateFileImg:function(a){this.isFileImage=!0;dojo.setStyle(this.btnPrevBig,{display:"none"});dojo.setStyle(this.btnNextBig,{display:"none"});this.imageCount.innerHTML="";this.hidePrevBar();this.initCurrentPhoto(a)},createPreviewPhotos:function(){var a=[],b,c,d="";a.push("\x3cul\x3e");for(var g=this.images,k=0,h=g.length;k<h;k++)b=g[k],d=this.currentIndex==k?"tw_smallImgCur":"wk_tmBg",b.sizeInfo=c="string"==typeof b.sizeInfo?n.parse(b.sizeInfo):
b.sizeInfo,b=b.oldData?b.url:b.uri+".small."+c.suffix,a.push('\x3cli index\x3d"'+k+'"\x3e\x3ca\x3e\x3cimg src\x3d"'+b+'"\x3e\x3cem\x3e\x3c/em\x3e\x3cspan class\x3d"'+d+'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/li\x3e');a.push("\x3c/ul\x3e");this.prevPhotos.innerHTML=a.join("")},initPreviewPhoto:function(){if(!this.isFileImage){var a=dojo.position(this.domNode).w;c(this.prevBar).children();var b=c("ul",this.prevPhotos)[0],d=0,g,k,h=0;dojo.forEach(b.children,function(a){d+=parseInt(dojo.marginBox(a).w,10);
h||(h=parseInt(dojo.marginBox(a).w,10))});k=g=d;dojo.setStyle(b,{width:d+"px",overflow:"hidden",position:"relative"});dojo.setStyle(this.btnPrevSmall,{display:"block"});dojo.setStyle(this.btnNextSmall,{display:"block"});a<d?(k=a-dojo.getMarginBox(this.btnPrevSmall).w-dojo.getMarginBox(this.btnNextSmall).w,g=a):(dojo.setStyle(this.btnPrevSmall,{display:"none"}),dojo.setStyle(this.btnNextSmall,{display:"none"}));this.prevSize={totalW:d,singleW:h,isOverflow:a<d,visibleW:k};dojo.setStyle(this.prevBar,
{width:g+"px"});dojo.setStyle(this.prevPhotos,{width:k+"px",overflow:"hidden",margin:"0 auto"});this.setPrevPhotoPos()}},updateCount:function(){this.imageCount.innerHTML=this.currentIndex+1+"/"+this.images.length},setPrevBar:function(){if(!this.isFileImage){var a=this;this.hideTimer=w(function(){a.hidePrevBar()},this.hideTime)}},hidePrevBar:function(){this.animate2=q.animateProperty({node:this.prevBar,properties:{opacity:{start:1,end:0}},onEnd:function(a){a.style.display="none"},duration:600}).play()},
showOriginalPic:function(a){this.showOriginal.href=this.currentData.uri},showToggleSize:function(){this.displayImagePos(this.tempImage||this.image)},showPrevBar:function(){q.fadeIn({node:this.prevBar}).play();this.prevBar.style.display=""},setAnimation:function(b,c,d){var g=this;this.animate=q.animateProperty({node:b,properties:c,onEnd:function(a){d&&"function"==typeof d&&d.apply(g,arguments)},easing:a.linear,duration:400});this.animate.play()},displayImagePos:function(a,b){var c=dojo.position(this.imageContent),
d=this.currentData.sizeInfo,g=d.width,k=d.height;if(1==this.angle||3==this.angle)g=d.height,k=d.width;var h=c.w/c.h,m=g/k;if(!b&&(c.w<d.width||c.h<d.height))h<m?(m=g/c.w,g=c.w,k/=m):(m=k/c.h,k=c.h,g/=m);dojo.setStyle(a,{position:"absolute",top:c.h/2+"px",left:c.w/2+"px",width:g+"px",height:k+"px",cursor:"move",marginTop:-1*(k/2)+"px",marginLeft:-1*(g/2)+"px"})},initCurrentPhoto:function(a){this.currentData=a=a||this.images[r(this.currentIndex,0)];"string"==typeof this.currentData.sizeInfo&&(this.currentData.sizeInfo=
n.parse(this.currentData.sizeInfo));var b=this,c=b.currentData.sizeInfo,d=a.uri;if(a)if(c.width&&c.height)this.loadPhoto(d);else{var g=new Image;g.onload=function(){b.currentData.sizeInfo.width=this.width;b.currentData.sizeInfo.height=this.height;g=g.onload=null;b.loadPhoto(d)};g.src=d}},loadPhoto:function(a){var b=this;dojo.setStyle(this.image,{opacity:0});this.image.onload=function(){b.animate&&b.animate.stop();b.displayImagePos(b.image);q.fadeIn({node:b.image}).play();b.image.onload=null};if(this.image.src==
a)this.image.onload();else this.image.src=a},changePhoto:function(){var a={},b=this,c=parseInt(this.image.style.marginLeft,10)||0,d="left"==this.forward?-80:80;this.angle=0;dojo.setStyle(this.image,"display","");this.destroyTempImage();a.opacity={start:1,end:0};a.marginLeft={start:c,end:c+d,unit:"px"};this.image.removeAttribute("large");this.setResizeBtn("small");this.setAnimation(this.image,a,function(){b.initCurrentPhoto()});this.updateCount()},bind:function(){this.own(d(this.btnPrevSmall,"click",
h.hitch(this,this.prev)),d(this.btnPrevBig,"click",h.hitch(this,this.prev)),d(this.btnNextSmall,"click",h.hitch(this,this.next)),d(this.btnNextBig,"click",h.hitch(this,this.next)),d(this.prevPhotos,"click",h.hitch(this,this.onSelected)),d(this.turnRight,"click",h.hitch(this,this.onTurnRigh)),d(window,"resize",h.hitch(this,this.onResize)),d(this.resizeBtn,"click",h.hitch(this,this.resizeImage)),d(document,"keyup",h.hitch(this,this.onKeyup)),d(this.image,x,h.hitch(this,this.onMouseWheel)),d(this.showOriginal,
"click",h.hitch(this,this.showOriginalPic)),d(this.downloadImage,"click",h.hitch(this,this.downloadPhoto)))},resizeImage:function(a){var b=this.resizeBtn.getAttribute("rel");"large"==b?this.showLargeImg():this.showToggleSize();this.setResizeBtn(b);dojo.stopEvent(a)},setResizeBtn:function(a){var b=this.resizeBtn,c="tw_originalIcon",d="\u539f\u59cb\u5c3a\u5bf8",g="large";"large"==a&&(g="small",c="tw_thumbIcon",d="\u9002\u5e94\u9875\u9762");b.setAttribute("rel",g);b.setAttribute("title",d);b.className=
c},downloadPhoto:function(a){var b=this.images[this.currentIndex],c="",c=b.item?b.item.fileName:b.fileName;App.download(b.uri+"\x26fileName\x3d"+encodeURI(c));dojo.stopEvent(a)},showLargeImg:function(){this.setOriginalImg();this.displayImagePos(this.tempImage||this.image,!0)},setZoomSize:function(a){var b=this;this.zoomTimer&&(A(this.zoomTimer),this.zoomTimer=null);this.zoomSizeTip.innerHTML="\x3cspan\x3e"+a+"\x3c/span\x3e";dojo.setStyle(this.zoomSizeTip,{display:"",zIndex:1,opacity:0.5,textAlign:"center"});
this.zoomTimer=w(function(){dojo.setStyle(b.zoomSizeTip,{display:"none"})},500)},onResize:function(){var a=this;dojo.setStyle(this.prevBar,{display:""});w(function(){a.displayImagePos(a.tempImage||a.image);a.initPreviewPhoto();a.setResizeBtn("small")},100)},onMouseWheel:function(a){var b=a.target,c=0<(a.wheelDelta||a.detail)?10:-10;dojo.isFF&&(c=-c);this.zoomImage(b,c,{x:a.offsetX,y:a.offsetY});dojo.stopEvent(a)},setOriginalImg:function(){if(!this.image.getAttribute("large")&&!this.isFileImage){var a=
this.currentIndex,b=new Image,c=this;b.onload=function(){a==c.currentIndex&&(c.image.src=b.src);b=b.onload=null};b.src=this.currentData.uri;this.image.setAttribute("large","true")}},zoomImage:function(a,b,c){var d=this.currentData.sizeInfo.width,g=this.currentData.sizeInfo.height;this.zoomLocked=!0;this.setOriginalImg();if(1==this.angle||3==this.angle)d=g,g=this.currentData.sizeInfo.width;var k=Math.round(d*(b/100)),h=Math.round(g*(b/100));b=a.clientWidth;var m=a.clientHeight,h=m+h,k=r(b+k,0.1*d),
k=y(k,5*d),k=Math.round(k),h=r(h,0.1*g),h=y(h,5*g),h=Math.round(h),d=Math.round(100*(k/d)),t=parseInt(a.style.left,10)||0,g=parseInt(a.style.top,10)||0,t=t-Math.round(c.x*k/b-c.x);c=g-Math.round(c.y*h/m-c.y);k!=b&&(dojo.setStyle(a,{width:k+"px",height:h+"px",top:c+"px",left:t+"px"}),this.setZoomSize(d+"%"))},destroyTempImage:function(){this.tempImage&&(c(this.tempImage).remove(),this.tempImage=null);this.tempMove&&(this.tempMove.destroy(),this.tempMove=null);this.tempZoom&&(this.tempZoom.remove(),
this.tempZoom=null)},onTurnRigh:function(a){this.angle++;this.destroyTempImage();4<=this.angle?(this.displayImagePos(this.image),dojo.setStyle(this.image,"display",""),this.angle=0):(this.setResizeBtn("small"),this.tempImage=u(this.angle,this.image,this.currentData.sizeInfo),this.imageContent.appendChild(this.tempImage),this.displayImagePos(this.tempImage),this.tempMove=new dojo.dnd.Moveable(this.tempImage),this.tempZoom=d(this.tempImage,x,h.hitch(this,this.onMouseWheel)),dojo.setStyle(this.image,
"display","none"),dojo.stopEvent(a))},onKeyup:function(a){var b=a.keyCode;37==b?this.prev(a):39==b&&this.next(a)},onMousemove:function(){this.isFileImage||(this.showPrevBar(),A(this.hideTimer),this.setPrevBar())},onSelected:function(a){var b=c(a.target).closest("li")[0];b&&(b=parseInt(b.getAttribute("index"),10),this.currentIndex!=b&&(this.forward=this.currentIndex<b?"left":"right",this.currentIndex=b,this.changePhoto(),this.setButtonStatus(),this.setPrevPhotoPos()));dojo.stopEvent(a)},prev:function(a){!this.isFileImage&&
!(1>this.currentIndex)&&(this.forward="right",this.currentIndex=r(--this.currentIndex,0),this.changePhoto(),this.setButtonStatus(),this.setPrevPhotoPos(),dojo.stopEvent(a))},next:function(a){!this.isFileImage&&!(this.currentIndex>=this.images.length-1)&&(this.forward="left",this.currentIndex=y(this.images.length-1,++this.currentIndex),this.changePhoto(),this.setButtonStatus(),this.setPrevPhotoPos(),dojo.stopEvent(a))},setPrevPhotoPos:function(){var a=c(this.prevPhotos).query("li[index\x3d"+this.currentIndex+
"]")[0],b=c("span",a)[0],d=c(this.prevPhotos).query("span.tw_smallImgCur")[0],g=c(a).closest("ul")[0];d&&(d.className="wk_tmBg");b&&(b.className="tw_smallImgCur");this.prevSize.isOverflow&&(b=Math.round(this.prevSize.visibleW/this.prevSize.singleW/2)*this.prevSize.singleW,d=dojo.position(a).x-dojo.position(this.prevPhotos).x,a=parseInt(g.style.marginLeft,10)||0,b=y(0,a+b-d),b=r(b,this.prevSize.visibleW-this.prevSize.totalW),a!=b&&(this.animate1=q.animateProperty({node:g,properties:{marginLeft:{start:a,
end:b}},onEnd:function(a){},duration:400}).play()))},setButtonStatus:function(){var a=this.images.length;1>=a?(dojo.setStyle(this.btnPrevBig,{display:"none"}),dojo.setStyle(this.btnNextBig,{display:"none"})):0==this.currentIndex?(dojo.addClass(this.btnPrevBig,"tw_prevDisable"),dojo.removeClass(this.btnNextBig,"tw_nextDisable")):this.currentIndex==a-1?(dojo.addClass(this.btnNextBig,"tw_nextDisable"),dojo.removeClass(this.btnPrevBig,"tw_prevDisable")):(dojo.removeClass(this.btnPrevBig,"tw_prevDisable"),
dojo.removeClass(this.btnNextBig,"tw_nextDisable"))},destroy:function(){this.currentIndex=0;this.isFileImage=!1;this.isStop=!0;this.currentData=this.model=null;this.angle=0;this.tempImage=null;this.tempMove&&(this.tempMove.destroy(),this.tempMove=null);this.imgMove&&(this.imgMove.destroy(),this.imgMove=null);this.zoomLocked=!1;A(this.hideTimer);this.animate&&this.animate.stop();this.animate1&&this.animate1.stop();this.animate2&&this.animate2.stop();this.inherited(arguments)}})})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),
function(l,c,h,d,b,u){d=l("dojo.dnd.move.constrainedMoveable",u,{constraints:function(){},within:!1,constructor:function(b,c){c||(c={});this.constraints=c.constraints;this.within=c.within},onFirstMove:function(b){var d=this.constraintBox=this.constraints.call(this,b);d.r=d.l+d.w;d.b=d.t+d.h;this.within&&(b=c.getMarginSize(b.node),d.r-=b.w,d.b-=b.h)},onMove:function(b,c){var a=this.constraintBox,d=b.node.style;this.onMoving(b,c);c.l=c.l<a.l?a.l:a.r<c.l?a.r:c.l;c.t=c.t<a.t?a.t:a.b<c.t?a.b:c.t;d.left=
c.l+"px";d.top=c.t+"px";this.onMoved(b,c)}});b=l("dojo.dnd.move.boxConstrainedMoveable",d,{box:{},constructor:function(b,c){var a=c&&c.box;this.constraints=function(){return a}}});l=l("dojo.dnd.move.parentConstrainedMoveable",d,{area:"content",constructor:function(b,d){var a=d&&d.area;this.constraints=function(){var b=this.node.parentNode,d=h.getComputedStyle(b),m=c.getMarginBox(b,d);if("margin"==a)return m;var g=c.getMarginExtents(b,d);m.l+=g.l;m.t+=g.t;m.w-=g.w;m.h-=g.h;if("border"==a)return m;
g=c.getBorderExtents(b,d);m.l+=g.l;m.t+=g.t;m.w-=g.w;m.h-=g.h;if("padding"==a)return m;g=c.getPadExtents(b,d);m.l+=g.l;m.t+=g.t;m.w-=g.w;m.h-=g.h;return m}}});return{constrainedMoveable:d,boxConstrainedMoveable:b,parentConstrainedMoveable:l}})},"app/widget/preview/imageRotate":function(){define(["dojo/query"],function(l){var c=function(){var c=document.createElement("canvas");try{c.getContext("2d")}catch(d){return!1}return!0}();return function(h,d,b,l){var n=90*h%360;h=0<=n?Math.PI*n/180:Math.PI*
(360+n)/180;var q=Math.cos(h),a=Math.sin(h);c?(l=l||document.createElement("canvas"),90==Math.abs(n)||270==Math.abs(n)?(l.style.width=l.width=b.height,l.style.height=l.height=b.width):(l.style.width=l.width=b.width,l.style.height=l.height=b.height),n=l.getContext("2d"),n.save(),h<=Math.PI/2?n.translate(a*b.height,0):h<=Math.PI?n.translate(l.width,-q*b.height):h<=1.5*Math.PI?n.translate(-q*b.width,l.height):n.translate(0,-a*b.width),n.rotate(h),n.drawImage(d,0,0,b.width,b.height),n.restore()):(l=l||
document.createElement("img"),l.src=d.src,90==Math.abs(n)||270==Math.abs(n)?(l.style.height=b.height,l.style.width=b.width):(l.style.width=b.width,l.style.height=b.height),l.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11\x3d"+q+",M12\x3d"+-a+",M21\x3d"+a+",M22\x3d"+q+",SizingMethod\x3d'auto expand')");return l}})},"app/util/pdfobject":function(){define([],function(){return function(l){if(!l||!l.url)return!1;var c=l.id||!1,h=l.width||"100%",d=l.height||"100%",b=l.pdfOpenParams,u,n;u=encodeURI(l.url)+
"#"+function(b){var a="",c;if(!b)return a;for(c in b)b.hasOwnProperty(c)&&(a+=c+"\x3d",a="search"===c?a+encodeURI(b[c]):a+b[c],a+="\x26");return a.slice(0,a.length-1)}(b);n=function(){var b=null,a;a:{var c=navigator.plugins,d=c.length,h=/Adobe Reader|Adobe PDF|Acrobat/gi;for(a=0;a<d;a++)if(h.test(c[a].name)){a=!0;break a}a=!1}if(!a)a:{a=null;if(window.ActiveXObject&&((a=new ActiveXObject("AcroPDF.PDF"))||(a=new ActiveXObject("PDF.PdfCtrl")),null!==a)){a=!0;break a}a=!1}a?b="Adobe":(a=navigator.mimeTypes["application/pdf"])&&
a.enabledPlugin&&(b="generic");return b}();this.get=function(l){var a=null;switch(l){case "url":a=u;break;case "id":a=c;break;case "width":a=h;break;case "height":a=d;break;case "pdfOpenParams":a=b;break;case "pluginTypeFound":a=n;break;case "pdfobjectversion":a="1.2"}return a};this.embed=function(b){var a;a:if(n){a=null;if(b){if(a=b.nodeType&&1===b.nodeType?b:document.getElementById(b),!a){a=!1;break a}}else{a=document.body;if(b=document.getElementsByTagName("html")){b=b[0].style;var c=document.body.style;
b.height="100%";b.overflow="hidden";c.margin="0";c.padding="0";c.height="100%";c.overflow="hidden"}d=h="100%"}a.innerHTML='\x3cobject\tdata\x3d"'+u+'" type\x3d"application/pdf" width\x3d"'+h+'" height\x3d"'+d+'"\x3e\x3c/object\x3e';a=a.getElementsByTagName("object")[0]}else a=!1;return a};return this}})},"app/widget/preview/PreviewInfo":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/previewInfo.html chanjet/util/query dojo/on dojo/_base/array dojo/_base/lang dojo/date/locale".split(" "),
function(l,c,h,d,b,u,n,q,a){return l("app.widget.preview.PreviewInfo",[c,h],{templateString:d,postMixInProperties:function(){this.title=this.model.title},postCreate:function(){var c=this.files=this.model.files,d="";n.forEach(c,function(b,c){var k=App._getFileIcon("."+b.fileType),h=1==c%2?"even":"odd",l="\u4e0a\u4f20\u8005\uff1a"+App.escape(b.createdBy.name),q=a.format(new Date(b.createdDate),{selector:"date",datePattern:"yyyy-M-d"});d+='\x3cli class\x3d"wk_ptList '+h+'" url\x3d"'+b.fileDir+'"\x3e\x3ca title\x3d"'+
b.fileName+"."+b.fileType+'"\x3e\x3cspan class\x3d"wk_fjSize '+k+' clearfix cur"\x3e'+b.fileName+"."+b.fileType+'\x3c/span\x3e\x3c/a\x3e\x3cdiv class\x3d"fotter"\x3e\x3cspan class\x3d"creater ellipsis"\x3e'+l+'\x3c/span\x3e\x3cspan class\x3d"date"\x3e'+q+"\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e"},this);b(this.fileListNode).html(d);this._bindEvents()},_onScroll:function(){},_bindEvents:function(){this.own(u(this.fileListNode,"click",q.hitch(this,this._onFileClick)))},_onFileClick:function(a){a=b(a.target).closest("li.wk_ptList");
if(0<a.length){a=a.attr("url")[0];a=this._findFile(a);var c=a.type.toLowerCase();if(n.some(App.PICTURE_TYPE,function(a){return a==c}))this.onPictureClick(a);else if(n.some(App.PREVIEW_FILES_TYPE,function(a){return a==c}))this.owner.current={url:a.uri,type:"file",fileName:a.fileName},this.onFileClick(a);else this.onNotSupportFileClick(a)}},_findFile:function(a){for(var b=this.files,c={},d=0,h=b.length;d<h;d++){var l=b[d];if(l.fileDir==a){c={uri:a,type:l.fileType,fileName:l.fileName,sizeInfo:{name:l.fileName,
suffix:l.fileType}};if(a=l.imgSize)a=a.split(","),c.sizeInfo.height=a[0],c.sizeInfo.width=a[1];break}}return c},onNotSupportFileClick:function(a){},onFileClick:function(a){},onPictureClick:function(a){}})})},"app/vm/IndexChart":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/text!./tpl/indexChart.html dojo/on dojo/json chanjet/util/JsonStore".split(" "),function(l,c,h,d,b,u,n,q){function a(a){var b=new Date,c=new Date,d=new Date;switch(a){case "WEEK":a=
b.getDay();c.setDate(b.getDate()-a+1);d.setDate(b.getDate()-a+7);break;case "LASTWEEK":a=b.getDay();c.setDate(b.getDate()-a+1-7);d.setDate(b.getDate()-a+7-7);break;case "MONTH":b=b.getMonth();c.setDate(1);d.setMonth(b+1);d.setDate(1);d.setTime(d.getTime()-864E5);break;case "QUARTER":b=b.getMonth(),0<=b&&2>=b?(c.setMonth(0),d.setMonth(3)):3<=b&&5>=b?(c.setMonth(3),d.setMonth(6)):6<=b&&8>=b?(c.setMonth(6),d.setMonth(9)):9<=b&&11>=b&&(c.setMonth(9),d.setMonth(12)),c.setDate(1),d.setDate(1),d.setTime(d.getTime()-
864E5)}return{start:c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),end:d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}}return l("app/vm/IndexChart",[c,h],{"class":"whiteBg",templateString:b,postCreate:function(){this._bindEvents();var a=this,b=this.store;b.on("datachanged",function(c){var d=c.tag;0!=c.data.total&&"loaded"==d&&a._onLoad(b.data)})},_onLoad:function(a){for(var b=this.containerNode,c=a.length,g=[],h=[],l=this.valueField,q=this.nameField,n=0;n<c;n++){var u=a[n],s=u[l],v=u;
d.mixin(v,{index:n,name:u[q],value:s});g.push(v);h.push(s)}a=Math.max.apply(Math,h);for(var h=document.createDocumentFragment(),z=[],n=0,l=c-1;n<c;n++)u=g[n],n==l&&(u.isLast=!0),u.percent=Math.round(100*u.value/a),u=this.createItem(u),z.push(u.progress),h.appendChild(u.li);this.records=g;b.innerHTML="";b.appendChild(h);setTimeout(function(){for(var a=0;a<c;a++)z[a].style.width=g[a].percent+"%"},10)},createItem:function(a){var b=put("li.chart-item.clearfix[idx\x3d"+a.index+"]"),c=put("span.chart-name",
a.name),d=put("div.chart-progress-container"),h=put("p.chart-progress.click-able"),l=put("span.chart-label.click-able",a.value+"\u5bb6"),n=put("div.label-con"),q=a.percent+"%";a.isLast&&(d=put("div.chart-progress-container.pb0"));h.style.width="0%";l.style.left=q;put(d,h);put(n,c);put(n,l);put(b,n);put(b,d);return{li:b,progress:h}},_bindEvents:function(){var b=this.navBarNode,c=this.store,d=this,g=a("LASTWEEK");this.own(u(b,"click",function(d){d=$(d.target);if(0<d.closest("li",b).length){$("li",b).removeClass("select");
d=d.closest("li",b);d.addClass("select");var h=d.attr("data");g=a(h[0]);g.label=$(d).text();c.load({params:{countType:h}})}}),u(this.containerNode,u.selector(".click-able","click"),function(a){a=$(this).closest("li",d.containerNode).attri("idx");a=d.records[a];router.go("customer_report/init/"+encodeURI(n.stringify({from:"\u9500\u552e\u8fdb\u5c55",total:a.countNum,params:[{field:"status",field_label:"\u9500\u552e\u8fdb\u5c55",label:a.statusLabel,value:a.statusName,selectable:!1},{field:"owner",field_label:"\u4e1a\u52a1\u5458",
value:"ALL",selectable:!0}]})))}))}})})},"app/vm/Scroll2Top":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/fx dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/dom-geometry dojo/dom-style dojo/dom-class dojox/fx/scroll".split(" "),function(l,c,h,d,b,u,n,q,a,k){return l([d,b],{templateString:'\x3cdiv class\x3d"scroll2top hide" title\x3d"\u8fd4\u56de\u5934\u90e8"\x3e\x3c/div\x3e',showScrollTop:200,appendTarget:window.document.body,offsetX:20,postCreate:function(){this.inherited(arguments);
this.appendTarget.appendChild(this.domNode);this._locationCal();this._initEvent()},destroy:function(){this.inherited(arguments)},_initEvent:function(){this.own(u(window,"scroll",c.hitch(this,this._scrollHandler)),u(window,"resize",c.hitch(this,this._resizeHandler)),u(this.domNode,"click",c.hitch(this,this._clickHandler)))},_scrollHandler:function(){(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)>this.showScrollTop?a.contains(this.domNode,"hide")&&(a.remove(this.domNode,
"hide"),this._locationCal()):a.add(this.domNode,"hide")},_resizeHandler:function(){this._locationCal()},_clickHandler:function(){if(dojo.isIE&&9>dojo.isIE)window.scrollTo(0,0);else var a=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,b=a/5,c=setInterval(function(){0>=a?clearInterval(c):(window.scrollTo(0,a-b),a=Math.max(a-b,0))},20)},_locationCal:function(){if(this.appendTarget==document.body)q.set(this.domNode,"right","20px");else{var a=n.position(this.appendTarget),
a=a.x+a.w+this.offsetX;a+50>document.body.clientWidth?(q.set(this.domNode,"left",""),q.set(this.domNode,"right","20px")):(q.set(this.domNode,"left",a+"px"),q.set(this.domNode,"right",""))}}})})},"dojox/fx/scroll":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/fx dojox/fx/_base dojox/fx/_core dojo/dom-geometry dojo/_base/sniff".split(" "),function(l,c,h,d,b,u,n){l.experimental("dojox.fx.scroll");l=c.getObject("dojox.fx",!0);d.smoothScroll=function(d){d.target||(d.target=u.position(d.node));
var a=c[n("ie")?"isObject":"isFunction"](d.win.scrollTo),k=d.target.x,l=d.target.y;if(!a)var m=u.position(d.win),k=k-m.x,l=l-m.y;var g=new h.Animation(c.mixin({beforeBegin:function(){this.curve&&delete this.curve;var c=a?dojo._docScroll():{x:d.win.scrollLeft,y:d.win.scrollTop};g.curve=new b([c.x,c.y],[c.x+k,c.y+l])},onAnimate:a?function(a){d.win.scrollTo(a[0],a[1])}:function(a){d.win.scrollLeft=a[0];d.win.scrollTop=a[1]}},d));return g};return l.smoothScroll=d.smoothScroll})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),
function(l,c,h,d,b,u,n,q,a){l=c.getObject("dojox.fx",!0);c.mixin(l,{anim:h.anim,animateProperty:h.animateProperty,fadeTo:h._fade,fadeIn:h.fadeIn,fadeOut:h.fadeOut,combine:d.combine,chain:d.chain,slideTo:d.slideTo,wipeIn:d.wipeIn,wipeOut:d.wipeOut});l.sizeTo=function(a){var l=a.node=b.byId(a.node),m=a.method||"chain";a.duration||(a.duration=500);"chain"==m&&(a.duration=Math.floor(a.duration/2));var g,n,q,w,A,x=null,s=function(b){return function(){var c=u.getComputedStyle(b),d=c.position,h=c.width,
m=c.height;g="absolute"==d?b.offsetTop:parseInt(c.top)||0;q="absolute"==d?b.offsetLeft:parseInt(c.left)||0;A="auto"==h?0:parseInt(h);x="auto"==m?0:parseInt(m);w=q-Math.floor((a.width-A)/2);n=g-Math.floor((a.height-x)/2);"absolute"!=d&&"relative"!=d&&(c=u.coords(b,!0),g=c.y,q=c.x,b.style.position="absolute",b.style.top=g+"px",b.style.left=q+"px")}}(l),l=h.animateProperty(c.mixin({properties:{height:function(){s();return{end:a.height||0,start:x}},top:function(){return{start:g,end:n}}}},a)),m=h.animateProperty(c.mixin({properties:{width:function(){return{start:A,
end:a.width||0}},left:function(){return{start:q,end:w}}}},a));return d["combine"==a.method?"combine":"chain"]([l,m])};l.slideBy=function(a){var d,m,g=function(a){return function(){var b=u.getComputedStyle(a),c=b.position;d="absolute"==c?a.offsetTop:parseInt(b.top)||0;m="absolute"==c?a.offsetLeft:parseInt(b.left)||0;"absolute"!=c&&"relative"!=c&&(b=n.coords(a,!0),d=b.y,m=b.x,a.style.position="absolute",a.style.top=d+"px",a.style.left=m+"px")}}(a.node=b.byId(a.node));g();a=h.animateProperty(c.mixin({properties:{top:d+
(a.top||0),left:m+(a.left||0)}},a));q.connect(a,"beforeBegin",a,g);return a};l.crossFade=function(k){var l=k.nodes[0]=b.byId(k.nodes[0]),m=a.style(l,"opacity"),g=k.nodes[1]=b.byId(k.nodes[1]);a.style(g,"opacity");return d.combine([h[0==m?"fadeIn":"fadeOut"](c.mixin({node:l},k)),h[0==m?"fadeOut":"fadeIn"](c.mixin({node:g},k))])};l.highlight=function(d){var l=d.node=b.byId(d.node);d.duration=d.duration||400;var m=d.color||"#ffff99",g=a.style(l,"backgroundColor");"rgba(0, 0, 0, 0)"==g&&(g="transparent");
d=h.animateProperty(c.mixin({properties:{backgroundColor:{start:m,end:g}}},d));"transparent"==g&&q.connect(d,"onEnd",d,function(){l.style.backgroundColor=g});return d};l.wipeTo=function(d){d.node=b.byId(d.node);var l=d.node,m=l.style,g=d.width?"width":"height",n={};n[g]={start:function(){m.overflow="hidden";if("hidden"==m.visibility||"none"==m.display)return m[g]="1px",m.display="",m.visibility="",1;var b=a.style(l,g);return Math.max(b,1)},end:d[g]};return h.animateProperty(c.mixin({properties:n},
d))};return l})},"dojox/fx/_core":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(l,c,h){var d=function(b,d){this.start=b;this.end=d;var h=l.isArray(b),q=h?[]:d-b;h?(c.forEach(this.start,function(a,b){q[b]=this.end[b]-a},this),this.getValue=function(a){var b=[];c.forEach(this.start,function(c,d){b[d]=q[d]*a+c},this);return b}):this.getValue=function(a){return q*a+this.start}};return h._Line=d})},"url:app/nav/tpl/index.html":'\x3cdiv class\x3d"index"\x3e\n    \x3ch1 class\x3d"mainTittle"\x3e\u9500\u552e\u8fdb\u5c55\u62a5\u544a\x3cspan\x3e\u622a\u6b62\u76ee\u524d\x3c/span\x3e\x3c/h1\x3e\n    \x3cdiv class\x3d"chart-con" data-dojo-attach-point\x3d"chartNode"\x3e\x3cdiv data-dojo-attach-point\x3d"addKhNode" class\x3d"add-kh hide"\x3e\x3c/div\x3e\x3c/div\x3e\n    \x3ch1 class\x3d"mainTittle"\x3e\u6211\u5173\u6ce8\u5ba2\u6237\u7684\u8fdb\u5c55\x3c/h1\x3e\n    \x3cdiv class\x3d"list-con" data-dojo-attach-point\x3d"workListNode"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"focusKhNode" class\x3d"focus-kh hide"\x3e\x3c/div\x3e\n        \x3c!--\x3cdiv data-dojo-attach-point\x3d"addRecNode" class\x3d"add-rec hide"\x3e\x3c/div\x3e--\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/workList.html":'\x3cdiv class\x3d"wr-record"\x3e\n \x3cdiv data-dojo-attach-point\x3d"dvNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:app/vm/tpl/workListItem.html":'\x3cli class\x3d"b1 clearfix" style\x3d"border-color:${uiModel.borderColor};"\x3e\n\t\x3c!--\u5934\u50cf--\x3e\n\t\x3cdiv class\x3d"fl cLeft"\x3e\n\t\t${uiModel.avatar}\n\t\x3c/div\x3e\n\t\x3c!--\u5185\u5bb9\u533a--\x3e\n\t\x3cdiv class\x3d"fl cRight"\x3e\n\t\t\x3c!--\u5ba2\u6237\u540d\u79f0--\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"nameConNode" class\x3d"${nameClass} clearfix"\x3e\n\t\t\t\x3ch2\x3e\n\t\t\t\t\x3ca data-dojo-attach-point\x3d"customerNameNode" alt\x3d"${uiModel.fullCusName}" title\x3d"${uiModel.fullCusName}"\x3e${uiModel.customerName}\x3c/a\x3e\n\t\t\t\x3c/h2\x3e\n\t\t\t\x3ca data-dojo-attach-point\x3d"heatNode" class\x3d"heat ${heatClass}"\x3e\x3c/a\x3e\n\t\t\x3c/div\x3e\n\t\t\x3c!--\u53d1\u5e03\u4fe1\u606f--\x3e\n\t\t\x3cdiv\x3e\x3cspan class\x3d"uName"\x3e${uiModel.name}\x3c/span\x3e\x3cspan class\x3d"uTime"\x3e${uiModel.date}  ${uiModel.week} \x3c/span\x3e\x3c/div\x3e\n\t\t\x3c!--\u5de5\u4f5c\u8bb0\u5f55\u5185\u5bb9--\x3e\n\t\t\x3cp class\x3d"content" data-dojo-attach-point\x3d"contentContainer" \x3e${uiModel.content}\x3c/p\x3e\n\t\t\x3c!--\u5f55\u97f3--\x3e\n\t\t\x3cdiv class\x3d"audio-wrapper" data-dojo-attach-point\x3d"audioNode"\x3e\x3c/div\x3e\n\t\t\x3c!--\u56fe\u7247--\x3e\n\t\t\x3cdiv class\x3d"imgBox clearfix" data-dojo-attach-point\x3d"imgNode"\x3e\x3c/div\x3e\n\t\t\x3c!--\u5e95\u90e8\u4fe1\u606f\uff08\u5b9a\u4f4d\uff0c\u8bc4\u8bba\uff0c\u9898\u578b\uff09--\x3e\n\t\t\x3cdiv class\x3d"listFoot"\x3e\n\t\t\t${uiModel.remindTime}\n\t\t\t${uiModel.address}\n\t\t\t${uiModel.workTodoTip}\n\t\t\t${uiModel.workTodoRemindTime}\n\t\t\t${uiModel.workTodoContent}\n\t\t\t\x3cdiv class\x3d"comment" data-dojo-attach-point\x3d"commentBtn"\x3e\x3cspan class\x3d"commentIcon"\x3e\x3c/span\x3e\u8bc4\u8bba(\x3cspan data-dojo-attach-point\x3d"commentNum"\x3e${model.commentCount}\x3c/span\x3e)\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3c!--\u8bc4\u8bba\u533a--\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"commentNode"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3c!--\u60ac\u6d6e\u5143\u7d20--\x3e\n\t${uiModel.status}\n\t\x3ca class\x3d"delLink hide" data-dojo-attach-point\x3d"closeNode" data-dojo-attach-event\x3d"onclick:_onDel"\x3e\x3c/a\x3e\n\t\x3ca class\x3d"editLink hide" style\x3d"display:none;" data-dojo-attach-point\x3d"editNode"\x3e\x3c/a\x3e\n\x3c/li\x3e',
"url:app/widget/editor/source/templates/at.html":'\x3cdiv class\x3d"wk_atBox pr" style\x3d"top:-1000px;" id\x3d"friendpad"\x3e\n\t\x3cspan class\x3d"tw_atSj" node-type\x3d"arrow"\x3e\x3c/span\x3e\n\t\x3cdiv style\x3d"max-height:300px;overflow:auto;position:relative" node-type\x3d"friendBox"\x3e\n\t\t\x3cdiv node-type\x3d"tips" style\x3d"display:none;" class\x3d"tw_atClue"\x3e\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u641c\u7d22\u7ed3\u679c\x3c/div\x3e\n\t\t\x3cul class\x3d"wk_atBoxList" style\x3d"overflow-x:hidden" node-type\x3d"content"\x3e\x3c/ul\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"tw_atAll" node-type\x3d"atAll"\x3e@\u5168\u4f53\u6210\u5458\x3c/div\x3e\n\x3c/div\x3e',
"url:app/widget/editor/source/templates/face.html":'\x3cdiv class\x3d"wk_bqBox"\x3e\n    \x3cspan node-type\x3d"arrow1" class\x3d"wk_sjTout"\x3e\x3c/span\x3e    \n    \x3cspan node-type\x3d"arrow2" class\x3d"wk_sjTin"\x3e\x3c/span\x3e\n\x3c/div\x3e',"url:chanjet/scrollBar/ScrollBarBase.html":'\x3cdiv\x3e\n    \x3cdiv data-dojo-attach-point\x3d\'bg\' class\x3d"bg"\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'bgStart\' class\x3d"bgStart"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'bgMiddle\' class\x3d"bgMiddle"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'bgEnd\' class\x3d"bgEnd"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"arrowStart" class\x3d"arrowStart"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"arrowEnd" class\x3d"arrowEnd"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d\'block\' class\x3d"block" oncontextmenu\x3d"return false;"\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'blockStart\' class\x3d"blockStart"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'blockMiddle\' class\x3d"blockMiddle"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d\'blockEnd\' class\x3d"blockEnd"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/commentCompontent.html":'\x3cdiv class\x3d"wk_replayBox none"  data-dojo-attach-point\x3d"footer_replayBox"\x3e\n    \x3c!--\x3cspan class\x3d"wk_curArrow"\x3e\x3c/span\x3e--\x3e\n    \x3cdiv data-dojo-attach-point\x3d"commentArea" \x3e\n        \x3cdiv class\x3d"wk_replay clearfix " data-dojo-attach-point\x3d"replayBox"\x3e\n            \x3c!--\u9ed8\u8ba4\u56de\u590d\u6846--\x3e\n            \x3cdiv class\x3d"wk_outLine clearfix"\x3e\n                \x3cdiv class\x3d"fl wk_replayText tw_plBg" data-dojo-attach-point\x3d"replyNode" data-from\x3d"${model.__from__}" scrollme\x3d"true" style\x3d"word-break:break-all;width:100%;min-height:22px;line-height:22px;max-height:60px;height:auto;overflow-y:auto;padding-right: 1px;" contenteditable\x3d"true" autocomplete\x3d"off"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3c!--\u70b9\u51fb\u5b8c\u4e4b\u540e\u7684\u56de\u590d\u6846--\x3e\n            \x3cdiv class\x3d"wk_hfDet"\x3e\x3c/div\x3e\n            \x3c!-- \u9644\u4ef6 --\x3e\n            \x3cdiv class\x3d"wk_fjBox"\x3e\n                \x3cul data-dojo-attach-point\x3d"commentuploadfiles"\x3e\x3c/ul\x3e\n            \x3c/div\x3e\n            \x3c!-- \u8bc4\u8bba\u64cd\u4f5c\u533a --\x3e\n            \x3cdiv class\x3d"clearfix wk_replayOper none" data-dojo-attach-point\x3d"operNode"\x3e\n                \x3cdiv class\x3d"notice-label" data-dojo-attach-point\x3d"tipNode"\x3e\u60a8\u8fd8\u53ef\u4ee5\u8f93\u5165\x3cspan class\x3d"notice-label-num"\x3e255\x3c/span\x3e\u5b57\x3c/div\x3e\n                \x3ca class\x3d"tw_speakExpression" data-dojo-attach-point\x3d"faceNode"\x3e\x3c/a\x3e\n                \x3ca style\x3d"display: none;" class\x3d"tw_speakTag" data-dojo-attach-point\x3d"uploadfileNode"\x3e\x3c/a\x3e\n                \x3ca class\x3d"tw_speakAt" style\x3d"display: none;" data-dojo-attach-point\x3d"atNode"\x3e\x3c/a\x3e\n                \x3cinput data-dojo-attach-point\x3d"commitNode" type\x3d"button" value\x3d"\u53d1\u5e03" title\x3d"\u53d1\u5e03\u8bc4\u8bba" class\x3d"fr tw_disableBt" speech\x3d"wk_addComment" disabled\x3e\n                \x3cinput data-dojo-attach-point\x3d"cancelNode" type\x3d"reset" value\x3d"\u53d6\u6d88" class\x3d"fr tw_whiteBt"\x3e\n                \x3cdiv class\x3d"wk_fjBox"\x3e\n\n                \x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"wk_reBg comment_container" data-dojo-attach-point\x3d"listConNode"\x3e\n        \x3cp data-dojo-attach-point\x3d"searchTip" class\x3d"repSearch none"\x3e\x3c/p\x3e\n        \x3cul data-dojo-attach-point\x3d"listNode" id\x3d"wk_comment_list" scrollme\x3d"true"\x3e\x3c/ul\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/widget/audio/templates/smaudio.html":'\x3cdiv class\x3d"audio-player"\x3e\n\t\x3cdiv class\x3d"play-btn" data-dojo-attach-point\x3d"actionNode"\x3e\n\t\t\x3cdiv class\x3d"btn-arrow"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"btn-bg" data-dojo-attach-point\x3d"btnNode"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"time-label" data-dojo-attach-point\x3d"timeLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"loading-img"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',"url:app/widget/preview/templates/photoSilder.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"tw_lightTittle pr"\x3e\n        \x3cspan data-dojo-attach-point\x3d"imageCount"\x3e\x3c/span\x3e\n        \x3cdiv class\x3d"pa tw_operBox"\x3e\n            \x3ca data-dojo-attach-point\x3d"turnRight"  title\x3d"\u65cb\u8f6c"\x3e\n\t            \x3cspan class\x3d"tw_turnIcon"\x3e\x3c/span\x3e\n\t            \x3cspan class\x3d"iconClue"\x3e\u65cb\u8f6c\x3c/span\x3e\n            \x3c/a\x3e\n            \x3ca  title\x3d"\u539f\u59cb\u5c3a\u5bf8" rel\x3d"large" data-dojo-attach-point\x3d"resizeBtn"\x3e\n\t            \x3cspan class\x3d"tw_originalIcon"\x3e\x3c/span\x3e\n\t            \x3cspan class\x3d"iconClue"\x3e\u539f\u59cb\u5c3a\u5bf8\x3c/span\x3e\n            \x3c/a\x3e\n            \x3ca data-dojo-attach-point\x3d"showOriginal" target\x3d"_blank"  title\x3d"\u67e5\u770b\u539f\u56fe"\x3e\n\t            \x3cspan class\x3d"tw_imgIcon"\x3e\x3c/span\x3e\n\t            \x3cspan class\x3d"iconClue"\x3e\u67e5\u770b\u539f\u56fe\x3c/span\x3e\n            \x3c/a\x3e\n            \x3ca data-dojo-attach-point\x3d"downloadImage" title\x3d"\u4e0b\u8f7d" \x3e\n\t            \x3cspan class\x3d"tw_downIcon"\x3e\x3c/span\x3e\n\t            \x3cspan class\x3d"iconClue"\x3e\u4e0b\u8f7d\x3c/span\x3e\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"tw_imgMain"\x3e\n        \x3cdiv class\x3d"fl tw_prevImg"\x3e\n            \x3ca  data-dojo-attach-point\x3d"btnPrevBig" class\x3d"tw_prev tw_prevDisable"\x3e\x3c/a\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"tw_imgContent" data-dojo-attach-point\x3d"imageContent"\x3e\n            \x3cdiv class\x3d"tw_showNum" data-dojo-attach-point\x3d"zoomSizeTip" style\x3d"display:none;"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"fr tw_nextImg"\x3e\x3ca  data-dojo-attach-point\x3d"btnNextBig" class\x3d"tw_next"\x3e\x3c/a\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"tw_smallImgList"\x3e\n        \x3cdiv class\x3d"tw_imgBottom" data-dojo-attach-point\x3d"prevBar"\x3e\n            \x3cdiv class\x3d"fl tw_smallPrev" style\x3d"display:none;" data-dojo-attach-point\x3d"btnPrevSmall"\x3e\n                \x3ca \x3e\x3c/a\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"fl" data-dojo-attach-point\x3d"prevPhotos"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d"fr tw_smallNext" style\x3d"display:none;" data-dojo-attach-point\x3d"btnNextSmall"\x3e\n                \x3ca \x3e\x3c/a\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\n\x3c/div\x3e\n',
"url:app/vm/tpl/preview.html":'\x3cdiv class\x3d"imgPreview"\x3e\n    \x3cdiv class\x3d"img" data-dojo-attach-point\x3d"imgViewNode"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"fileView" data-dojo-attach-point\x3d"fileViewNode" \x3e\n        \x3cdiv class\x3d"toolbar" data-dojo-attach-point\x3d"toolbarNode" \x3e\n            \x3ca class\x3d"a_download" data-dojo-attach-point\x3d"fileDownloadNode"\x3e\u4e0b\u8f7d\u6587\u4ef6\x3c/a\x3e\n            \x3ca class\x3d"a_deleteFile" data-dojo-attach-point\x3d"file_delete" style\x3d"display:none;"\x3e\u5220\u9664\u6587\u4ef6\x3c/a\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"flashNode" class\x3d"flashView"\x3e\n            \x3cp class\x3d"un_pdf" style\x3d"color:#fff;text-align:center;"\x3e\u60a8\u4f3c\u4e4e\u5e76\u672a\u5b89\u88c5 Adobe Reader \u6216\u8005 \u6d4f\u89c8\u5668\u652f\u6301 PDF \u63d2\u4ef6. \x3c/p\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"right-side hide" data-dojo-attach-point\x3d"rightBox"\x3e\x3c/div\x3e\n    \x3ca class\x3d"tw_close" data-dojo-attach-point\x3d"closeNode"\x3e\x3c/a\x3e\n\x3c/div\x3e',
"url:app/widget/preview/templates/previewInfo.html":'\x3cdiv class\x3d"wk_qTop clearfix"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"headerNode"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"wk_qClue clear"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"textNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"wk_fjWrap"\x3e\n        \x3cdiv class\x3d"title" data-dojo-attach-point\x3d"titleNode"\x3e${title}\x3c/div\x3e\n        \x3cul class\x3d"file-list" data-dojo-attach-point\x3d"fileListNode"\x3e\n        \x3c/ul\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"mapNode" class\x3d"tw_addCont none"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"footerNode"\x3e\x3c/div\x3e\n\n\x3c/div\x3e',
"url:app/vm/tpl/indexChart.html":'\x3cdiv\x3e\n    \x3cul class\x3d"chart-nav clearfix" style\x3d"display:none;" data-dojo-attach-point\x3d"navBarNode"\x3e\n        \x3cli class\x3d"select" data\x3d"LASTWEEK"\x3e\u4e0a\u5468\x3c/li\x3e\n        \x3cli data\x3d"WEEK"\x3e\u672c\u5468\x3c/li\x3e\n        \x3cli data\x3d"MONTH"\x3e\u672c\u6708\x3c/li\x3e\n        \x3cli data\x3d"QUARTER"\x3e\u672c\u5b63\u5ea6\x3c/li\x3e\n    \x3c/ul\x3e\n    \x3cul class\x3d"listCont clearfix" data-dojo-attach-point\x3d"containerNode"\x3e\n\n    \x3c/ul\x3e\n\x3c/div\x3e'}});
define("app/nav/Index","dojo/_base/declare dojo/_base/lang app/util/_WidgetBase dojo/text!./tpl/index.html dojo/on app/vm/WorkList app/vm/WorkListItem app/vm/IndexChart app/vm/Scroll2Top chanjet/util/JsonStore require".split(" "),function(l,c,h,d,b,u,n,q,a,k,t){return l("app/nav/Index",[h],{"class":"w1000",templateString:d,init:function(){var a=this;this.chartStore.removeAll().load({callback:function(b){0<b.total?(core.removeClass(a.chart.domNode,"chart-empty"),core.addClass(a.addKhNode,"hide")):
(core.addClass(a.chart.domNode,"chart-empty"),core.removeClass(a.addKhNode,"hide"))}});this.workStore.removeAll().load({callback:function(b){b.items&&0<b.items.length?(core.removeClass(a.workList.domNode,"list-empty"),core.addClass(a.focusKhNode,"hide")):(core.addClass(a.workList.domNode,"list-empty"),core.removeClass(a.focusKhNode,"hide"))}})},destroy:function(){this.scrollComps.destroy();this.inherited(arguments)},postCreate:function(){var b=this.chartStore=new k({url:URL.reportProgress});this.chart=
new q({store:b,valueField:"countNum",nameField:"statusLabel"});this.chart.placeAt(this.chartNode);this.scrollComps=new a({showScrollTop:200,appendTarget:this.domNode});b=this.workList=new u({itemClass:n,type:"index"});b.placeAt(this.workListNode);this.workStore=b.store;this._bindEvents()},_bindEvents:function(){this.own(b(this.addKhNode,"click",c.hitch(this,function(){t(["app/vm/CustomerEditDialog"],c.hitch(this,function(a){this.NewCustomerDialog=new a;this.NewCustomerDialog.show(c.hitch(this,function(){core.removeClass(this.chart.domNode,
"chart-empty");core.addClass(this.addKhNode,"hide");this.chart.store.removeAll().load()}))}))})),b(this.focusKhNode,"click",function(){router.go("customer_list")}))},_newWRCompleteHandler:function(){}})});
