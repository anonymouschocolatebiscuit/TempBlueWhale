require({cache:{"app/task/TaskRemindQuery":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/on","app/task/Task"],function(f,c,e,d){return new (c([d],{constructor:function(){this.inherited(arguments);this.id="remindQuery";this.timeUnit=1E3;this.goSleepTime=2E3;this.lastLiveTime=(new Date).getTime();this._bindEvent()},destructor:function(){for(var a=0,c=this.eventHandle.length;a<c;a++)this.eventHandle[a].remove()},_bindEvent:function(){this.eventHandle=[];this.eventHandle.push(e(App.Message,
"ajax_finish",f.hitch(this,this._checkSleep)))},_checkSleep:function(a){a.params.params&&!a.params.params._system&&(this.lastLiveTime=(new Date).getTime(),this._threadID||this.start())},_execute:function(a){(new Date).getTime()-this.lastLiveTime>=this.goSleepTime&&this.end();a=[{id:1,remindTime:(new Date).getTime()+5E3,message:"5\u79d2\u540e\u63d0\u9192"},{id:1,remindTime:(new Date).getTime()+1E4,message:"10\u79d2\u540e\u63d0\u9192"}];App.Storage.set("remindList",a)}}))})},"app/task/Task":function(){define(["dojo/_base/lang",
"dojo/_base/declare"],function(f,c){return c(null,{constructor:function(){this.queue=[];this.id="";this._threadID=0;this.timeUnit=5E3},destructor:function(){this._threadID&&this.quit()},start:function(){this._threadID||(this._threadID=App.Thread.add(this.id,this._execute,this.timeUnit,this))},end:function(){this._threadID&&App.Thread.remove(this._threadID);this._threadID=0}})})},"app/task/TaskRemindCheck":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/on","app/task/Task"],function(f,
c,e,d){return new (c([d],{constructor:function(){this.inherited(arguments);this.id="remindCheck";this.timeUnit=1E3},destructor:function(){this.inherited(arguments)},_execute:function(a){if((a=App.Storage.get("remindList"))&&0!=a.length)for(var c=(new Date).getTime();0<a.length&&a[0].remindTime<=c;)a.shift()}}))})},"app/task/TaskCustomerImport":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/on dojo/dom-construct app/task/Task".split(" "),function(f,c,e,d,a,g){return new (c([g],
{constructor:function(){this.id="customerImport";this.timeUnit=3E3;this.inherited(arguments);this._initEvents()},destructor:function(){this.inherited(arguments)},_initEvents:function(){this.eventListeners=[];this.eventListeners.push([d(document.body,d.selector(".message-pop .excel-notice a","click"),function(b){router.go("customer_import_result/init/"+b.target.getAttribute("importID")+"/"+(new Date).valueOf())})])},add:function(b){this.queue.push(b);this._threadID||this.start()},remove:function(b){-1!=
e.indexOf(this.queue,b)&&(this.queue.splice(e.indexOf(this.queue,b),1),0==this.queue.length&&this._threadID&&this.end())},_execute:function(b){b=this.queue.join(",");xhr.get(URL.customerImportStatus,{ids:b,_system:!0},f.hitch(this,this._statusQueryHandler))},_statusQueryHandler:function(b){if(b.result)for(var a=0,c=b.data.length;a<c;a++)2==b.data[a].status&&(App.MessagePop.getInstance({title:"\u5bfc\u5165excel\u6210\u529f",content:""+('\x3cdiv class\x3d"excel-notice clearfix"\x3e\x3cspan class\x3d"excel-name"\x3e'+
b.data[a].fileName+'\x3c/span\x3e\x3cspan\x3e\u5bfc\u5165\u6210\u529f\x3c/span\x3e\x3ca class\x3d"excel-link" href\x3d"javascript:void(0);" importID\x3d"'+b.data[a].id+'"\x3e\u70b9\u51fb\u67e5\u770b\x3c/a\x3e\x3c/div\x3e')}),App.Message.emit(App.MessageList.CustomerImportSuccess,b.data[a]),this.remove(b.data[a].id))}}))})}}});
define("app/task/tasks",["dojo/_base/declare","app/task/TaskRemindQuery","app/task/TaskRemindCheck","app/task/TaskCustomerImport"],function(f,c,e,d){return{taskRemindQuery:c,taskRemindCheck:e,taskCustomerImport:d}});
