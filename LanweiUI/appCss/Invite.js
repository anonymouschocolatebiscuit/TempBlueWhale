require({cache:{"chanjet/form/SearchBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/Evented dojo/dom-construct dojo/dom-style dojo/dom-attr dojo/dom-class dijit/_WidgetBase dijit/_FocusMixin dijit/_TemplatedMixin chanjet/util/query".split(" "),function(l,f,b,a,m,k,c,h,e,q,n,g,d){return l("chanjet.form.SearchBox",[q,g,n,m],{boxWidth:0,boxHeight:0,firstSelected:!1,defaultText:"",searchIcon:!0,editAble:!0,noResultHTML:"",ver:"SearchBox Version v2.3.0 2014-6-24",
defaultWidth:260,defaultHeight:30,inputWidth:0,keySelect:!1,selectIndex:-1,selectMax:-1,selectNode:null,listItems:null,baseClass:"searchbox",templateString:"\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d'inputDivNode'\x3e\x3cinput type\x3d'text' data-dojo-attach-point\x3d'inputNode'\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d'placeholdNode' class\x3d'placehold'\x3e\x3c/div\x3e\x3ca data-dojo-attach-point\x3d'clearNode' class\x3d'btn clearBtn'\x3e\x3c/a\x3e\x3cdiv data-dojo-attach-point\x3d'submitNode' class\x3d'btn submitBtn'\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d'listNode' class\x3d'searchList'\x3e\x3cul data-dojo-attach-point\x3d'listBox'\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e",
postCreate:function(){this.inherited(arguments);this._init();this._bindEvent()},_bindEvent:function(){var p=this;this.own(a(this.inputNode,"mousedown",f.hitch(this,this._onMouseDown)),a(this.inputNode,"input",f.hitch(this,this._onInput)),a(this.inputNode,"paste",function(a){c.set(p.placeholdNode,"display","none")}),a(this.inputNode,"keydown",f.hitch(this,this._onKeyDown)),a(this.inputNode,"keyup",f.hitch(this,this._onKeyUp)),a(this.inputNode,"click",f.hitch(this,this.focus)),a(this.placeholdNode,
"click",f.hitch(this,this.focus)),a(this.submitNode,"click",f.hitch(this,this._onSearch)),a(this.clearNode,"click",f.hitch(this,this._onClear)),a(this.listNode,"mousedown",f.hitch(this,this._onListMouseSelected)),a(this.listNode,"mouseover",f.hitch(this,this._onListMouseOver)));dojo.isIE&&this.own(a(this.inputNode,"keyup",f.hitch(this,this._onKeyUp)));this.store&&this.store.url&&this.own(a(this.store,"datachanged",f.hitch(this,this._onStoreChange)))},getInput:function(){return this.inputNode.value},
setInput:function(a){this.inputNode.value=a;c.set(this.inputNode,"color","#4f5254");c.set(this.placeholdNode,{display:"none"})},getable:function(){return this.editAble},useable:function(){this.editAble=!0;h.remove(this.inputNode,"disabled");e.remove(this.domNode,"disable")},disable:function(){this.editAble=!1;h.set(this.inputNode,{disabled:"disabled"});e.add(this.domNode,"disable");c.set(this.clearNode,{display:"none"})},reset:function(){this.inputNode.value="";c.set(this.placeholdNode,{display:"block"});
c.set(this.clearNode,{display:"none"});c.set(this.listNode,{display:"none"});c.set(this.inputNode,{width:this.inputWidth+16+"px"})},_init:function(){var a=0<this.boxWidth?this.boxWidth:this.defaultWidth,d=0<this.boxHeight?this.boxHeight:this.defaultHeight,a=a-2,d=d-2;c.set(this.domNode,{width:a+"px",height:d+"px"});this.inputWidth=a-50;c.set(this.inputNode,{width:this.inputWidth+16+"px"});c.set(this.placeholdNode,{width:this.inputWidth+16+"px",height:d-4+"px",lineHeight:d-4+"px"});c.set(this.listNode,
{display:"none",top:d+"px",width:a+"px"});this.searchIcon||(c.set(this.submitNode,{display:"none"}),c.set(this.clearNode,{top:(d-16)/2+"px",right:"6px",display:"none"}));this.editAble||(e.add(this.domNode,"disable"),h.set(this.inputNode,{disabled:"disabled"}));this.defaultText&&(this.placeholdNode.innerHTML=this.defaultText)},_onIeInput:function(){"value"==window.event.propertyName&&this._onInput()},_onInput:function(){var a=this.inputNode.value;c.set(this.clearNode,{display:"block"});c.set(this.inputNode,
{width:this.inputWidth+"px"});this.store&&(""!=a?this._showList():this._hideList());this.emit("searchChange",a)},_onSearch:function(){this.editAble&&this.emit("searchEvent",this.inputNode.value)},_onClear:function(){this.inputNode.value="";c.set(this.placeholdNode,{display:"block"});c.set(this.clearNode,{display:"none"});c.set(this.listNode,{display:"none"});c.set(this.inputNode,{width:this.inputWidth+16+"px"});this.focus();this.emit("searchChange");this.emit("searchClear")},_checkPlaceHold:function(){var a=
this.inputNode.value;this.defaultText&&(""!=a?c.set(this.placeholdNode,"display","none"):c.set(this.placeholdNode,"display","block"))},_showList:function(){if(this.store&&this.store.url&&this.keyName){var a={params:{}};a.params[this.keyName]=this.inputNode.value;this.listBox.innerHTML="";this.store.load(a)}else this.store&&this.store.data&&this._showListData()},_onStoreChange:function(a){"loaded"==a.tag&&this._showListData()},_showListData:function(){var a,g,m,n=this.store.data;if(!this.url)var h=
this.getInput(),n=b.filter(n,function(a){return a.extraInfo?RegExp(h).test(a.extraInfo):RegExp(h).test(a.text)});if(n&&0<n.length){this.keySelect=!0;c.set(this.listNode,{display:"block"});this.listBox.innerHTML="";this.selectMax=m=n.length;this.listItems=[];for(a=0;a<m;a++)g=k.create("li"),d(g).text(n[a].text),dojo.place(g,this.listBox,"last"),this.listItems.push(g);this.firstSelected&&(this.selectIndex=0,this.selectNode=this.listItems[0],e.add(this.listItems[0],"selected"))}else this.keySelect=!1,
c.set(this.listNode,{display:"none"}),this.listBox.innerHTML=this.noResultHTML},_hideList:function(){this.keySelect=!1;this.selectMax=this.selectIndex=-1;c.set(this.clearNode,{display:""!=this.inputNode.value?"block":"none"});c.set(this.listNode,{display:"none"})},_onMouseDown:function(){this.editAble&&this._checkPlaceHold()},_onKeyDown:function(a){c.set(this.placeholdNode,"display","none");(40==a.keyCode||38==a.keyCode)&&""!=this.inputNode.value?0!=this.store.data.length&&(this.keySelect?(this.selectNode&&
e.remove(this.selectNode,"selected"),40==a.keyCode?(this.selectIndex+=1,this.selectIndex>=this.selectMax&&(this.selectIndex=0)):(this.selectIndex-=1,0>this.selectIndex&&(this.selectIndex=this.selectMax-1)),a=this.listNode.childNodes[0].children,e.add(a[this.selectIndex],"selected"),this.inputNode.value=d(a[this.selectIndex]).text(),c.set(this.placeholdNode,{display:"none"}),this.selectNode=a[this.selectIndex]):this._showList()):13==a.keyCode&&(this.keySelect?-1<this.selectIndex?(a=this.listNode.childNodes[0].children,
this.inputNode.value=a[this.selectIndex].innerHTML,this.emit("listSelected",this.inputNode.value,this.store.data[this.selectIndex]),this._hideList()):this.emit("searchEvent",this.inputNode.value):this.emit("searchEvent",this.inputNode.value))},_onKeyUp:function(a){c.set(this.placeholdNode,"display","none");40!=a.keyCode&&(38!=a.keyCode&&13!=a.keyCode)&&this._onInput()},_onListMouseSelected:function(a){a=a.target;"li"==a.tagName.toLowerCase()&&(this.inputNode.value=d(a).text(),c.set(this.placeholdNode,
{display:"none"}),this.emit("listSelected",this.inputNode.value,this.store.data[this.selectIndex]),this._hideList())},_onListMouseOver:function(a){this.selectNode&&e.remove(this.selectNode,"selected");e.add(a.target,"selected");this.selectNode=a.target;for(var d=a.target.parentNode.children,g=0,m=d.length;g<m;g++)if(d[g]==a.target){this.selectIndex=g;break}},onBlur:function(){this._hideList();this._checkPlaceHold();e.remove(this.domNode,"searchboxFocus")},focus:function(){var a=this.inputNode.value;
this.inputNode.focus();""!=a&&c.set(this.clearNode,{display:"block"});e.add(this.domNode,"searchboxFocus");this._showList()}})})},"chanjet/form/Select":function(){define(["dojo/_base/declare","dijit/form/Select"],function(l,f){return l("chanjet.form.Select",[f],{size:"normal",postCreate:function(){this.inherited(arguments);if(this.url){var b=this;xhr.get(this.url,function(a){var m=this.labelField||"label",k=this.valueField||"value";if("label"!=m||"value"!=k)for(var c=0,h=a.length;c<h;c++){var e=a[c];
e.label=e[m];e.value=e[k]}b.set("options",a)})}},_fillContent:function(){this.inherited(arguments);this._fillContentHandler()},_fillContentHandler:function(){},_setSizeAttr:function(b){this.size=b;dojo.addClass(this.domNode,"size"+b)},addOption:function(b){this.inherited(arguments);this._addOptionItem(b)}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u,w,v){function t(a){return function(p){this._isLoaded?this.inherited(a,arguments):this.loadDropDown(c.hitch(this,a,p))}}var r=f("dijit.form._SelectMenu",g,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}))},focus:function(){var a=!1,p=this.parentWidget.value;c.isArray(p)&&
(p=p[p.length-1]);p&&l.forEach(this.parentWidget._getChildren(),function(d){d.option&&p===d.option.value&&(a=!0,this.focusChild(d,!1))},this);a||this.inherited(arguments)}});m=f("dijit.form.Select"+(e("dojo-bidi")?"_NoBidi":""),[q,n,u],{baseClass:"dijitSelect dijitValidationTextBox",templateString:v,_buttonInputDisabled:e("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&
!this.value&&this.srcNodeRef){var p=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=p?p:0].value)}this.dropDown=new r({id:this.id+"_menu",parentWidget:this,appendTo:this.appendTo});a.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new p({ownerDocument:this.ownerDocument});var e=c.hitch(this,"_setValueAttr",a);a=new d({option:a,label:a.label||this.emptyLabel,onClick:e,ownerDocument:this.ownerDocument,
dir:this.dir,textDir:this.textDir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},focusChild:function(a){a&&this.set("value",a.option)},_getFirst:function(){var a=this._getChildren();return a.length?a[0]:
null},_getLast:function(){var a=this._getChildren();return a.length?a[a.length-1]:null},childSelector:function(a){return(a=w.byNode(a))&&a.getParent()==this.dropDown},onKeyboardSearch:function(a,p,d,e){a&&this.focusChild(a)},_loadChildren:function(a){if(!0===a)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{l.forEach(this._getChildren(),function(a){a.destroyRecursive()});var p=new d({ownerDocument:this.ownerDocument,label:this.emptyLabel});
this.dropDown.addChild(p)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);b.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},
_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+a+"\x3c/span\x3e"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":
"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var p=a?"":this._missingMsg;p&&this.focused&&this._hasBeenBlurred?s.show(p,this.domNode,this.tooltipPosition,!this.isLeftToRight()):s.hide(this.domNode);this._set("message",p);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);s.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=
k.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,"selectstart",function(a){a.preventDefault();a.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");9>e("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var p=a.fontFamily;if(p){var d=this.domNode.getElementsByTagName("INPUT");if(d)for(a=0;a<d.length;a++)d[a].style.fontFamily=p}}}catch(e){}})},_setStyleAttr:function(p){this.inherited(arguments);
a.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){s.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
e("dojo-bidi")&&(m=f("dijit.form.Select",m,{_setDisplay:function(a){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));m._Menu=r;m.prototype._onContainerKeydown=t("_onContainerKeydown");m.prototype._onContainerKeypress=t("_onContainerKeypress");return m})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d){return m("dijit.form._FormSelectWidget",d,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var d=this.options||[];if(null==a)return d;if(e.isArray(a))return l.map(a,"return this.getOptions(item);",this);e.isString(a)&&(a={value:a});e.isObject(a)&&(l.some(d,function(d,e){for(var g in a)if(!(g in d)||d[g]!=a[g])return!1;a=e;return!0})||(a=-1));
return 0<=a&&a<d.length?d[a]:null},addOption:function(a){l.forEach([].concat(a),function(a){a&&e.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions([].concat(a));l.forEach(a,function(a){a&&(this.options=l.filter(this.options,function(d){return d.value!==a.value||d.label!==a.label}),this._removeOptionItem(a))},this);this._loadChildren()},updateOption:function(a){l.forEach([].concat(a),function(a){var d=this.getOptions({value:a.value}),p;if(d)for(p in a)d[p]=
a[p]},this);this._loadChildren()},setStore:function(d,m,c){var h=this.store;c=c||{};if(h!==d){for(var k;k=this._notifyConnections.pop();)k.remove();d.get||(e.mixin(d,{_oldAPI:!0,get:function(a){var d=new f;this.fetchItemByIdentity({identity:a,onItem:function(a){d.resolve(a)},onError:function(a){d.reject(a)}});return d.promise},query:function(a,d){var p=new f(function(){c.abort&&c.abort()});p.total=new f;var c=this.fetch(e.mixin({query:a,onBegin:function(a){p.total.resolve(a)},onComplete:function(a){p.resolve(a)},
onError:function(a){p.reject(a)}},d));return new g(p)}}),d.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[b.after(d,"onNew",e.hitch(this,"_onNewItem"),!0),b.after(d,"onDelete",e.hitch(this,"_onDeleteItem"),!0),b.after(d,"onSet",e.hitch(this,"_onSetItem"),!0)]));this._set("store",d)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();c.query&&(this._set("query",c.query),this._set("queryOptions",c.queryOptions));
d&&(this._loadingStore=!0,this.onLoadDeferred=new f,this._queryRes=d.query(this.query,this.queryOptions),n(this._queryRes,e.hitch(this,function(g){if(this.sortByLabel&&!c.sort&&g.length)if(d.getValue)g.sort(a.createSortFunction([{attribute:d.getLabelAttributes(g[0])[0]}],d));else{var b=this.labelAttr;g.sort(function(a,d){return a[b]>d[b]?1:d[b]>a[b]?-1:0})}c.onFetch&&(g=c.onFetch.call(this,g,c));l.forEach(g,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&this._queryRes.observe(e.hitch(this,
function(a,d,p){d==p?this._onSetItem(a):(-1!=d&&this._onDeleteItem(a),-1!=p&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:m);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(g):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)}));return h},_setValueAttr:function(a,d){this._onChangeActive||(d=null);
if(this._loadingStore)this._pendingValue=a;else if(null!=a){a=e.isArray(a)?l.map(a,function(a){return e.isObject(a)?a:{value:a}}):e.isObject(a)?[a]:[{value:a}];a=l.filter(this.getOptions(a),function(a){return a&&a.value});var g=this.getOptions()||[];if(!this.multiple&&(!a[0]||!a[0].value)&&g.length)a[0]=g[0];l.forEach(g,function(d){d.selected=l.some(a,function(a){return a.value===d.value})});g=l.map(a,function(a){return a.value});if(!("undefined"==typeof g||"undefined"==typeof g[0])){var c=l.map(a,
function(a){return a.label});this._setDisplay(this.multiple?c:c[0]);this.inherited(arguments,[this.multiple?g:g[0],d]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=l.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(l.forEach(this._getChildren(),
function(a){a.destroyRecursive()}),l.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var a=[].concat(this.value);if(a&&a[0]){var d=this;l.forEach(this._getChildren(),function(g){var e=l.some(a,function(a){return g.option&&a===g.option.value});e&&!d.multiple&&(d.focusedChild=g);c.toggle(g.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),e);g.domNode.setAttribute("aria-selected",
e?"true":"false")},this)}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){var d=l.filter(a,function(a){return a.selected})[0];if(d&&d.value)return d.value;a[0].selected=!0;return a[0].value}return this.multiple?l.map(l.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,d){(!d||!d.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},
_getOptionObjForItem:function(a){var d=this.store,g=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:d.getLabel(a);return{value:g?d.getIdentity(a):null,label:g,item:a}},_addOptionForItem:function(a){var d=this.store;d.isItemLoaded&&!d.isItemLoaded(a)?d.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):(a=this._getOptionObjForItem(a),this.addOption(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);
k.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?q("\x3e *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+h._scopeName+"-value")||a.getAttribute("value"),label:String(a.innerHTML),selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",
this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);b.after(this,"onChange",e.hitch(this,"_updateSelection"));var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();
this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(l){var f={};l.setObject("dojo.data.util.sorter",f);f.basicComparator=function(b,a){var m=-1;null===b&&(b=void 0);null===a&&(a=void 0);if(b==a)m=0;else if(b>
a||null==b)m=1;return m};f.createSortFunction=function(b,a){function m(a,g,e,c){return function(m,b){var n=c.getValue(m,a),h=c.getValue(b,a);return g*e(n,h)}}for(var k=[],c,h=a.comparatorMap,e=f.basicComparator,q=0;q<b.length;q++){c=b[q];var n=c.attribute;if(n){c=c.descending?-1:1;var g=e;h&&("string"!==typeof n&&"toString"in n&&(n=n.toString()),g=h[n]||e);k.push(m(n,c,g,a))}}return function(a,g){for(var e=0;e<k.length;){var c=k[e++](a,g);if(0!==c)return c}return 0}};return f})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u){return l("dijit._HasDropDown",u,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&(a.preventDefault(),this._docHandler=this.own(n(this.ownerDocument,g.release,q.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(a){a&&
this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var g=this.dropDown,e=!1;if(a&&this._opened){var c=k.position(this._buttonNode,!0);if(!(a.pageX>=c.x&&a.pageX<=c.x+c.w)||!(a.pageY>=c.y&&a.pageY<=c.y+c.h)){for(c=a.target;c&&!e;)m.contains(c,"dijitPopup")?e=!0:c=c.parentNode;if(e){c=a.target;if(g.onItemClick){for(var b;c&&!(b=d.byNode(c));)c=c.parentNode;if(b&&b.onClick&&b.getParent)b.getParent().onItemClick(b,a)}return}}}this._opened?g.focus&&!1!==g.autoFocus&&(this._focusDropDownTimer=
this.defer(function(){g.focus();delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",
left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";m.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(n(this._buttonNode,g.press,q.hitch(this,"_onDropDownMouseDown")),n(this._buttonNode,"click",q.hitch(this,"_onDropDownClick")),n(a,"keydown",q.hitch(this,"_onKey")),n(a,"keyup",q.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||
this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&!this.readOnly){var d=this.dropDown,g=a.target;if(d&&(this._opened&&d.handleKey)&&!1===d.handleKey(a))a.stopPropagation(),a.preventDefault();else if(d&&this._opened&&a.keyCode==e.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==e.DOWN_ARROW||(a.keyCode==e.ENTER||a.keyCode==e.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&
("input"!==(g.tagName||"").toLowerCase()||g.type&&"text"!==g.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(q.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new f,d=q.hitch(this,function(){this.openDropDown();
a.resolve(this.dropDown)});this.isLoaded()?d():this.loadDropDown(d);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var d=this.dropDown,g=d.domNode,c=this._aroundNode||this.domNode,e=this,b=s.open({parent:this,popup:d,around:c,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){e.closeDropDown(!0)},onCancel:function(){e.closeDropDown(!0)},onClose:function(){a.set(e._popupStateNode,
"popupActive",!1);m.remove(e._popupStateNode,"dijitHasDropDownOpen");e._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&c.offsetWidth>d._popupWrapper.offsetWidth)c={w:c.offsetWidth-(d._popupWrapper.offsetWidth-d.domNode.offsetWidth)},q.isFunction(d.resize)?d.resize(c):k.setMarginBox(g,c);a.set(this._popupStateNode,"popupActive","true");m.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",
d.id);"presentation"!==g.getAttribute("role")&&!g.getAttribute("aria-labelledby")&&g.setAttribute("aria-labelledby",this.id);return b},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),s.close(this.dropDown),this._opened=!1)}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin",
"./_MenuBase"],function(l,f,b,a,m){return l("dijit.DropDownMenu",[m,a],{templateString:b,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a);a.stopPropagation();a.preventDefault()},_onLeftArrow:function(){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else evt.stopPropagation(),evt.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s){return f("dijit._MenuBase",[g,s,p,d],{selected:null,_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){m.toggle(this.domNode,"dijitMenuActive",a);m.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(a){var d=n.byNode(a);return a.parentNode==this.containerNode&&d&&d.focus},postCreate:function(){var a=this,d="string"==typeof this.childSelector?this.childSelector:k.hitch(this,"childSelector");this.own(h(this.containerNode,h.selector(d,c.enter),function(){a.onItemHover(n.byNode(this))}),h(this.containerNode,h.selector(d,c.leave),function(){a.onItemUnhover(n.byNode(this))}),h(this.containerNode,h.selector(d,q),function(d){a.onItemClick(n.byNode(this),d);d.stopPropagation();
d.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(a,d,g,c){this.inherited(arguments);if(a&&(-1==c||a.popup&&1==c))this.onItemClick(a,d)},_keyboardSearchCompare:function(a,d){return a.shortcutKey?d==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&
a.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));
this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&
(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,d){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;a.popup?(this.set("selected",a),this.set("activated",!0),this._openItemPopup(a,/^key/.test(d._origType||d.type))):(this.onExecute(),
a._onClick?a._onClick(d):a.onClick(d))},_openItemPopup:function(a,d){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var g=a.popup;g.parentMenu=this;this.own(this._mouseoverHandle=h.once(g.domNode,"mouseover",k.hitch(this,"_onPopupHover")));var c=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){d&&c.focusChild(a);c._cleanUp()},onExecute:k.hitch(this,"_cleanUp",!0),
onClose:function(){c._mouseoverHandle&&(c._mouseoverHandle.remove(),delete c._mouseoverHandle)}},d);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(a.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),
this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g){c=l("dijit.MenuItem"+(k("dojo-bidi")?"_NoBidi":""),[h,e,q,n],{templateString:g,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var g="",c;c=a.search(/{\S}/);if(0<=c){var g=a.charAt(c+1),e=a.substr(0,c);a=a.substr(c+3);c=e+g+a;a=e+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+g+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",g)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);b.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&b.set(this.accelKeyNode,"id",this.id+"_accel");f.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==k("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this.getParent()._onItemFocus(this);
this.inherited(arguments)},_setSelected:function(d){a.toggle(this.domNode,"dijitMenuItemSelected",d)},setLabel:function(a){m.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){m.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",
a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=a?"":"none",this.accelKeyNode.innerHTML=a,b.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});k("dojo-bidi")&&(c=l("dijit.MenuItem",c,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return c})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),
function(l,f,b,a,m,k){return l("dijit.MenuSeparator",[b,a,m],{templateString:k,buildRendering:function(){this.inherited(arguments);f.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"app/vm/AddComInfo":function(){define("dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dojo/text!./tpl/addComInfo.html dojo/dom-construct dojo/dom-attr dojo/dom-style dojo/dom-class app/util/_WidgetBase dojo/json dojo/on dojo/keys dojo/string csp/widget/Upload app/util/CacheStore chanjet/form/Combox chanjet/widget/Dialog app/nav/CompanyNameWrapper".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u,w,v){m=l("app.vm.AddComInfo",[e],{title:null,item:null,fromCustomer:!1,addComInfoDialog:null,addComInfoPanel:null,isValid:!0,validateMessage:"",callback:null,postCreate:function(){this.inherited(arguments);this._initComps();this._initEvent();this.init()},init:function(){this._initData();this.addComInfoPanel.init();this.addComInfoDialog.set("title",this.title)},_initData:function(){this.title="\u8865\u5145\u4f01\u4e1a\u4fe1\u606f"},_initComps:function(){var a=
this;this.addComInfoDialog=new w({"class":"addComInfo",autoDestroy:!1,bottomButtons:[{label:"\u5148\u81ea\u5df1\u8bd5\u7528",sTag:"cancel",baseClass:"whiteButton"},{label:"\u8865\u5145\u5b8c\u6bd5",sTag:"ok",baseClass:"whiteButton"}],contentMaxHeight:"auto",contentMinHeight:"194px",style:"width : 619px; height:auto;",buttonClick:function(d,g,c){"ok"==c?a.addComInfoPanel.validate()?(App.showLoading(),d=a.addComInfoPanel.getValue(),a._updateOrgName(d)):a.addComInfoPanel.showErrorMessage("\u4f01\u4e1a\u540d\u4e0d\u80fd\u4e3a\u7a7a"):
a.destroy()}});this.addComInfoPanel=new t({objId:this.objId,createCallback:f.hitch(this,this._createdHandler)})},_initEvent:function(){},_createdHandler:function(a){this.addComInfoDialog.addChild(a)},show:function(){this.addComInfoDialog.show()},_updateOrgName:function(a){if(!this.connecting){this.connecting=!0;var d=this;xhr.post("business/"+App.apiVersion+"/invite/updateOrgName",{orgName:a},function(g){d.connecting=!1;App.hideLoading();g.result?($(App.header.orgNameNode).text(a),App.user.orgFullName=
a,d.destroy(),d.callback()):!g.result&&"111111"==g.errorCode?d.addComInfoPanel.showErrorMessage():d.addComInfoPanel.showErrorMessage(g.param)},function(){d.connecting=!1;App.hideLoading();d.addComInfoPanel.showErrorMessage("\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef")})}},destroy:function(){this.addComInfoPanel.destroy();this.addComInfoDialog.destroy();this.inherited(arguments)}});var t=l("app.nav.AddComInfoPanel",[e,b],{item:null,templateString:a,connectComps:null,connectIsValid:!0,contentIsValid:!1,contentInValidMessage:"",
processValid:!0,enumLoadFlag:!1,createCallback:null,postCreate:function(){this._initComps();this._initEvent();this.init();this.createCallback&&this.createCallback({domNode:this.domNode})},init:function(){},displayTipNode:function(a){a?c.set(this.tipNode,"display",""):c.set(this.tipNode,"display","none")},showErrorMessage:function(a){a=a?a:"\u4f01\u4e1a\u540d\u5df2\u88ab\u6ce8\u518c\uff0c\u8bf7\u8f93\u5165\u5176\u5b83\u4f01\u4e1a\u540d\u91cd\u8bd5";this.displayTipNode(!0);this.tipNode.innerHTML=a},
_initData:function(){},_initComps:function(){var a=this;this.companyNameInputWrapper=new v({fieldChangedCallback:function(){a.displayTipNode(!1)}});this.companyNameInputWrapper.widget.placeAt(this.companyNameInput);this.displayTipNode(!1)},_initEvent:function(){},validate:function(){return this.companyNameInputWrapper.validate()},getValue:function(){return this.companyNameInputWrapper.getValue()}});return m})},"csp/widget/Upload":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin app/widget/upload/_SWFUpload csp/AppConfig csp/util/Common".split(" "),
function(l,f,b,a,m,k,c){var h=dojo.moduleUrl("csp.widget"),h=h.substring(0,h.charAt("?"));return l("csp.widget.Upload",[b,a],{buttonText:"",buttonImage:h+"upload/TestImageNoText_65x29.png",width:65,height:29,sizeLimit:0,numberLimit:0,uploadLimit:0,autoUpload:!0,fileTypes:"*.*",typesDescription:"",single:!1,templateString:'\x3cspan class\x3d"dijit dijitReset"\x3e\x3cdiv data-dojo-attach-point\x3d"placeNode"\x3e\u4e0a\u4f20\x3c/div\x3e\x3c/span\x3e',postCreate:function(){var a={size:16,left:12,top:4},
b={},m=this.params;m.textStyle&&f.mixin(a,m.textStyle);m.postParams&&f.mixin(b,m.postParams);c.getJson(k.CspUrl.Auth.session,null,f.hitch(this,function(g){if(g){var d=this.url,c="http://"+window.location.host,d=0<this.url.indexOf("?")?d+"\x26":d+"?";this._initSwfu(a,b,c+d+"CSP_SESSIONID\x3d"+g.id)}}))},_initSwfu:function(a,c,b){var g=this;this.swfu=new m({domNode:this.domNode,upload_url:b,post_params:c,flash_url:App.swfPath+"/swfupload.swf",button_placeholder:this.placeNode,button_image_url:this.buttonImage,
button_width:this.width,button_height:this.height,button_window_mode:"transparent",button_text:'\x3cspan class\x3d"theFont"\x3e'+this.buttonText+"\x3c/span\x3e",button_text_style:".theFont { font-size: "+a.size+"; }",button_text_left_padding:a.left,button_text_top_padding:a.top,button_action:this.single?-100:-110,file_size_limit:this.sizeLimit+" MB",file_queue_limit:this.numberLimit,file_upload_limit:this.uploadLimit,file_types:this.fileTypes,file_types_description:this.typesDescription,custom_settings:this.customSettings,
file_dialog_start_handler:function(a,c,e){g.onDialogStart(a,c,e)},file_dialog_complete_handler:function(a,c){g.onFileDialogComplete(a,c);try{this.startUpload()}catch(e){this.debug(e)}},upload_start_handler:function(a){g.onUploadStart(a)},upload_progress_handler:function(a,c,e){g.onProgress(a,c,e)},upload_complete_handler:function(a){g.onComplete(a);if(!a)return!1},upload_error_handler:function(a,c,e){g.onError(a,c,e)},upload_success_handler:function(a,c){g.onSuccess(a,c)},queue_complete_handler:function(a){g.onFinish(a)},
file_queued_handler:function(a){g.onReady(a)},file_queue_error_handler:function(a,c,e){g.onReadyError(a,c,e)}})},start:function(a){this.swfu.startUpload(a)},stop:function(){this.swfu.cancelQueue()},destroy:function(a){this.swfu.destroy();this.inherited(arguments)},reset:function(){this.setStats({in_progress:0,files_queued:0,successful_uploads:0,upload_errors:0,upload_cancelled:0,queue_errors:0})},setStats:function(a){this.swfu.setStats(a)},cancleUpload:function(a,c){this.swfu.cancelUpload(a,c)},getStats:function(){return this.swfu.getStats()},
debug:function(a){this.swfu.debug(a)},onReady:function(a){this.inherited(arguments)},onReadyError:function(a,c,b){this.inherited(arguments)},onDialogStart:function(a,c,b){this.inherited(arguments)},onFileDialogComplete:function(a,c,b){this.inherited(arguments)},onProgress:function(a,c,b){this.inherited(arguments)},onComplete:function(a){this.inherited(arguments)},onError:function(a,c,b){this.swfu.debug("Error Code: '+code+', File name: "+a.name+", Message: "+b);this.inherited(arguments)},onSuccess:function(a,
c){this.inherited(arguments)},onFinish:function(a){this.inherited(arguments)},onUploadStart:function(a){this.inherited(arguments)}})})},"app/widget/upload/_SWFUpload":function(){define(["dojo/_base/declare","dojo/dom"],function(l,f){if(window.SWFUpload)return window.SWFUpload;var b;void 0==b&&(b=function(a){this.initSWFUpload(a)});b.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+b.movieCount++,this.movieElement=null,this.domNode=
a.domNode,b.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(m){throw delete b.instances[this.movieName],m;}};b.instances={};b.movieCount=0;b.version="2.2.0 2009-03-25";b.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};b.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,
FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};b.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};b.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};b.CURSOR={ARROW:-1,HAND:-2};b.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};b.completeURL=function(a){if("string"!==typeof a||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var b=window.location.pathname.lastIndexOf("/");path=0>=b?"/":window.location.pathname.substr(0,b)+"/";return path+
a};b.prototype.initSettings=function(){this.ensureDefault=function(a,b){this.settings[a]=void 0==this.settings[a]?b:this.settings[a]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",b.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",b.CURSOR.ARROW);this.ensureDefault("button_window_mode",b.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=
this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",
null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;this.settings.preserve_relative_urls||(this.settings.upload_url=b.completeURL(this.settings.upload_url),this.settings.button_image_url=b.completeURL(this.settings.button_image_url));delete this.ensureDefault};b.prototype.loadFlash=function(){var a,b;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";
a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(void 0==a)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())};b.prototype.getFlashHTML=function(){return['\x3cobject id\x3d"',this.movieName,'" type\x3d"application/x-shockwave-flash" data\x3d"',
this.settings.flash_url,'" width\x3d"',this.settings.button_width,'" height\x3d"',this.settings.button_height,'" class\x3d"swfupload"\x3e\x3cparam name\x3d"wmode" value\x3d"',this.settings.button_window_mode,'" /\x3e\x3cparam name\x3d"movie" value\x3d"',this.settings.flash_url,'" /\x3e\x3cparam name\x3d"quality" value\x3d"high" /\x3e\x3cparam name\x3d"menu" value\x3d"false" /\x3e\x3cparam name\x3d"allowScriptAccess" value\x3d"always" /\x3e','\x3cparam name\x3d"flashvars" value\x3d"'+this.getFlashVars()+
'" /\x3e',"\x3c/object\x3e"].join("")};b.prototype.getFlashVars=function(){var a=this.buildParamString(),b=this.settings.http_success.join(",");return["movieName\x3d",encodeURIComponent(this.movieName),"\x26amp;uploadURL\x3d",encodeURIComponent(this.settings.upload_url),"\x26amp;useQueryString\x3d",encodeURIComponent(this.settings.use_query_string),"\x26amp;requeueOnError\x3d",encodeURIComponent(this.settings.requeue_on_error),"\x26amp;httpSuccess\x3d",encodeURIComponent(b),"\x26amp;assumeSuccessTimeout\x3d",
encodeURIComponent(this.settings.assume_success_timeout),"\x26amp;params\x3d",encodeURIComponent(a),"\x26amp;filePostName\x3d",encodeURIComponent(this.settings.file_post_name),"\x26amp;fileTypes\x3d",encodeURIComponent(this.settings.file_types),"\x26amp;fileTypesDescription\x3d",encodeURIComponent(this.settings.file_types_description),"\x26amp;fileSizeLimit\x3d",encodeURIComponent(this.settings.file_size_limit),"\x26amp;fileUploadLimit\x3d",encodeURIComponent(this.settings.file_upload_limit),"\x26amp;fileQueueLimit\x3d",
encodeURIComponent(this.settings.file_queue_limit),"\x26amp;debugEnabled\x3d",encodeURIComponent(this.settings.debug_enabled),"\x26amp;buttonImageURL\x3d",encodeURIComponent(this.settings.button_image_url),"\x26amp;buttonWidth\x3d",encodeURIComponent(this.settings.button_width),"\x26amp;buttonHeight\x3d",encodeURIComponent(this.settings.button_height),"\x26amp;buttonText\x3d",encodeURIComponent(this.settings.button_text),"\x26amp;buttonTextTopPadding\x3d",encodeURIComponent(this.settings.button_text_top_padding),
"\x26amp;buttonTextLeftPadding\x3d",encodeURIComponent(this.settings.button_text_left_padding),"\x26amp;buttonTextStyle\x3d",encodeURIComponent(this.settings.button_text_style),"\x26amp;buttonAction\x3d",encodeURIComponent(this.settings.button_action),"\x26amp;buttonDisabled\x3d",encodeURIComponent(this.settings.button_disabled),"\x26amp;buttonCursor\x3d",encodeURIComponent(this.settings.button_cursor)].join("")};b.prototype.getMovieElement=function(){if(void 0==this.movieElement)for(var a=this.domNode.getElementsByTagName("object"),
b=0,k=a.length;b<k;b++){var c=a[b];if(c.id==this.movieName){this.movieElement=c;break}}if(void 0===this.movieElement)throw"Could not find Flash element";return this.movieElement};b.prototype.buildParamString=function(){var a=this.settings.post_params,b=[];if("object"===typeof a)for(var k in a)a.hasOwnProperty(k)&&b.push(encodeURIComponent(k.toString())+"\x3d"+encodeURIComponent(a[k].toString()));return b.join("\x26amp;")};b.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if((a=
this.getMovieElement())&&"unknown"===typeof a.CallFunction){for(var m in a)try{"function"===typeof a[m]&&(a[m]=null)}catch(k){}try{a.parentNode.removeChild(a)}catch(c){}}window[this.movieName]=null;b.instances[this.movieName]=null;delete b.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(h){return!1}};b.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",b.version,"\nMovie Name: ",
this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",
this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",
this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",
this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",("function"===typeof this.settings.swfupload_loaded_handler).toString(),"\n\tfile_dialog_start_handler assigned: ",
("function"===typeof this.settings.file_dialog_start_handler).toString(),"\n\tfile_queued_handler assigned:       ",("function"===typeof this.settings.file_queued_handler).toString(),"\n\tfile_queue_error_handler assigned:  ",("function"===typeof this.settings.file_queue_error_handler).toString(),"\n\tupload_start_handler assigned:      ",("function"===typeof this.settings.upload_start_handler).toString(),"\n\tupload_progress_handler assigned:   ",("function"===typeof this.settings.upload_progress_handler).toString(),
"\n\tupload_error_handler assigned:      ",("function"===typeof this.settings.upload_error_handler).toString(),"\n\tupload_success_handler assigned:    ",("function"===typeof this.settings.upload_success_handler).toString(),"\n\tupload_complete_handler assigned:   ",("function"===typeof this.settings.upload_complete_handler).toString(),"\n\tdebug_handler assigned:             ",("function"===typeof this.settings.debug_handler).toString(),"\n"].join(""))};b.prototype.addSetting=function(a,b,k){return void 0==
b?this.settings[a]=k:this.settings[a]=b};b.prototype.getSetting=function(a){return void 0!=this.settings[a]?this.settings[a]:""};b.prototype.callFlash=function(a,b){b=b||[];var k=this.getMovieElement(),c,h;try{h=k.CallFunction('\x3cinvoke name\x3d"'+a+'" returntype\x3d"javascript"\x3e'+__flash__argumentsToXML(b,0)+"\x3c/invoke\x3e"),c=eval(h)}catch(e){throw"Call to "+a+" failed";}void 0!=c&&"object"===typeof c.post&&(c=this.unescapeFilePostParams(c));return c};b.prototype.selectFile=function(){this.callFlash("SelectFile")};
b.prototype.selectFiles=function(){this.callFlash("SelectFiles")};b.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};b.prototype.cancelUpload=function(a,b){!1!==b&&(b=!0);this.callFlash("CancelUpload",[a,b])};b.prototype.stopUpload=function(){this.callFlash("StopUpload")};b.prototype.getStats=function(){return this.callFlash("GetStats")};b.prototype.setStats=function(a){this.callFlash("SetStats",[a])};b.prototype.getFile=function(a){return"number"===typeof a?this.callFlash("GetFileByIndex",
[a]):this.callFlash("GetFile",[a])};b.prototype.addFileParam=function(a,b,k){return this.callFlash("AddFileParam",[a,b,k])};b.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};b.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};b.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};b.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",
[this.settings.post_params])};b.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};b.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};b.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};b.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",
[a])};b.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};b.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};b.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};b.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};b.prototype.setHTTPSuccess=function(a){"string"===
typeof a&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};b.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};b.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};b.prototype.setButtonImageURL=function(a){void 0==a&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};b.prototype.setButtonDimensions=
function(a,b){this.settings.button_width=a;this.settings.button_height=b;var k=this.getMovieElement();void 0!=k&&(k.style.width=a+"px",k.style.height=b+"px");this.callFlash("SetButtonDimensions",[a,b])};b.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};b.prototype.setButtonTextPadding=function(a,b){this.settings.button_text_top_padding=b;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,b])};b.prototype.setButtonTextStyle=
function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};b.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};b.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};b.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};b.prototype.queueEvent=function(a,b){void 0==b?b=[]:b instanceof Array||(b=[b]);
var k=this;if("function"===typeof this.settings[a])this.eventQueue.push(function(){this.settings[a].apply(this,b)}),setTimeout(function(){k.executeNextEvent()},0);else if(null!==this.settings[a])throw"Event handler "+a+" is unknown or is not a function";};b.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;"function"===typeof a&&a.apply(this)};b.prototype.unescapeFilePostParams=function(a){var b=/[$]([0-9a-f]{4})/i,k={},c;if(void 0!=a){for(var h in a.post)if(a.post.hasOwnProperty(h)){c=
h;for(var e;null!==(e=b.exec(c));)c=c.replace(e[0],String.fromCharCode(parseInt("0x"+e[1],16)));k[c]=a.post[h]}a.post=k}return a};b.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}};b.prototype.flashReady=function(){var a=this.getMovieElement();a?(this.cleanUp(a),this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")};b.prototype.cleanUp=function(a){try{if(a&&this.movieElement&&
"unknown"===typeof a.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var b in a)try{"function"===typeof a[b]&&(a[b]=null)}catch(k){}}}catch(c){}window.__flash__removeCallback=function(a,c){try{a&&(a[c]=null)}catch(b){}}};b.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};b.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};b.prototype.fileQueueError=
function(a,b,k){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,b,k])};b.prototype.fileDialogComplete=function(a,b,k){this.queueEvent("file_dialog_complete_handler",[a,b,k])};b.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};b.prototype.returnUploadStart=function(a){var b;if("function"===typeof this.settings.upload_start_handler)a=this.unescapeFilePostParams(a),b=this.settings.upload_start_handler.call(this,
a);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===b&&(b=!0);this.callFlash("ReturnUploadStart",[!!b])};b.prototype.uploadProgress=function(a,b,k){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,b,k])};b.prototype.uploadError=function(a,b,k){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,b,k])};b.prototype.uploadSuccess=function(a,b,k){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",
[a,b,k])};b.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};b.prototype.debug=function(a){this.queueEvent("debug_handler",a)};b.prototype.debugMessage=function(a){if(this.settings.debug){var m=[];if("object"===typeof a&&"string"===typeof a.name&&"string"===typeof a.message){for(var k in a)a.hasOwnProperty(k)&&m.push(k+": "+a[k]);a=m.join("\n")||"";m=a.split("\n");a="EXCEPTION: "+m.join("\nEXCEPTION: ")}b.Console.writeLine(a)}};b.Console=
{};b.Console.writeLine=function(a){var b,k;try{b=document.getElementById("SWFUpload_Console"),b||(k=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(k),b=document.createElement("textarea"),b.id="SWFUpload_Console",b.style.fontFamily="monospace",b.setAttribute("wrap","off"),b.wrap="off",b.style.overflow="auto",b.style.width="700px",b.style.height="350px",b.style.margin="5px",k.appendChild(b)),b.value+=a+"\n",b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+
c.name+" Message: "+c.message)}};b.queue={};b.prototype.initSettings=function(a){return function(){"function"===typeof a&&a.call(this);this.queueSettings={};this.queueSettings.queue_cancelled_flag=!1;this.queueSettings.queue_upload_count=0;this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler;this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler;this.settings.upload_complete_handler=b.queue.uploadCompleteHandler;this.settings.upload_start_handler=
b.queue.uploadStartHandler;this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(b.prototype.initSettings);b.prototype.startUpload=function(a){this.queueSettings.queue_cancelled_flag=!1;this.callFlash("StartUpload",[a])};b.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=!0;this.stopUpload();for(var a=this.getStats();0<a.files_queued;)this.cancelUpload(),a=this.getStats()};b.queue.uploadStartHandler=function(a){var b;"function"===typeof this.queueSettings.user_upload_start_handler&&
(b=this.queueSettings.user_upload_start_handler.call(this,a));b=!1===b?!1:!0;this.queueSettings.queue_cancelled_flag=!b;return b};b.queue.uploadCompleteHandler=function(a){var m=this.queueSettings.user_upload_complete_handler;a.filestatus===b.FILE_STATUS.COMPLETE&&this.queueSettings.queue_upload_count++;if("function"===typeof m?!1!==m.call(this,a):a.filestatus!==b.FILE_STATUS.QUEUED)0<this.getStats().files_queued&&!1===this.queueSettings.queue_cancelled_flag?this.startUpload():(!1===this.queueSettings.queue_cancelled_flag?
this.queueEvent("queue_complete_handler",[this.queueSettings.queue_upload_count]):this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)};return window.SWFUpload=b})},"app/util/CacheStore":function(){define(["dojo/_base/declare","dojo/store/Memory","app/util/JsonRest","dojo/store/Cache"],function(l,f,b,a){return{getStore:function(m){return new a(new b(m),new f)}}})},"app/util/JsonRest":function(){define(["dojo/_base/xhr","dojo/_base/lang","dojo/json","dojo/_base/declare",
"dojo/store/util/QueryResults"],function(l,f,b,a,m){return a("dojo.store.JsonRest",null,{constructor:function(b){this.headers={};a.safeMixin(this,b)},headers:{},target:"",idProperty:"id",ascendingPrefix:"+",descendingPrefix:"-",get:function(a,b){b=b||{};var h=f.mixin({Accept:this.accepts},this.headers,b.headers||b);return l("GET",{url:this.target+a,handleAs:"json",headers:h})},accepts:"application/javascript, application/json",getIdentity:function(a){return a[this.idProperty]},put:function(a,c){c=
c||{};var h="id"in c?c.id:this.getIdentity(a),e="undefined"!=typeof h;return l(e&&!c.incremental?"PUT":"POST",{url:e?this.target+h:this.target,postData:b.stringify(a),handleAs:"json",headers:f.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===c.overwrite?"*":null,"If-None-Match":!1===c.overwrite?"*":null},this.headers,c.headers)})},add:function(a,b){b=b||{};b.overwrite=!1;return this.put(a,b)},remove:function(a,b){b=b||{};return l("DELETE",{url:this.target+a,headers:f.mixin({},
this.headers,b.headers)})},query:function(a,b){b=b||{};var h=f.mixin({Accept:this.accepts},this.headers,b.headers);if(0<=b.start||0<=b.count)a.pageno=Math.floor(b.start/b.count)+1,a.pagesize=b.count;var e=-1<this.target.indexOf("?");a&&"object"==typeof a&&(a=(a=l.objectToQuery(a))?(e?"\x26":"?")+a:"");if(b&&b.sort){var q=this.sortParam;a+=(a||e?"\x26":"?")+(q?q+"\x3d":"sort(");for(e=0;e<b.sort.length;e++){var n=b.sort[e];a+=(0<e?",":"")+(n.descending?this.descendingPrefix:this.ascendingPrefix)+encodeURIComponent(n.attribute)}q||
(a+=")")}h=l("GET",{url:this.target+(a||""),handleAs:"json",headers:h});h.total=h.then(function(a){return a.total});return m(h)}})})},"dojo/store/Cache":function(){define(["../_base/lang","../when"],function(l,f){var b=function(a,b,k){k=k||{};return l.delegate(a,{query:function(c,h){var e=a.query(c,h);e.forEach(function(a){(!k.isLoaded||k.isLoaded(a))&&b.put(a)});return e},queryEngine:a.queryEngine||b.queryEngine,get:function(c,h){return f(b.get(c),function(e){return e||f(a.get(c,h),function(a){a&&
b.put(a,{id:c});return a})})},add:function(c,h){return f(a.add(c,h),function(a){b.add(c&&"object"==typeof a?a:c,h);return a})},put:function(c,h){b.remove(h&&h.id||this.getIdentity(c));return f(a.put(c,h),function(a){b.put(c&&"object"==typeof a?a:c,h);return a})},remove:function(c,h){return f(a.remove(c,h),function(a){return b.remove(c,h)})},evict:function(a){return b.remove(a)}})};l.setObject("dojo.store.Cache",b);return b})},"chanjet/form/Combox":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/string dojo/when dijit/form/ValidationTextBox ./ComboBoxMixin".split(" "),
function(l,f,b,a,m,k,c){return l("chanjet.form.Comboxs",[k,c],{_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.itemAttr||this.searchAttr):c[this.itemAttr||this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",
f.get(a,"id"));this._autoCompleteText(b)}}})})},"chanjet/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin dijit/form/_ComboBoxMenu dijit/_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(l,f,b,a,m,k,c,h,e){return l("dijit.form.ComboBoxMixin",[h,k],{dropDownClass:c,hasDownArrow:!0,templateString:e,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},
_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||a.mixin(b,{_oldAPI:!0,get:function(a){var b=new f;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(b,c){var d=new f(function(){e.abort&&e.abort()});d.total=new f;var e=this.fetch(a.mixin({query:b,
onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},onError:function(a){d.reject(a)}},c));return m(d)}});this._set("store",b)},postMixInProperties:function(){var c=this.params.store||this.store;c&&this._setStoreAttr(c);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var e=this.declaredClass;a.mixin(this.store,{getValue:function(a,d){b.deprecated(e+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[d]},
getLabel:function(a){b.deprecated(e+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(c){b.deprecated(e+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],a.hitch(this,function(a){(new a({objectStore:this})).fetch(c)}))}})}}})})},"chanjet/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff dijit/form/DataList dijit/form/_TextBoxMixin ./_SearchMixin".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n){f=f("chanjet.form._AutoCompleterMixin",n,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(h("ie")){var c=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(e){}}return b},
_setCaretPos:function(a,b){b=parseInt(b);q.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(b){if(!(32<=b.charCode)){var d=b.charCode||b.keyCode;if(!(d==a.ALT||d==a.CTRL||d==a.META||d==a.SHIFT)){var c=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!b.altKey&&!b.ctrlKey&&!b.metaKey)switch(this._opened&&(e=c.getHighlightedOption()),d){case a.PAGE_DOWN:case a.DOWN_ARROW:case a.PAGE_UP:case a.UP_ARROW:this._opened&&
this._announceOption(e);b.stopPropagation();b.preventDefault();break;case a.ENTER:if(e){if(e==c.nextButton){this._nextSearch(1);b.stopPropagation();b.preventDefault();break}else if(e==c.previousButton){this._nextSearch(-1);b.stopPropagation();b.preventDefault();break}b.stopPropagation();b.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case a.TAB:d=this.get("displayedValue");if(c&&(d==c._messages.previousMessage||d==c._messages.nextMessage))break;
e&&this._selectOption(e);case a.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=this.focusNode;q.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";0==a[c](0).indexOf(this.focusNode.value[c](0))?(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length&&(b.value=a,q.selectInputText(b,c))):(b.value=a,q.selectInputText(b))},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();
this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=m.hitch(this,function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,c,m.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&(!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString()))&&
this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||
a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var e="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),e=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",
e,b,c,a)},_announceOption:function(a){if(a){var c;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)c=a.innerHTML,this.item=void 0,this.value="";else{var e=this.dropDown.items[a.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(e,this.searchAttr):e[this.searchAttr]).toString();this.set("item",e,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",b.get(a,"id"));this._autoCompleteText(c)}},
_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (m.isString(this.dropDownClass)?m.getObject(this.dropDownClass,
!1):this.dropDownClass)({onChange:m.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new e({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=
k('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",a[0].id));this.inherited(arguments);l.after(this,"onSearch",m.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&("text"==this.labelType&&this._lastInput)&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var e=(this.ignoreCase?
"i":"")+("all"==this.highlightMatch?"g":""),h=this.queryExpr.indexOf("${0}");b=c.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==h?"^":"")+"("+b+")"+(h==this.queryExpr.length-4?"$":""),e),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=
null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,e){this._set("item",e||null);null==a&&(a="");this.inherited(arguments)}});h("dojo-bidi")&&f.extend({_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}});return f})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),
function(l,f,b,a,m,k){function c(a){return{id:a.value,value:a.value,name:b.trim(a.innerText||a.textContent||"")}}return l("dijit.form.DataList",m,{constructor:function(h,e){this.domNode=f.byId(e);b.mixin(this,h);this.id&&k.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:a("option",this.domNode).map(c)}])},destroy:function(){k.remove(this.id)},fetchSelectedItem:function(){var b=a("\x3e option[selected]",this.domNode)[0]||a("\x3e option",this.domNode)[0];return b&&c(b)}})})},
"chanjet/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when dijit/registry".split(" "),function(l,f,b,a,m,k,c){return l("chanjet.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,g){return c?".*":g?".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},
_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!("type"in
a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||a.metaKey)&&"x"!=b&&"v"!=b||b==f.SHIFT))){this._prev_key_backspace=a=!1;switch(b){case f.DELETE:case f.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();
var c=this,f=b.clone(this.query),n={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},g=m.substitute(this.queryExpr,[a]),d,p=function(){var a=c._fetchHandle=c.store.query(f,n);!c.disabled&&!(c.readOnly||d!==c._lastQuery)&&k(a,function(b){c._fetchHandle=null;!c.disabled&&(!c.readOnly&&d===c._lastQuery)&&k(a.total,function(a){b.items&&(b=b.items);b.total=a;var d=c.pageSize;if(isNaN(d)||d>b.total)d=b.total;b.nextPage=function(a){n.direction=a=!1!==a;n.count=d;a?(n.start+=
b.length,n.start>=b.total&&(n.count=0)):(n.start-=d,0>n.start&&(n.count=Math.max(d+n.start,0),n.start=0));0>=n.count?(b.length=0,c.onSearch(b,f,n)):p()};c.onSearch(b,f,n)})},function(a){c._fetchHandle=null;c._cancelingQuery||console.error(c.declaredClass+" "+a.toString())})};b.mixin(n,this.fetchProperties);this.store._oldAPI?d=g:(d=this._patternToRegExp(g),d.toString=function(){return g});this._lastQuery=f[this.searchAttr]=d;this._queryDeferHandle=this.defer(p,this.searchDelay)},constructor:function(){this.query=
{};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=c.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),function(l,f,b,a,m,k,c,h){return l("dijit.form._ComboBoxMenu",[m,k,h,c],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(f.add(this.previousButton,"dijitMenuItemRtl"),f.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){f.add(a,"dijitMenuItemHover")},onUnhover:function(a){f.remove(a,
"dijitMenuItemHover")},onSelect:function(a){f.add(a,"dijitMenuItemSelected")},onDeselect:function(a){f.remove(a,"dijitMenuItemSelected")},_page:function(a){var c=0,n=this.domNode.scrollTop,g=b.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();c<g;){var d=this.getHighlightedOption();if(a){if(!d.previousSibling||"none"==d.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!d.nextSibling||"none"==d.nextSibling.style.display)break;this.selectNextNode()}d=
this.domNode.scrollTop;c+=(d-n)*(a?-1:1);n=d}},handleKey:function(b){switch(b.keyCode){case a.DOWN_ARROW:return this.selectNextNode(),!1;case a.PAGE_DOWN:return this._page(!1),!1;case a.UP_ARROW:return this.selectPreviousNode(),!1;case a.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(l,f,b,a,m){var k=f("dijit.form._ComboBoxMenuMixin"+
(a("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=m.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a);this.onChange(a)},onClick:function(a){if(a==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(a==
this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,b){var e=this._createMenuItem(),k=b(a);k.html?e.innerHTML=k.label:e.appendChild(e.ownerDocument.createTextNode(k.label));""==e.innerHTML&&(e.innerHTML="\x26#160;");return e},createOptions:function(a,h,e){this.items=a;this.previousButton.style.display=0==h.start?"none":"";b.set(this.previousButton,"id",this.id+
"_prev");l.forEach(a,function(a,c){var d=this._createOption(a,e);d.setAttribute("item",c);b.set(d,"id",this.id+c);this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var k=!1;a.total&&!a.total.then&&-1!=a.total?h.start+h.count<a.total?k=!0:h.start+h.count>a.total&&h.count==a.length&&(k=!0):h.count==a.length&&(k=!0);this.nextButton.style.display=k?"":"none";b.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;2<a.childNodes.length;)a.removeChild(a.childNodes[a.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});a("dojo-bidi")&&(k=f("dijit.form._ComboBoxMenuMixin",
k,{_createOption:function(){var a=this.inherited(arguments);this.applyTextDir(a);return a}}));return k})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(l,f,b,a){return l("dijit.form._ListMouseMixin",a,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this.own(f(this.domNode,"mousedown",function(a){a.preventDefault()}));this._listConnect("click","_onClick");this._listConnect(b.press,"_onMouseDown");this._listConnect(b.release,
"_onMouseUp");this._listConnect(b.over,"_onMouseOver");this._listConnect(b.out,"_onMouseOut")},_onClick:function(a,b){this._setSelectedAttr(b);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b)},_onMouseUp:function(a,b){this._isDragging=!1;var c=this.selected,h=this._hoveredNode;
c&&b==c?this.defer(function(){this._onClick(a,c)}):h&&this.defer(function(){this._onClick(a,h)})},_onMouseOut:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(a,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare",
"dojo/on","dojo/window"],function(l,f,b){return l("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,b){var k=this;return k.own(f(k.containerNode,f.selector(function(a,b,e){return a.parentNode==e},a),function(a){a.preventDefault();k[b](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;
this._setSelectedAttr(a)},selectNextNode:function(){var a=this.selected;if(a){for(a=a.nextSibling;a&&"none"==a.style.display;)a=a.nextSibling;a?this._setSelectedAttr(a):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(a=a.previousSibling;a&&"none"==a.style.display;)a=a.previousSibling;a?this._setSelectedAttr(a):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(a){if(this.selected!=a){var f=this.selected;if(f)this.onDeselect(f);
a&&(b.scrollIntoView(a),this.onSelect(a));this._set("selected",a)}else if(a)this.onSelect(a)}})})},"app/nav/CompanyNameWrapper":function(){define("app/nav/CompanyNameWrapper",["dojo/_base/declare","dijit/form/ValidationTextBox","dojo/_base/lang","dojo/on","dojo/json"],function(l,f,b,a,m){return l("app/nav/CompanyNameWrapper",null,{isUnique:!1,isEmpty:!1,originValue:null,fieldChangedCallback:null,constructor:function(a){l.safeMixin(this,a);this._buildWidget()},_buildWidget:function(){var a={name:"",
maxLength:50};this.isUnique=this.forEdit?!0:!1;a.required=!0;a.missingMessage="\u4f01\u4e1a\u540d\u4e0d\u80fd\u4e3a\u7a7a";a.trim=!0;a.style={width:"320px"};this.widget=new f(a);this._initEvent()},_initEvent:function(){a(this.widget,"blur",b.hitch(this,this._checkName));a(this.widget,"keyDown",b.hitch(this,this._fieldChanged))},_checkName:function(){0==this.widget.get("value").length?(this.isEmpty=!0,this.widget.validate()):this.isEmpty=!1},_fieldChanged:function(){this.fieldChangedCallback&&this.fieldChangedCallback()},
validate:function(){this.widget.startup();return this.widget.validate()},getValue:function(){return this.widget.getValue()}})})},"app/vm/EmployeeMarker":function(){define("dojo/_base/declare dojo/dom-construct dojo/Evented dijit/_TemplatedMixin dijit/_OnDijitClickMixin app/util/_WidgetBase dojo/text!./tpl/employeeMarker.html".split(" "),function(l,f,b,a,m,k,c){return l("app/vm/EmployeeMarker",[k,a,b],{templateString:c,headPicture:App.imagePath+"m.png",type:"boss",employeeClass:{boss:"boss",admin:"admin",
teamLeader:"teamLeader",normal:"normal"},name:"",dragable:!1,employeeTitle:"",deleteable:!0,constructor:function(){this.inherited(arguments)},postMixInProperties:function(){this.headPicture=this.headPicture?this.headPicture+"64.jpg":App.imagePath+"m.png"},postCreate:function(){this._initCom()},destroy:function(){this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode);this.inherited(arguments)},_initCom:function(){this._initData();f.empty(this.employeeName);this.employeeName.appendChild(f.toDom(this.employeeTitle));
this.employeeMarker.title=this.name;this.employeeMarker.style.cursor=this.dragable?"pointer":""},_updataCom:function(){this._started&&this._initCom()},_initData:function(){var a=App.escape(this.name);a||(a=this.email?this.email.split("@")[0]:this.mobile);switch(this.type){case "boss":this.employeeTitle="\x3cspan\x3e\u8001\u603b-\x3c/span\x3e"+a;break;case "teamLeader":this.employeeTitle="\x3cspan\x3e\u4e3b\u7ba1-\x3c/span\x3e"+a;break;case "admin":this.employeeTitle="\x3cspan\x3e\u526f\u603b-\x3c/span\x3e"+
a;break;default:this.employeeTitle=a}return a},_initEvent:function(){this.own(on(this.employeeMarker,"click",lang.hitch(this,this._onHover)))},_onHover:function(){this.deleteable&&(this.removeBtn.style.display="block")},_onUnhover:function(){this.deleteable&&(this.removeBtn.style.display="none")},_onRemoveClick:function(){this.emit("removeEmployee",this)},_getTypeAttr:function(){return this.type},_setTypeAttr:function(a){a&&(this._set("type",a),this._onChange())},_getDragableAttr:function(){return this.dragable},
_setDragableAttr:function(a){a&&(this._set("dragable",a),this._onChange())},_getDeleteAbleAttr:function(){return this.deleteable},_setDeleteAbleAttr:function(a){a&&this._set("deleteable",a)},_onChange:function(){this._updataCom()}})})},"app/vm/NoTeamPanel":function(){define("dojo/_base/declare dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-class dojo/dom-style dijit/form/Button dijit/_TemplatedMixin app/util/_WidgetBase dojo/text!./tpl/noTeamPanel.html dojo/_base/lang dojo/on dojo/topic dojo/aspect dojo/dnd/Source dojo/dnd/Target dojo/dnd/Manager app/vm/EmployeeMarker chanjet/scrollBar/ScrollBar".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u,w,v,t){var r={cancelStructureBtn:{dom:null,style:{label:"\u53d6\u6d88",baseClass:"blueButton",disabled:!0}},saveStructureBtn:{dom:null,style:{label:"\u4fdd\u5b58",baseClass:"blueButton",disabled:!0}}};return l("app/vm/NoEmployeePanel",[e,h],{templateString:q,editable:!1,buttonDisable:!0,dndObjects:null,metaData:null,panel:null,scrollMinHeight:194,constructor:function(a){this.inherited(arguments);this.dndObjects=[]},postCreate:function(){this._initData();this._initCom();
this._initEvent();this._renderEmployees();this._changEditStatus(!0);this.panel&&this.panel.appendChild(this.domNode);this._initScrollPane()},getHierarchyData:function(){for(var a=[],b=0,c=this.dndObjects.length;b<c;b++)a.push(this.dndObjects[b].data);return a},destroy:function(){this.inherited(arguments);r.cancelStructureBtn.dom&&r.cancelStructureBtn.dom.destroy();r.cancelStructureBtn.dom=null;r.saveStructureBtn.dom&&r.saveStructureBtn.dom.destroy();r.saveStructureBtn.dom=null},_initData:function(){var a=
this.metaData,b=this._getBossData(a),c=0<b.length?b[0].userId:null;a&&n.isArray(a)&&f.forEach(a,function(a){if(0==a.userLevel||3==a.userLevel&&!a.parentId||3==a.userLevel&&a.parentId==c)a=n.mixin(a,{deleteable:!1,userRole:"salesman",type:"normal",parentId:c}),this.dndObjects.push({marker:null,data:a})},this)},_getBossData:function(a){return f.filter(a,function(a){if("boss"==a.userRole)return!0})},_initCom:function(){this.buttonNode=b.byId("structure_scBtns");if(dojo.isSafari||dojo.isIE)this.freeGroup.style.marginLeft=
"30px";this._createStructureBtns()},_initScrollPane:function(){var a=window.innerHeight||document.documentElement.clientHeight;this.scrollPane||(this.scrollPane=new t({dom:this.employeeContainer,hasArrow:!0,isFixed:!0,className:"noTeamPanel",autoSize:!0}),this.scrollPane.dom.style.position="relative",this.scrollPane.dom.style.paddingLeft="16px");var b=this.scrollPane.dom.scrollHeight,a=a-400,c=0;b>=a?(c=a,this.scrollPane.autoSize=!1):b<this.scrollMinHeight?(c=this.scrollMinHeight,this.scrollPane.autoSize=
!1):c=b;this.scrollPane.domNode.style.height=c+"px";this.scrollPane.resize()},_addEmployee:function(a){if(!(a.mode&&"drag"==a.mode)){var b=this;window.setTimeout(function(){a.employee.type="normal";var c=n.mixin(a.employee,{type:"normal",deleteable:!1,userLevel:0,userRole:"salesman",parentId:null}),d=new v(c);b.dndObjects.push({marker:d,data:c});b.employeeContainer.appendChild(d.domNode);b._initScrollPane();b._changEditStatus(!0)},0)}},_removeEmployee:function(a){for(var b=-1,c=0,d=this.dndObjects.length;c<
d;c++)if(a==this.dndObjects[c].marker.domNode){b=c;break}return-1!=b?(a=this.dndObjects.splice(b,1)[0],a.marker.destroy(),this._initScrollPane(),a.data):null},_renderEmployees:function(){for(var a=0,b=this.dndObjects.length;a<b;a++){var c=new v(this.dndObjects[a].data);this.employeeContainer.appendChild(c.domNode);this.dndObjects[a].marker=c}},_initEvent:function(){function a(){b.set("buttonDisable",!1)}this.own(g(r.saveStructureBtn.dom,"click",n.hitch(this,this._eventHandler)),g(r.cancelStructureBtn.dom,
"click",n.hitch(this,this._eventHandler)),d.subscribe("removeEmployee",n.hitch(this,this._addEmployee)),d.subscribe("removeEmployee",n.hitch(this,a)),d.subscribe("activeSaveBtns",n.hitch(this,a)),d.subscribe("structureAddMaster",n.hitch(this,a)),d.subscribe("structureAddTeamMembers",n.hitch(this,a)));var b=this},_eventHandler:function(a){a=a.currentTarget.parentNode.getAttribute("id");for(var b=[],c=0,e=App.Invite.hierarchyPanels.structureGroups.length;c<e;c++){var g=App.Invite.hierarchyPanels.structureGroups[c].getNickname();
g&&(b=b.concat(g))}var n=this;if("cancelStructureBtn"==a)App.confirm("\u4eb2\uff0c\u6743\u9650\u8bbe\u7f6e\u8fd8\u6ca1\u4fdd\u5b58\uff0c\u4f60\u786e\u5b9a\u8981\u820d\u5f03\u5df2\u5b8c\u6210\u6743\u9650\u8bbe\u7f6e\u5417\uff1f","\u63d0\u793a",{labels:"\u4e0d\u820d\u5f03,\u820d\u5f03",confirm:function(a,b){a.close();d.publish("cancelHierarchyEdit",n)}});else if(0<b.length){var p="\u4eb2\uff0c\u4f60\u8981\u4fdd\u5b58\u5f53\u524d\u7684\u6743\u9650\u8bbe\u7f6e\u5417\uff1f\x3c/br\x3e";f.forEach(b,function(a,
c){p=c!=b.length-1?p+("\u201c"+a+"\u201d\u3001"):p+("\u201c"+a+"\u201d")});p+="\u7b49\u4e1a\u52a1\u5458\u6ca1\u6709\u6307\u5b9a\u4e3b\u7ba1\uff0c\u5c06\u81ea\u52a8\u8f6c\u79fb\u7ed9\u8001\u603b\u76f4\u7ba1\u3002";App.confirm(p,"\u63d0\u793a",{labels:"\u5173\u95ed,\u4fdd\u5b58",confirm:function(a,b){a.close();d.publish("saveHierarchyUsers",n)}})}else App.confirm("\u4eb2\uff0c\u4f60\u8981\u4fdd\u5b58\u5f53\u524d\u7684\u6743\u9650\u8bbe\u7f6e\u5417\uff1f","\u63d0\u793a",{labels:"\u5173\u95ed,\u4fdd\u5b58",
confirm:function(a,b){a.close();d.publish("saveHierarchyUsers",n)}})},_createStructureBtns:function(){for(var a in r)if(!r[a].dom){var b=new c(r[a].style);"saveStructureBtn"==a?(b.domNode.setAttribute("id","saveStructureBtn"),this.addClass(b.domNode,"saveStructureBtn"),this.addClass(b.domNode,"fl")):"cancelStructureBtn"==a&&(b.domNode.setAttribute("id","cancelStructureBtn"),this.addClass(b.domNode,"cancelStructureBtn"),this.addClass(b.domNode,"fl"));this.buttonNode.appendChild(b.domNode);r[a].dom=
b}},_getEditableAttr:function(){return this.editable},_setEditableAttr:function(a){this.editable=a},_getButtonDisableAttr:function(){return this.buttonDisable},_setButtonDisableAttr:function(a){this._set("buttonDisable",a);this._updataBtnStatus()},statusChang:function(){this._updataBtnStatus()},_updataBtnStatus:function(){this.buttonDisable?(r.cancelStructureBtn.dom&&r.cancelStructureBtn.dom.set("disabled",!0),r.saveStructureBtn.dom&&r.saveStructureBtn.dom.set("disabled",!0),App.MenuSwitchConfirm=
!1):(r.cancelStructureBtn.dom&&r.cancelStructureBtn.dom.set("disabled",!1),r.saveStructureBtn.dom&&r.saveStructureBtn.dom.set("disabled",!1),App.MenuSwitchConfirm=!0)},_changEditStatus:function(a){this.dndObject&&(this.dndObject.destroy(),this.dndObject=null);a&&(this.dndObject=new s(this.employeeContainer,{creator:n.hitch(this,this._avatarCreator),accept:[],generateText:!1,copyOnly:!0,selfAccept:!1}),this.own(p.after(this.dndObject,"onDndDrop",n.hitch(this,this._dropEnd))))},_avatarCreator:function(a,
b){var c=document.createElement("div");c.className="employMarkerAvator";c.innerHTML=a;w.manager();return{node:c,data:a}},_dropEnd:function(a,b){if(b[0]==this.dndObject){var c=b[3],e=this._removeEmployee(b[1][0]);switch(c.node.getAttribute("panelType")){case "structureMaster_admin":d.publish("structureAddMaster",{employee:e,type:"admin"});break;case "structureMaster_boss":d.publish("structureAddMaster",{employee:e,type:"boss"});break;case "structureGroup_tl":d.publish("structureAddTeamMembers",{employee:e,
type:"teamLeader",target:c});break;case "structureGroup_number":d.publish("structureAddTeamMembers",{employee:e,type:"mumber",target:c})}}}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(l,f,b){return l("dojo.dnd.Target",b,{constructor:function(){this.isSource=!1;f.remove(this.node,"dojoDndSource")}})})},"app/vm/StructureMaster":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-construct dijit/_TemplatedMixin app/util/_WidgetBase dojo/text!./tpl/structureMaster.html dojo/_base/lang dojo/on dojo/topic dojo/aspect dojo/dnd/Source dojo/dnd/Target app/vm/EmployeeMarker".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d){return l("app/vm/Structure",[m,a],{templateString:k,boss:null,admins:null,bossMarker:null,adminMarkerList:null,dndObject:null,metaData:null,panel:null,constructor:function(a){this.admins=[];this.adminMarkerList=[];this.inherited(arguments)},postMixInProperties:function(){var a=this.metaData;a&&c.isArray(a)&&f.forEach(a,function(a){1==a.userLevel&&"boss"==a.userRole?this.boss=c.mixin(a,{deleteable:!1,type:"boss"}):1==a.userLevel&&(a=c.mixin(a,{deleteable:!0,type:"admin"}),
this.admins.push(a))},this)},postCreate:function(){this.panel&&this.panel.appendChild(this.domNode);this._renderEmployees();this._initEvent();this._changEditStatus(!0);this._initDndSourceContainer()},getHierarchyData:function(){var a=[];a.push(this.boss);for(var b=0,c=this.adminMarkerList.length;b<c;b++)a.push(this.adminMarkerList[b].data);return a},destroy:function(){this.inherited(arguments)},_initEvent:function(){this.own(e.subscribe("structureAddMaster",c.hitch(this,this._addEmployees)))},_renderEmployees:function(){this._addEmployees({type:"boss",
employee:this.boss});for(var a=0,b=this.admins.length;a<b;a++)this._addEmployees({type:"admin",employee:this.admins[a]})},_initDndSourceContainer:function(){this.dndSourceAdminObject&&(this.dndSourceAdminObject.destroy(),this.dndSourceAdminObject=null);this.dndSourceAdminObject=new n(this.adminDragContainer,{creator:c.hitch(this,this._avatarCreator),accept:[],generateText:!1,copyOnly:!0,selfAccept:!1});this.own(q.after(this.dndSourceAdminObject,"onDndDrop",c.hitch(this,this._dragAdminEnd)))},_avatarCreator:function(a,
b){var c=document.createElement("div");c.className="employMarkerAvator";c.innerHTML=a;return{node:c,data:a}},_addEmployees:function(a){if(a.employee){if("admin"==a.type){a=c.mixin(a.employee,{deleteable:!0,type:"admin",userLevel:1,userRole:"manager",parentId:null});var e=new d(a);h(e,"removeEmployee",c.hitch(this,this._removerEmployees));this.adminMarkerList.push({marker:e,data:a});b.place(e.domNode,this.adminDragContainer,"last")}else"boss"==a.type&&(this._removerEmployees(this.bossMarker,"boss"),
this.boss=a=c.mixin(a.employee,{deleteable:!1,type:"boss",userLevel:1,userRole:"boss",parentId:null}),this.bossMarker=new d(a),this.bossContainer.appendChild(this.bossMarker.domNode));a=this.domNode.offsetHeight;40<a&&(this.treeLine.style.height=a-40+"px");this._initDndSourceContainer()}},_removerEmployees:function(a,b){b&&"boss"==b?this.bossMarker&&(this.bossMarker.destroy(),this.bossMarker=null,e.publish("removeEmployee",{employee:this.boss,type:"boss"})):f.every(this.adminMarkerList,function(b,
c){return b.marker==a||b.marker.domNode==a?(this.adminMarkerList.splice(c,1)[0].marker.destroy(),e.publish("removeEmployee",{employee:b.data,type:"admin"}),!1):!0},this)},_dropOutEmployee:function(a){var b;f.every(this.adminMarkerList,function(c,d){return c.marker.domNode==a?(this.adminMarkerList.splice(d,1)[0].marker.destroy(),b=c.data,!1):!0},this);return b},_changEditStatus:function(a){a&&!this.dndObject?(this.dndObject=new g(this.dndTargetContainer,{}),this.own(q.after(this.dndObject,"onDrop",
c.hitch(this,this._dropAdminEnd)))):(this.dndObject.destroy(),this.dndObject=null)},_dropAdminEnd:function(){b.empty(this.dndTargetContainer)},_dropBossEnd:function(){},_dragAdminEnd:function(a,b){if(b[0]==this.dndSourceAdminObject){var c;c=this._dropOutEmployee(b[1][0]);var d=b[3];switch(d.node.getAttribute("panelType")){case "structureMaster_admin":e.publish("structureAddMaster",{employee:c,type:"admin",context:this});break;case "structureGroup_tl":e.publish("structureAddTeamMembers",{employee:c,
type:"teamLeader",target:d,context:this});break;case "structureGroup_number":c&&e.publish("structureAddTeamMembers",{employee:c,type:"mumber",target:d,context:this})}}}})})},"app/vm/StructureGroup":function(){define("dojo/_base/declare dojo/_base/array dojo/dom-construct dojo/dom-class dijit/form/Button dijit/_TemplatedMixin app/util/_WidgetBase dojo/text!./tpl/structureGroup.html dojo/_base/lang dojo/on dojo/topic dojo/aspect dojo/dnd/Source dojo/dnd/Target app/vm/EmployeeMarker dojo/Evented".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u){return l("app/vm/StructureGroup",[c,k,u],{mode:"empty",templateString:h,teamLeader:null,teamLeaderMarker:null,numbers:null,numbersList:null,metaData:null,panel:null,bossData:null,isBlank:!1,constructor:function(){this.numbers=[];this.numbersList=[];this.inherited(arguments)},postMixInProperties:function(){f.forEach(this.metaData,function(a){1==a.userLevel&&"boss"==a.userRole&&(this.bossData=a);2==a.userLevel&&!this.isBlank?this.teamLeader=e.mixin(a,{type:"teamLeader",
userRole:"supervisor"}):3==a.userLevel&&!this.isBlank&&(a=e.mixin(a,{type:"normal",userRole:"salesman"}),this.numbers.push(a))},this)},postCreate:function(){this._initCom();this._initEvent();this.panel&&(this.panel.appendChild(this.domNode),this._changeTeamStatus())},getHierarchyData:function(){var a=[];this.teamLeader&&a.push(this.teamLeader);for(var b=0,c=this.numbersList.length;b<c;b++)a.push(this.numbersList[b].data);return a},getNickname:function(){var a=null;!this.teamLeader&&0<this.numbersList.length&&
(a=this.numbersList[0].data.name?this.numbersList[0].data.name:this.numbersList[0].data.email?this.numbersList[0].data.email.split("@")[0]:this.numbersList[0].data.mobile);return a},destroy:function(){this.dndSourceMumberObject&&(this.dndSourceMumberObject.destroy(),this.dndSourceMumberObject=null);this.dndSourceTLObject&&(this.dndSourceTLObject.destroy(),this.dndSourceTLObject=null);this.inherited(arguments)},_initCom:function(){this._initTeamLeader();this._initNumberList();this.numberDndObject=
new p(this.dndTargetContainer,{});g.after(this.numberDndObject,"onDrop",e.hitch(this,this._dropNumberEnd));this._initDndSourceContainer()},_initTeamLeader:function(){if(this.teamLeader){this.teamLeaderMarker=new s(this.teamLeader);var a=this;q(this.teamLeaderMarker,"removeEmployee",function(b){a._removeEmployee(b,"teamLeader")});b.place(this.teamLeaderMarker.domNode,this.teamLeaderDragContainer,"last");n.publish("addBlankTeam",{employee:this.teamLeader,type:"teamLeader"})}},_initNumberList:function(){f.forEach(this.numbers,
function(a){var c=new s(a);q(c,"removeEmployee",e.hitch(this,this._removeEmployee));b.place(c.domNode,this.groupNumberDragContainer,"last");this.numbersList.push({marker:c,data:a})},this)},_initEvent:function(){this.own(n.subscribe("structureAddTeamMembers",e.hitch(this,this._addEmployees)))},_initDndSourceContainer:function(){this.dndSourceMumberObject&&(this.dndSourceMumberObject.destroy(),this.dndSourceMumberObject=null);this.dndSourceMumberObject=new d(this.groupNumberDragContainer,{creator:e.hitch(this,
this._avatarCreator),accept:[],generateText:!1,copyOnly:!0,selfAccept:!1});this.dndSourceTLObject&&(this.dndSourceTLObject.destroy(),this.dndSourceTLObject=null);this.dndSourceTLObject=new d(this.teamLeaderDragContainer,{creator:e.hitch(this,this._avatarCreator),accept:[],generateText:!1,copyOnly:!0,selfAccept:!1});this.own(g.after(this.dndSourceMumberObject,"onDndDrop",e.hitch(this,this._dropEnd)))},_avatarCreator:function(a,b){var c=document.createElement("div");c.className="employMarkerAvator";
c.innerHTML=a;return{node:c,data:a}},_addEmployees:function(a){var c=this;window.setTimeout(function(){if(a.employee){if("teamLeader"==a.type&&a.target.node==c.teamLeaderDragAnchor){var d=e.mixin(a.employee,{deleteable:!0,type:"teamLeader",userLevel:2,userRole:"supervisor",parentId:c.bossData.userId});c.set("teamLeader",d);c._initTeamLeader()}else if("mumber"==a.type&&a.target.node==c.dndTargetContainer){var d=e.mixin(a.employee,{deleteable:!0,type:"normal",userLevel:c.teamLeader?3:0,userRole:"salesman",
parentId:c.teamLeader?c.teamLeader.userId:""}),g=new s(d);q(g,"removeEmployee",e.hitch(c,c._removeEmployee));c.numbersList.push({marker:g,data:d});b.place(g.domNode,c.groupNumberDragContainer,"last");c._changeTeamStatus();c.isBlank=!1;n.publish("addBlankTeam",{})}c._initDndSourceContainer()}})},_removeEmployee:function(a,b){if(b&&"teamLeader"==b){var c=e.mixin({},this.teamLeader);this.set("teamLeader",null);n.publish("removeEmployee",{employee:c,type:"teamLeader",context:this});this.emit()}else f.every(this.numbersList,
function(b,c){return b.marker==a||b.marker.domNode==a?(this.numbersList.splice(c,1)[0].marker.destroy(),n.publish("removeEmployee",{employee:b.data,type:"normal",context:this}),!1):!0},this),this._changeTeamStatus()},_dropOutEmployee:function(a,b){if(b&&"teamLeader"==b&&this.teamLeaderMarker&&this.teamLeaderMarker.domNode==a){var c=e.mixin({},this.teamLeader);this.set("teamLeader",null);n.publish("removeEmployee",{employee:c,type:"teamLeader",context:this,mode:"drag"});return c}if("mumber"==b){var d;
f.every(this.numbersList,function(b,c){return b.marker==a||b.marker.domNode==a?(this.numbersList.splice(c,1)[0].marker.destroy(),d=b.data,n.publish("removeEmployee",{employee:d,type:"normal",context:this,mode:"drag"}),!1):!0},this);return d}},_switchMumberRole:function(a,b,c){if("teamLeader"==b)b=e.mixin({},this.teamLeader),this.set("teamLeader",null),this._addEmployees({employee:b,type:"mumber",target:c,context:this});else if("mumber"==b){var d=null;f.every(this.numbersList,function(b,c){return b.marker==
a||b.marker.domNode==a?(this.numbersList.splice(c,1)[0].marker.destroy(),d=b.data,!1):!0},this);c.node==this.dndTargetContainer?this._addEmployees({employee:d,type:"mumber",target:c,context:this}):this._addEmployees({employee:d,type:"teamLeader",target:c,context:this})}n.publish("activeSaveBtns",{})},_getTeamLeaderAttr:function(){return this.teamLeader},_setTeamLeaderAttr:function(a){a?(a=e.mixin(a,{type:"teamLeader",userLevel:2}),f.forEach(this.numbersList,function(b){e.mixin(b.data,{userLevel:3,
parentId:a.userId})},this),this.isBlank=!1):(a=null,this.teamLeaderMarker.destroy(),this.teamLeaderMarker=null,f.forEach(this.numbersList,function(a){e.mixin(a.data,{userLevel:0,parentId:null})},this));this._set("teamLeader",a);this._changeTeamStatus()},_changeTeamStatus:function(){this.teamLeader?(this.tlDndObject&&(this.tlDndObject.destroy(),this.tlDndObject=null),this.addMarsterTarget.style.display="none",this.teamLeaderDragAnchor.style.display="none",a.remove(this.groupNumberContainer,"noLeader"),
this.treeLineB.style.display=""):(this.addMarsterTarget.style.display="",this.teamLeaderDragAnchor.style.display="",a.add(this.groupNumberContainer,"noLeader"),this.tlDndObject=new p(this.teamLeaderDragAnchor,{}),g.after(this.tlDndObject,"onDrop",e.hitch(this,this._dropTLEnd)),this.treeLineB.style.display=0==this.numbersList.length?"none":"");var b=this.domNode.offsetHeight;20<b&&(this.treeLineB.style.height=b-20+"px")},_dropTLEnd:function(){b.empty(this.teamLeaderDragAnchor)},_dropNumberEnd:function(){b.empty(this.dndTargetContainer)},
_dropEnd:function(a,b){var c=b[0],d=b[3];if(c==this.dndSourceMumberObject||c==this.dndSourceTLObject)if(c=c.node.getAttribute("panelType"),d==this.numberDndObject&&0==this.numbersList.length||d==this.tlDndObject&&1==this.numbersList.length||1==this.numbersList.length&&this.numbersList[0].marker.domNode==b[1][0]&&d==this.numberDndObject)"teamLeader"==c?this._switchMumberRole(b[1][0],"teamLeader",d):this._switchMumberRole(b[1][0],"mumber",d);else switch(c="teamLeader"==c?this._dropOutEmployee(b[1][0],
"teamLeader"):this._dropOutEmployee(b[1][0],"mumber"),d.node.getAttribute("panelType")){case "structureMaster_admin":n.publish("structureAddMaster",{employee:c,type:"admin",context:this});break;case "structureGroup_tl":n.publish("structureAddTeamMembers",{employee:c,type:"teamLeader",target:d,context:this});break;case "structureGroup_number":c&&n.publish("structureAddTeamMembers",{employee:c,type:"mumber",target:d,context:this})}}})})},"app/vm/MoveDialog":function(){define("dojo/_base/declare dijit/_TemplatedMixin app/util/_WidgetBase dojo/_base/lang dojo/on dojox/layout/ContentPane chanjet/widget/Dialog dijit/form/RadioButton".split(" "),
function(l,f,b,a,m,k,c,h){a=l("app/vm/MoveDialog",[b],{dialog:null,panel:null,data:null,owner:null,postCreate:function(){this.inherited(arguments)},show:function(a){var b=this;b.panel=new MovePanel({owner:b});b.dialog=new c({"class":"moveDialog",bottomButtons:[{label:"\u53d6\u6d88",sTag:"cancel",baseClass:"whiteButton"},{label:"\u79fb\u4ea4",sTag:"ok",baseClass:"whiteButton"}],title:"\u91cd\u65b0\u6307\u5b9a\u4e1a\u52a1\u5458",autoDestroy:!0,contentMaxHeight:"360px",contentMinHeight:"360px",style:"width : 680px;",
buttonClick:function(a,c,e){if("ok"==e){var f=b.panel.getResult();f&&(App.showLoading(),"MOVEALL"==b.moveFlag?xhr.get({url:URL.transbyonwer+"?tranfromOwner\x3d"+b.fromOwnerId+"\x26trantoOwner\x3d"+f,success:function(a){App.hideLoading();App.tip("\u79fb\u4ea4\u6210\u529f");b.emit("saveSuccess",{data:a,newOwnerId:f})},error:function(a){App.hideLoading()}}):"MOVESEARCHALL"==b.moveFlag?xhr.get({url:URL.transbyconditon+"?queryValue\x3d"+b.queryValue+"\x26tranfromOwner\x3d"+b.fromOwnerId+"\x26trantoOwner\x3d"+
f,success:function(a){App.hideLoading();App.tip("\u79fb\u4ea4\u6210\u529f");b.emit("saveSuccess",{data:a,newOwnerId:f})},error:function(a){App.hideLoading()}}):"MOVESELECT"==b.moveFlag?xhr.get({url:URL.transbycustomerid+"?customerIds\x3d"+b.selectIds+"\x26tranfromOwner\x3d"+b.fromOwnerId+"\x26trantoOwner\x3d"+f,success:function(a){App.hideLoading();App.tip("\u79fb\u4ea4\u6210\u529f");b.emit("saveSuccess",{data:a,newOwnerId:f})},error:function(a){App.hideLoading()}}):"MOVEFORMDETAIL"==b.moveFlag?xhr.get({url:URL.transbycustomerid+
"?customerIds\x3d"+b.selectIds+"\x26tranfromOwner\x3d"+b.fromOwnerId+"\x26trantoOwner\x3d"+f,success:function(a){App.hideLoading();App.tip("\u79fb\u4ea4\u6210\u529f");b.emit("saveSuccess",{data:a,newOwnerId:f})},error:function(a){App.hideLoading()}}):App.hideLoading(),b.destroy())}else b.destroy()}});b.dialog.addChild(b.panel);b.dialog.show();b.validate()},validate:function(){for(var a=this.panel.getResult(),b=this.dialog._bottomButtonslist,c=0,d=b.length;c<d;c++)"ok"==b[c].sTag&&(a?b[c].set("disabled",
!1):b[c].set("disabled",!0))},destroy:function(){this.panel.destroy();this.dialog.destroy();this.inherited(arguments)}});l("MovePanel",[b,f],{templateString:"\x3cdiv class\x3d'userList'\x3e\x3cdiv data-dojo-attach-point\x3d'userList'\x3e\x3c/div\x3e\x3c/div\x3e",data:null,owner:null,userListPanel:null,rightPanel:null,postCreate:function(){var a=this;a.userListPanel=new k({},this.userList);xhr.get({url:URL.waitMoveOwnerList+"?userId\x3d"+a.owner.fromOwnerId,success:function(b){a.data=b.items;for(b=
0;b<a.data.length;){var c={data1:null,data2:null};b<a.data.length&&a.data[b].id==a.fromOwnerId&&b++;b<a.data.length&&(c.data1=a.data[b],b++);b<a.data.length&&a.data[b].id==a.fromOwnerId&&b++;b<a.data.length&&(c.data2=a.data[b],b++);c=new e({data:c,owner:a});a.userListPanel.addChild(c)}}});this.inherited(arguments)},reset:function(){for(var a=this.userListPanel.getChildren(),b=0;b<a.length;++b)a[b].reset()},getResult:function(){for(var a=this.userListPanel.getChildren(),b=0;b<a.length;++b){if(a[b].isChecked1())return a[b].data.data1.id;
if(a[b].isChecked2())return a[b].data.data2.id}return null}});var e=l("cRadio",[b,f],{templateString:"\x3cdiv class\x3d'cRadio'\x3e\x3cdiv class\x3d'radio1 fl' data-dojo-attach-event\x3d'onclick:_chickRadio1'\x3e\x3cdiv class\x3d'radio fl'\x3e\x3cdiv data-dojo-attach-point\x3d'radio1'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'text fl'\x3e\x3cp data-dojo-attach-point\x3d'name1'\x3e\x3c/p\x3e\x3cp data-dojo-attach-point\x3d'phone1'\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'radio2 fl' data-dojo-attach-event\x3d'onclick:_chickRadio2'\x3e\x3cdiv class\x3d'radio fl'\x3e\x3cdiv data-dojo-attach-point\x3d'radio2'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'text fl'\x3e\x3cp data-dojo-attach-point\x3d'name2'\x3e\x3c/p\x3e\x3cp data-dojo-attach-point\x3d'phone2'\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
data:null,owner:null,radioComp1:null,radioComp2:null,postCreate:function(){if(this.data.data1){var a=this.data.data1.name||"";""==a&&this.data.data1.phone&&(a=this.data.data1.phone);""==a&&this.data.data1.email&&(a=this.data.data1.email.substring(0,this.data.data1.email.indexOf("@")));var b="";this.data.data1.phone?b+=this.data.data1.phone:this.data.data1.email&&(b+=this.data.data1.email);this.radioComp1=new h({name:a,value:this.data.data1.id},this.radio1);this.name1.innerHTML=a;this.phone1.innerHTML=
b}this.data.data2&&(a=this.data.data2.name||"",""==a&&this.data.data2.phone&&(a=this.data.data2.phone),""==a&&this.data.data2.email&&(a=this.data.data2.email.substring(0,this.data.data2.email.indexOf("@"))),b="",this.data.data2.phone?b+=this.data.data2.phone:this.data.data2.email&&(b+=this.data.data2.email),this.radioComp2=new h({name:a,value:this.data.data2.id},this.radio2),this.name2.innerHTML=a,this.phone2.innerHTML=b);this.inherited(arguments)},reset:function(){this.radioComp1&&this.radioComp1.set("checked",
!1);this.radioComp2&&this.radioComp2.set("checked",!1)},isChecked1:function(){return this.radioComp1?this.radioComp1.get("checked"):!1},isChecked2:function(){return this.radioComp2?this.radioComp2.get("checked"):!1},_chickRadio1:function(){this.owner.reset();this.radioComp1.set("checked",!0);this.owner.owner.validate()},_chickRadio2:function(){this.owner.reset();this.radioComp2.set("checked",!0);this.owner.owner.validate()}});return a})},"app/vm/ChangeBoss":function(){define("dojo/_base/declare app/util/_WidgetBase dojo/text!./tpl/changeBoss.html dojo/on dojo/_base/lang dojox/layout/ContentPane chanjet/widget/Dialog dijit/form/RadioButton dijit/Tooltip".split(" "),
function(l,f,b,a,m,k,c,h,e){b=l("app/vm/ChangeBoss",[f],{templateString:b,postMixInProperties:function(){this.name=App.escape(App.userName)},postCreate:function(){this.bindEvents();new e({connectId:this.tipNode,position:["below-centered"],label:"\u7cfb\u7edf\u9ed8\u8ba4\u5f00\u901a\u5ba2\u6237\u7ba1\u5bb6\u7684\u7528\u6237\u4e3a\u8001\u603b\uff08\u5373\u7ba1\u7406\u5458\uff09\uff0c\u60a8\u53ef\u4ee5\x3c/br\x3e\u5728\u6b64\u91cd\u65b0\u6307\u5b9a\u8001\u603b\uff0c\u6307\u5b9a\u540e\uff0c\u521b\u5efa\u8005\u5c06\u6062\u590d\u666e\u901a\u4e1a\u52a1\u5458\u89d2\u8272"});
new e({connectId:"tip1Node",position:["below"],label:"1.\u8bbe\u7f6e\u4e0a\u4e0b\u7ea7\u5173\u7cfb\u540e\uff0c\u4e0a\u7ea7\u53ef\u4ee5\u67e5\u770b\u4e0b\u7ea7\u6210\u5458\u7684\u5ba2\u6237\u53ca\u5de5\u4f5c\u8bb0\u5f55\uff0c\u63a5\u6536\u5230\u4e0b\u7ea7\u7684\u8bf7\u793a\u3001\u5ba1\u6279\x3c/br\x3e\u7b49\uff0c\u70b9\u8bc4\u4e0b\u7ea7\u5de5\u4f5c\uff0c\u4e0b\u7ea7\u6210\u5458\u4e4b\u95f4\u7684\u6570\u636e\u4e92\u4e0d\u53ef\u89c1\u3002\x3c/br\x3e2.\u201c\u526f\u603b\u201d\u662f\u6307\u4e0e\u8001\u677f\u5177\u6709\u76f8\u540c\u6570\u636e\u6743\u9650\uff0c\u53ef\u4ee5\u67e5\u770b\u516c\u53f8\u9500\u552e\u8fdb\u5c55\uff0c\u4f46\u4e0d\u5177\u6709\u9080\u8bf7\u540c\u4e8b\u3001\u505c\x3c/br\x3e\u7528\u5e10\u53f7\u7b49\u7528\u6237\u7ba1\u7406\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u901a\u5e38\u662f\u9500\u552e\u603b\u76d1\u7b49\u6210\u5458\u3002"})},
bindEvents:function(){this.own(a(this.changeNode,"click",m.hitch(this,this.onChangeBoss)))},onChangeBoss:function(){(this.moveDialog=new q({fromOwnerId:App.userId})).show()},destroy:function(){this.moveDialog&&this.moveDialog.destroy();this.inherited(arguments)}});var q=l("SelectUserDialog",[f],{dialog:null,panel:null,data:null,owner:null,postCreate:function(){this.inherited(arguments)},show:function(a){var b=this;b.panel=new SelectUserPanel({owner:b});b.dialog=new c({"class":"moveDialog",bottomButtons:[{label:"\u53d6\u6d88",
sTag:"cancel",baseClass:"whiteButton"},{label:"\u79fb\u4ea4",sTag:"ok",baseClass:"whiteButton"}],title:"\u91cd\u65b0\u6307\u5b9a\u8001\u677f",autoDestroy:!0,contentMaxHeight:"360px",contentMinHeight:"360px",style:"width : 680px;",buttonClick:function(a,c,e){if("ok"==e){var g=b.panel.getResult();App.confirm('\u4eb2\uff0c\u60a8\u786e\u5b9a\u8981\u6307\u5b9a\u65b0\u8001\u603b\u4e3a\uff1a\x3ca class\x3d"boss-name"\x3e'+g.name+"\x3c/a\x3e \u5417\uff1f","\u63d0\u793a",{confirm:function(a){App.showLoading();
xhr.get(URL.setBoss,{bossId:g.id},function(){App.hideLoading();App.tip("\u8bbe\u7f6e\u6210\u529f");App.removeAdminPermission();router.go("idx")});a.close();b.destroy()}})}else b.destroy()}});b.dialog.addChild(b.panel);b.dialog.show();b.validate()},validate:function(){for(var a=this.panel.getResult(),b=this.dialog._bottomButtonslist,c=0,e=b.length;c<e;c++)"ok"==b[c].sTag&&(a?b[c].set("disabled",!1):b[c].set("disabled",!0))},destroy:function(){this.panel.destroy();this.dialog.destroy();this.inherited(arguments)}});
l("SelectUserPanel",[f],{templateString:"\x3cdiv class\x3d'userList'\x3e\x3cdiv data-dojo-attach-point\x3d'userList'\x3e\x3c/div\x3e\x3c/div\x3e",data:null,owner:null,userListPanel:null,rightPanel:null,postCreate:function(){var a=this;a.userListPanel=new k({},this.userList);xhr.get({url:URL.waitMoveOwnerList+"?userId\x3d"+App.userId,success:function(b){a.data=b.items;for(b=0;b<a.data.length;){var c={data1:null,data2:null};b<a.data.length&&a.data[b].id==a.fromOwnerId&&b++;b<a.data.length&&(c.data1=
a.data[b],b++);b<a.data.length&&a.data[b].id==a.fromOwnerId&&b++;b<a.data.length&&(c.data2=a.data[b],b++);c=new n({data:c,owner:a});a.userListPanel.addChild(c)}}});this.inherited(arguments)},reset:function(){for(var a=this.userListPanel.getChildren(),b=0;b<a.length;++b)a[b].reset()},getResult:function(){for(var a=this.userListPanel.getChildren(),b=0;b<a.length;++b){if(a[b].isChecked1())return a[b].data.data1;if(a[b].isChecked2())return a[b].data.data2}return null}});var n=l("cRadio",[f],{templateString:"\x3cdiv class\x3d'cRadio'\x3e\x3cdiv class\x3d'radio1 fl' data-dojo-attach-event\x3d'onclick:_chickRadio1'\x3e\x3cdiv class\x3d'radio fl'\x3e\x3cdiv data-dojo-attach-point\x3d'radio1'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'text fl'\x3e\x3cp data-dojo-attach-point\x3d'name1'\x3e\x3c/p\x3e\x3cp data-dojo-attach-point\x3d'phone1'\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'radio2 fl' data-dojo-attach-event\x3d'onclick:_chickRadio2'\x3e\x3cdiv class\x3d'radio fl'\x3e\x3cdiv data-dojo-attach-point\x3d'radio2'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'text fl'\x3e\x3cp data-dojo-attach-point\x3d'name2'\x3e\x3c/p\x3e\x3cp data-dojo-attach-point\x3d'phone2'\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
data:null,owner:null,radioComp1:null,radioComp2:null,postCreate:function(){if(this.data.data1){var a=this.data.data1.name||"";""==a&&this.data.data1.phone&&(a=this.data.data1.phone);""==a&&this.data.data1.email&&(a=this.data.data1.email.substring(0,this.data.data1.email.indexOf("@")));var b="";this.data.data1.phone?b+=this.data.data1.phone:this.data.data1.email&&(b+=this.data.data1.email);this.radioComp1=new h({name:a,value:this.data.data1.id},this.radio1);this.name1.innerHTML=a;this.phone1.innerHTML=
b}this.data.data2&&(a=this.data.data2.name||"",""==a&&this.data.data2.phone&&(a=this.data.data2.phone),""==a&&this.data.data2.email&&(a=this.data.data2.email.substring(0,this.data.data2.email.indexOf("@"))),b="",this.data.data2.phone?b+=this.data.data2.phone:this.data.data2.email&&(b+=this.data.data2.email),this.radioComp2=new h({name:a,value:this.data.data2.id},this.radio2),this.name2.innerHTML=a,this.phone2.innerHTML=b);this.inherited(arguments)},reset:function(){this.radioComp1&&this.radioComp1.set("checked",
!1);this.radioComp2&&this.radioComp2.set("checked",!1)},isChecked1:function(){return this.radioComp1?this.radioComp1.get("checked"):!1},isChecked2:function(){return this.radioComp2?this.radioComp2.get("checked"):!1},_chickRadio1:function(){this.owner.reset();this.radioComp1.set("checked",!0);this.owner.owner.validate()},_chickRadio2:function(){this.owner.reset();this.radioComp2.set("checked",!0);this.owner.owner.validate()}});return b})},"url:app/nav/tpl/invite.html":'\x3cdiv class\x3d"invite" style\x3d"min-height:650px"\x3e\n    \x3cdiv class\x3d"w1000" id\x3d"admin-header"\x3e\n        \x3cdiv class\x3d"kh-list-xx-t"\x3e\u7528\u6237\u7ba1\u7406\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"kh-cont-box w1000"\x3e\n        \x3cdiv class\x3d"conditionpanel" id\x3d"conditionpanel"\x3e\n            \x3cdiv class\x3d\'user_manager_title\'\x3e\n                \x3cul data-dojo-attach-point\x3d"userButtonPanel" class\x3d"clearfix"\x3e\n                    \x3cli class\x3d"title_button lion" data-dojo-attach-point\x3d"invitepanelLI" panel\x3d"invitepanel" data-dojo-attach-event\x3d"onclick:_inviteClick"\x3e\u9080\u8bf7\u540c\u4e8b\x3c/li\x3e\n                    \x3cli class\x3d"title_button" data-dojo-attach-point\x3d"structureLI" panel\x3d"structure" data-dojo-attach-event\x3d"onclick:_settingClick"\x3e\u8bbe\u7f6e\u6743\u9650\x3c/li\x3e\n                    \x3cli class\x3d"title_button" data-dojo-attach-point\x3d"setpanelLI" panel\x3d"setpanel" data-dojo-attach-event\x3d"onclick:_usersClick"\x3e\u7528\u6237\u5217\u8868\x3c/li\x3e\n                    \x3c!--\n                                        \x3cli class\x3d"title_button" data-dojo-attach-point\x3d"turnOverLI" panel\x3d"turnOver" data-dojo-attach-event\x3d"onclick:_showTab"\x3e\u79fb\u4ea4\u5ba2\u6237\x3c/li\x3e\n                                        \x3cli class\x3d"title_button" data-dojo-attach-point\x3d"setBossNode" panel\x3d"setBoss" data-dojo-attach-event\x3d"onclick:_showTab"\x3e\u8bbe\u7f6e\u8001\u677f\x3c/li\x3e\n                    --\x3e\n                    \x3cli class\x3d"title_button" data-dojo-attach-point\x3d"setFieldNode" panel\x3d"setField" data-dojo-attach-event\x3d"onclick:_fieldClick"\x3e\u5b57\u6bb5\u7ba1\u7406\x3c/li\x3e\n                \x3c/ul\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"invitegrid"\x3e\n            \x3cdiv data-dojo-attach-point\x3d"contentpanel"\x3e\n                \x3cdiv data-dojo-attach-point\x3d"invitepanel" style\x3d"display:block;"\x3e\n                    \x3cdiv class\x3d"inviteLeftDiv fl"\x3e\n                        \x3cdiv class\x3d"inviteInputDiv"\x3e\n                            \x3cdiv class\x3d"inviteInput" data-dojo-attach-point\x3d"inviteInputPanel"\x3e\x3c/div\x3e\n                        \x3c/div\x3e\n                        \x3cdiv class\x3d"authDiv"\x3e\u53ef\u6388\u6743\u603b\u6570\uff1a\x3cspan data-dojo-attach-point\x3d"authnum1"\x3e\x3c/span\x3e\u4eba\uff0c\u5df2\u5f00\u901a\u6388\u6743\x3cspan data-dojo-attach-point\x3d"authtotal1"\x3e\x3c/span\x3e\u4eba\x3c/div\x3e\n                        \x3cdiv data-dojo-attach-point\x3d"inviteGridDiv" class\x3d"inviteGridDiv"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d"inviteRightDiv fl"\x3e\n                        \x3cdiv class\x3d"invitemsg"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv data-dojo-attach-point\x3d"setpanel" style\x3d"display:none;"\x3e\n                    \x3cdiv class\x3d"users-tab"\x3e\x3ca class\x3d"link" data-dojo-attach-point\x3d"userInNode"\x3e\u5728\u804c\u4eba\u5458\x3c/a\x3e\x3ca data-dojo-attach-point\x3d"userOutNode"\x3e\u79bb\u804c\u4eba\u5458\x3c/a\x3e\x3c/div\x3e\n                    \x3cdiv data-dojo-attach-point\x3d"setgridpanel"\x3e\x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv data-dojo-attach-point\x3d"structurePanel" style\x3d"display:none;" class\x3d"clearfix structure"\x3e\n                    \x3cdiv class\x3d"clearfix header"\x3e\n                        \x3cdiv data-dojo-attach-point\x3d"changeBossNode"\x3e\x3c/div\x3e\n                        \x3c!--\x3cdiv class\x3d""\x3e\n                            \x3cspan\x3e\u8bf4\u660e\uff1a\x3c/span\x3e\n                            \x3cspan\x3e1.\u8bbe\u7f6e\u4e0a\u4e0b\u7ea7\u5173\u7cfb\u540e\uff0c\u4e0a\u7ea7\u53ef\u4ee5\u67e5\u770b\u4e0b\u7ea7\u6210\u5458\u7684\u5ba2\u6237\u53ca\u5de5\u4f5c\u8bb0\u5f55\uff0c\u63a5\u6536\u5230\u4e0b\u7ea7\u7684\u8bf7\u793a\u3001\u5ba1\u6279\u7b49\uff0c\u70b9\u8bc4\u4e0b\u7ea7\u5de5\u4f5c\uff0c\u4e0b\u7ea7\u6210\u5458\u4e4b\u95f4\u7684\u6570\u636e\u4e92\u4e0d\u53ef\u89c1\u3002\x3c/span\x3e\n                        \x3c/div\x3e\n                        \x3cdiv\x3e\n                            \x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\n                            \x3cspan\x3e2.\u201c\u526f\u603b\u201d\u662f\u6307\u4e0e\u8001\u677f\u5177\u6709\u76f8\u540c\u6570\u636e\u6743\u9650\uff0c\u53ef\u4ee5\u67e5\u770b\u516c\u53f8\u9500\u552e\u8fdb\u5c55\uff0c\u4f46\u4e0d\u5177\u6709\u9080\u8bf7\u540c\u4e8b\u3001\u505c\u7528\u5e10\u53f7\u7b49\u7528\u6237\u7ba1\u7406\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u901a\u5e38\u662f\u9500\u552e\u603b\u76d1\u7b49\u6210\u5458\u3002\x3c/span\x3e\n                        \x3c/div\x3e--\x3e\n                        \x3cspan class\x3d"qx-header" \x3e\u6743\u9650\u5206\u914d\x3cspan  class\x3d"boss-tip" id\x3d"tip1Node"\x3e\x26nbsp;\x3c/span\x3e\x3c/span\x3e\n                        \x3cspan id\x3d"structure_scBtns" class\x3d"scBtns fr"\x3e\x3c/span\x3e\n                    \x3c/div\x3e\n                    \x3c!--\x3cdiv class\x3d"cutLine"\x3e\x3c/div\x3e--\x3e\n                    \x3cdiv class\x3d"clearfix" data-dojo-attach-point\x3d"structureContainerPanel"\x3e\n                        \x3cdiv class\x3d"fl left"\x3e\n                            \x3cdiv class\x3d"structureMaster" data-dojo-attach-point\x3d"structureMaster"\x3e\x3c/div\x3e\n                            \x3cdiv class\x3d"structureGroupList" data-dojo-attach-point\x3d"structureGroupList"\x3e\n                                \x3cdiv style\x3d"border-width: 2px; margin: 0 0 18px 70px;" class\x3d"cutLine"\x3e\x3c/div\x3e\n                                \x3c!--\x3cspan class\x3d"tip"\x3e\u65e0\u4e3b\u7ba1\u5206\u7ec4\uff0c\u4fdd\u5b58\u540e\u4e1a\u52a1\u5458\u5c06\u79fb\u52a8\u5230\u201c\u8001\u677f\u76f4\u7ba1\u4e1a\u52a1\u5458\u201d\x3c/span\x3e--\x3e\n                            \x3c/div\x3e\n                            \x3cdiv class\x3d""\x3e\x3c/div\x3e\n                        \x3c/div\x3e\n                        \x3cdiv class\x3d"fr right" data-dojo-attach-point\x3d"noTeamPanel"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d"footer"\x3e\u8bf4\u660e\uff1a\u5982\u679c\u662f\u8d35\u516c\u53f8\u4ec5\u6709\u8001\u677f\u548c\u4e1a\u52a1\u5458\uff0c\u5373\u6240\u6709\u7684\u4e1a\u52a1\u5458\u76f4\u5c5e\u8001\u677f\u76f4\u7ba1\uff0c\u4e0d\u9700\u8bbe\u7f6e\u5373\u53ef\u3002\x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv data-dojo-attach-point\x3d"trunOverPanel" style\x3d"display:none;"\x3e\n                    \x3cdiv data-dojo-attach-point\x3d"trunOverGridPanel"\x3e\x3c/div\x3e\n                \x3c/div\x3e\n\x3c!--\n                \x3cdiv data-dojo-attach-point\x3d"setBossPanel" class\x3d"setboss-panel" style\x3d"display:none;"\x3e\x3c/div\x3e\n--\x3e\n                \x3cdiv data-dojo-attach-point\x3d"setFieldPanel" class\x3d"setfield-panel field" style\x3d"display:none;"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"url:app/vm/tpl/addComInfo.html":'\x3cdiv class\x3d"addComInfo-panel"\x3e\n    \x3cdiv class\x3d"title"\x3e\n        \u586b\u5199\u4f01\u4e1a\u540d\u79f0\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u9080\u8bf7\u540c\u4e8b\u4e00\u8d77\u4f7f\u7528\u4e86\n    \x3c/div\x3e\n    \x3cdiv class\x3d"header clearfix"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"companyNameInput"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"addComInfo-tip" data-dojo-attach-point\x3d"tipNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:chanjet/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"url:app/vm/tpl/employeeMarker.html":'\x3cdiv class\x3d"fl employeeMarker dojoDndItem" data-dojo-attach-point\x3d"employeeMarker" data-dojo-attach-event\x3d"onmouseenter:_onHover,onmouseleave:_onUnhover"\x3e\n    \x3cspan class\x3d"${type} content"\x3e\n        \x3cdiv class\x3d"removeBtn" data-dojo-attach-point\x3d"removeBtn" data-dojo-attach-event\x3d"ondijitclick:_onRemoveClick"\x3e\x3c/div\x3e\n        \x3cimg src\x3d"${headPicture}" onerror\x3d"App.nofind(this)"/\x3e\n        \x3cdiv class\x3d"text" data-dojo-attach-point\x3d"employeeName"\x3e\x3c/div\x3e\n    \x3c/span\x3e\n\x3c/div\x3e\n',
"url:app/vm/tpl/noTeamPanel.html":'\x3cdiv style\x3d"position: relative"\x3e\n    \x3c!--\x3cdiv class\x3d"clearfix buttons" data-dojo-attach-point\x3d"buttonNode"\x3e\x3c/div\x3e--\x3e\n    \x3cdiv class\x3d"freeGroup" data-dojo-attach-point\x3d"freeGroup"\x3e\n        \x3cdiv class\x3d"noPanelArrow"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"title container cutLine"\x3e\n            \x3cdiv class\x3d"h1"\x3e\u5f85\u6307\u5b9a\u4e0a\u7ea7\u4e3b\u7ba1\x3c/div\x3e\n            \x3cdiv class\x3d"h2"\x3e\uff08\u9ed8\u8ba4\u7531\u8001\u677f\u76f4\u7ba1\uff09\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"clearfix container employeeContainer" id\x3d"employeeContainer" data-dojo-attach-point\x3d"employeeContainer" panelType\x3d"noTeamEmployeeContainer"\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/structureMaster.html":'\x3cdiv class\x3d"clearfix"\x3e\n    \x3cdiv class\x3d"bossContainer" data-dojo-attach-point\x3d"bossContainer"\x3e\n        \x3c!--\x3cdiv class\x3d"bossDragAnchor" data-dojo-attach-point\x3d"bossDragAnchor" panelType\x3d"structureMaster_boss"\x3e\x3c/div\x3e--\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"adminContainer" data-dojo-attach-point\x3d"adminContainer"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"adminDragContainer" panelType\x3d"admin"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"addTarget" data-dojo-attach-point\x3d"addTarget"\x3e\n            \x3cdiv class\x3d"dndTargetLogo"\x3e\x3c/div\x3e\n            \x3cspan\x3e\u62d6\u52a8\u6dfb\u52a0\u526f\u603b\x3c/span\x3e\n            \x3cdiv class\x3d"dndTargetContainer" data-dojo-attach-point\x3d"dndTargetContainer" panelType\x3d"structureMaster_admin"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"treeLine" data-dojo-attach-point\x3d"treeLine"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/structureGroup.html":'\x3cdiv class\x3d"clearfix structureGroupItem"\x3e\n    \x3cdiv class\x3d"fl treeLine"\x3e\n        \x3cdiv class\x3d"treeLine-a" data-dojo-attach-point\x3d"treeLineA"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"treeLine-b" data-dojo-attach-point\x3d"treeLineB"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"fl teamLeaderContainer" data-dojo-attach-point\x3d"teamLeaderContainer"\x3e\n        \x3cdiv class\x3d"addTarget" data-dojo-attach-point\x3d"addMarsterTarget"\x3e\n            \x3cdiv class\x3d"dndTargetLogo"\x3e\x3c/div\x3e\n            \x3cspan\x3e\u62d6\u52a8\u6dfb\u52a0\u4e3b\u7ba1\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"teamLeaderDragAnchor" data-dojo-attach-point\x3d"teamLeaderDragAnchor" panelType\x3d"structureGroup_tl"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"teamLeaderDragContainer" panelType\x3d"teamLeader"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"fl groupNumberContainer" data-dojo-attach-point\x3d"groupNumberContainer"\x3e\n        \x3cdiv class\x3d"groupArrow"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"groupNumberDragContainer" panelType\x3d"mumber"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"addTarget" data-dojo-attach-point\x3d"addTarget"\x3e\n            \x3cdiv class\x3d"dndTargetLogo"\x3e\x3c/div\x3e\n            \x3cspan\x3e\u62d6\u52a8\u6dfb\u52a0\u7ec4\u5458\x3c/span\x3e\n            \x3cdiv class\x3d"dndTargetContainer" data-dojo-attach-point\x3d"dndTargetContainer" panelType\x3d"structureGroup_number"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:app/vm/tpl/changeBoss.html":'\x3cdiv class\x3d"change-boss"\x3e\n    \u73b0\u4efb\u8001\u603b\uff1a\x3cspan\x3e${name}\x3c/span\x3e  \x3ca data-dojo-attach-point\x3d"changeNode"\x3e\u91cd\u65b0\u6307\u5b9a\u7ba1\u7406\u5458\x3c/a\x3e\x3cspan class\x3d"boss-tip" data-dojo-attach-point\x3d"tipNode"\x3e\x26nbsp;\x3c/span\x3e\n\x3c/div\x3e',"*now":function(l){l(['dojo/i18n!*preload*app/nav/nls/Invite*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("app/nav/Invite","dojo/_base/declare dojo/_base/array dijit/_TemplatedMixin dojo/text!./tpl/invite.html app/util/_WidgetBase chanjet/util/JsonStore chanjet/grid/LightGrid dojo/_base/lang dojo/on dojo/topic dojo/query dojo/dom-class dojo/dom-style dojo/dom-construct chanjet/form/Tooltip chanjet/form/SearchBox chanjet/widget/Dialog chanjet/form/Select dojo/string app/vm/AddComInfo app/vm/EmployeeMarker app/vm/NoTeamPanel app/vm/StructureMaster app/vm/StructureGroup app/vm/MoveDialog dijit/form/Button dojo/date/locale app/vm/Field app/vm/ChangeBoss dojo/json".split(" "),
function(l,f,b,a,m,k,c,h,e,q,n,g,d,p,s,u,w,v,t,r,G,z,A,y,B,H,I,C,D,x){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});f=l("app/nav/Invite",[m,b],{templateString:a,grid:null,inviteInput:null,inviteColumns:null,adminColumns:null,turnOverColumns:null,hierarchyPanels:null,hierarchyTopics:null,init:function(a,b){this._destroyDialog();switch(a){case "field":this._showTab("setField");
break;case "turnOver":case "users":this._showTab("setpanel",b);break;case "setting":this._showTab("structure");break;default:this._showTab("invitepanel")}},_inviteClick:function(){router.go("invite/init/invitepanel/"+(new Date).getTime())},_fieldClick:function(){router.go("invite/init/field/"+(new Date).getTime())},_usersClick:function(){router.go("invite/init/users/"+(new Date).getTime())},_settingClick:function(){router.go("invite/init/setting/"+(new Date).getTime())},_showTab:function(a,b){var c=
"",c=core.isString(a)?a:a.currentTarget.getAttribute("panel"),d=this;this._confirmCancelStructure(function(){d._hideAllPanel();switch(c){case "invitepanel":d._showInvitePanel();break;case "setpanel":d._showSetPanel(b);break;case "structure":d._showStructurePanel();break;case "setField":d._showSetField()}})},postCreate:function(){var a=this;this.inviteInput=new E({send:function(){a.inviteByPhoneOrEmail(a.inviteInput.getInput(),a)},getComName:function(){a.validateComNameByPhoneOrEmail(a.inviteInput.getInput(),
a,function(b,c){c.orgName&&""!=c.orgName?a.inviteByPhoneOrEmail(b,a):(new r({callback:function(){a.inviteByPhoneOrEmail(b,a)}})).show()})}},this.inviteInputPanel);this.inviteColumns=[{field:"name",label:"\u59d3\u540d",style:{width:"130px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return a.name&&""!=a.name?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+App.escape(a.name)+"\x3c/div\x3e"):a.mobile&&""!=a.mobile?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+
a.mobile+"\x3c/div\x3e"):a.email&&""!=a.email?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+a.email.substring(0,a.email.indexOf("@"))+"\x3c/div\x3e"):p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e\x3c/div\x3e')}},{field:"mobile",label:"\u624b\u673a/\u90ae\u7bb1",style:{width:"180px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return a.mobile&&""!=a.mobile?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+a.mobile+
"\x3c/div\x3e"):a.email&&""!=a.email?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+a.email+"\x3c/div\x3e"):p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e\x3c/div\x3e')}},{field:"applyTime",label:"\u9080\u8bf7\u65f6\u95f4",style:{width:"110px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return p.toDom('\x3cdiv style\x3d"width:100%"\x3e'+b.substring(5,16)+"\x3c/div\x3e")}},{field:"firstLoginDate",label:"\u9996\u6b21\u767b\u5f55\u65f6\u95f4",
style:{width:"110px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){a=b?dojo.date.locale.format(new Date(b),{datePattern:"MM-dd",timePattern:"HH:mm"}):"";return p.toDom('\x3cdiv style\x3d"width:100%"\x3e'+a+"\x3c/div\x3e")}},{field:"ouReqStatus",label:"\u72b6\u6001",style:{width:"130px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){b=p.toDom("\x3cdiv class\x3d'status' \x3e\x3c/div\x3e");"1"==a.ouReqStatus?a.firstLoginStatus?b.appendChild(p.toDom("\x3cdiv\x3e\u5df2\u767b\u5f55\x3c/div\x3e")):
(b.appendChild(p.toDom("\x3cdiv class\x3d'level1' \x3e\u5df2\u5f00\u901a\x3c/div\x3e")),b.appendChild(p.toDom("\x3cdiv class\x3d'level2'\x3e\u5f85\u767b\u5f55\x3c/div\x3e"))):"1"==a.overdue?(b.appendChild(p.toDom("\x3cdiv class\x3d'resend' \x3e\u91cd\u53d1\u9080\u8bf7\x3c/div\x3e")),b.appendChild(p.toDom("\x3cdiv class\x3d'resendmsg'\x3e\u9080\u8bf7\u5df2\u8fc7\u671f\x3c/div\x3e"))):(b.appendChild(p.toDom("\x3cdiv class\x3d'level1' \x3e\u5df2\u9080\u8bf7\x3c/div\x3e")),b.appendChild(p.toDom("\x3cdiv class\x3d'level2'\x3e\u5f85\u767b\u5f55\x3c/div\x3e")));
return b}}];this.setColumns=[{field:"headPic",label:"\u5934\u50cf",sortable:!1,style:{width:"90px"},resizeable:!1,formatter:function(a){return a?"\x3cimg class\x3d'contact_logo' onerror\x3d'App.nofind(this)'  src\x3d'"+App.getAvatarWithSize(a,"small")+"'/\x3e":"\x3cimg class\x3d'contact_logo' src\x3d'"+App.avatar+"'/\x3e"}},{field:"name",style:{width:"110px"},label:"\u540d\u79f0",sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return a.name&&""!=a.name?p.toDom('\x3cdiv style\x3d"width:180px;overflow:hidden;text-overflow: ellipsis;"\x3e'+
App.escape(a.name)+"\x3c/div\x3e"):a.phone&&""!=a.phone?p.toDom('\x3cdiv style\x3d"width:180px;overflow:hidden;text-overflow: ellipsis;"\x3e'+a.phone+"\x3c/div\x3e"):a.email&&""!=a.email?p.toDom('\x3cdiv style\x3d"width:180px;overflow:hidden;text-overflow: ellipsis;"\x3e'+a.email.substring(0,a.email.indexOf("@"))+"\x3c/div\x3e"):p.toDom("\x3cdiv\x3e\x3c/div\x3e")}},{field:"role",label:"\u89d2\u8272",style:{width:"70px"},sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){b="\u4e1a\u52a1\u5458";
if("disable"==a.status)b="\u5df2\u505c\u7528";else switch(a.role){case "boss":b="\u8001\u677f";break;case "manager":b="\u526f\u603b";break;case "supervisor":b="\u4e3b\u7ba1";break;case "salesman":b="\u4e1a\u52a1\u5458"}return p.toDom('\x3cdiv style\x3d"width:100%"\x3e'+b+"\x3c/div\x3e")}},{field:"phone",style:{width:"180px"},label:"\u624b\u673a/\u90ae\u7bb1",sortable:!1,resizeable:!1,renderCell:function(a,b,c,d){return a.phone&&""!=a.phone?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+
a.phone+"\x3c/div\x3e"):a.email&&""!=a.email?p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e'+a.email+"\x3c/div\x3e"):p.toDom('\x3cdiv style\x3d"overflow:hidden;text-overflow: ellipsis;"\x3e\x3c/div\x3e')}},{field:"customercount",style:{width:"80px"},label:"\u7ef4\u62a4\u5ba2\u6237\u6570",sortable:!1,resizeable:!1},{field:"opt",label:"\u64cd\u4f5c",style:{width:"183px"},sortable:!1,resizeable:!1,renderCell:function(b,c,d,f){c=p.toDom('\x3cdiv style\x3d"width:100%"\x3e\x3c/div\x3e');
f=d="";b.customercount&&0<parseInt(b.customercount)&&(d+='\x3cdiv class\x3d"fl turnOverButton" userId\x3d"'+b.id+'" \x3e\u5168\u90e8\u79fb\u4ea4\x3c/div\x3e',d=p.toDom(d),f+='\x3cdiv class\x3d"fl turnOverButton" userId\x3d"'+b.id+'" \x3e\u90e8\u5206\u79fb\u4ea4\x3c/div\x3e',b=p.toDom(f),f=h.hitch(a,a.turnOverHandler),e(b,"click",f),f=h.hitch(a,a.turnOverAllHandler),e(d,"click",f),c.appendChild(d),c.appendChild(b));return c}},{field:"opt",label:" ",style:{width:"100px"},sortable:!1,resizeable:!1,renderCell:function(b,
c,d,f){c=p.toDom('\x3cdiv style\x3d"width:100%"\x3e\x3c/div\x3e');"disable"!=b.status&&(d=p.toDom('\x3cdiv class\x3d"stopButton fl" userId\x3d"'+b.id+'" isSuperUser\x3d"'+b.isSuperUser+'"\x3e\u505c\u7528\x3c/div\x3e'),e(d,"click",function(c){a.onUnAuth(c,b.customercount)}),c.appendChild(d));return c}}];App.Invite=App.Invite||{};App.Invite.hierarchyPanels=this.hierarchyPanels={noTeamEmployeePanel:null,structureMasterPanel:null,structureGroups:[]};this.hierarchyTopics=[]},destroy:function(){this._destroyDialog();
this._destroyStructurePanel();this.inherited(arguments)},_destroyDialog:function(){this.changeBoss&&(this.changeBoss.destroy(),this.changeBoss=null)},_hideAllPanel:function(){var a=this;n("li",this.userButtonPanel).forEach(function(b){a.removeClass(b,"lion")});this.setStyle(this.invitepanel,"display","none");this.setStyle(this.setpanel,"display","none");this.setStyle(this.trunOverPanel,"display","none");this.setStyle(this.structurePanel,"display","none");this.setStyle(this.setFieldPanel,"display",
"none");this.inviteInput.tipComps.hideTip()},_showInvitePanel:function(a){var b=this;$("#conditionpanel").removeClass("hide");$("#admin-header").removeClass("hide");this.addClass(this.invitepanelLI,"lion");this.setStyle(this.invitepanel,"display","block");this.grid&&(this.grid.destroy(),this.inviteGridDiv.innerHTML="");a||this.inviteInput.clear();a=new k({url:URL.inviteList,autoLoad:!0,pageSize:10,method:"GET",idProperty:"userId",baseParams:{param:""}});a.idProperty="userId";this.grid=new c({store:a,
loadMask:!0,loadModel:"Pagination",pageSize:10,columns:this.inviteColumns,style:{height:"820px"}});this.inviteGridDiv.appendChild(this.grid.domNode);this.own(e(a,"datachanged",h.hitch(this,this.updateInviteMsg)));this.grid.on(".dgrid-row .resend :click",function(a){a=b.grid.row(a);var c="";""==c&&(a.data.mobile&&""!=a.data.mobile)&&(c=a.data.mobile);""==c&&(a.data.email&&""!=a.data.email)&&(c=a.data.email);""!=c&&h.hitch(this,b.inviteByPhoneOrEmail)(c,b)})},_showSetPanel:function(a){var b=this;this.addClass(this.setpanelLI,
"lion");this.setStyle(this.setpanel,"display","block");this.grid&&(this.grid.destroy(),this.setgridpanel.innerHTML="");var d=this._setStore=new k({url:URL.privilegeSearch,pageSize:10,method:"GET"}),f="enable";a&&"%"==a.charAt(0)&&(a=x.parse(decodeURIComponent(a)),d.pageNo=parseInt(a.pageNo),f=a.status,"enable"==f?(core.addClass(this.userInNode,"link"),core.removeClass(this.userOutNode,"link")):(core.addClass(this.userOutNode,"link"),core.removeClass(this.userInNode,"link")));d.on("datachanged",function(a){var c=
a.data;"load"==a.tag&&(a=d._params.status,"enable"==a?(b.userInNode.innerHTML="\u5728\u7528\uff08"+c.total+"\uff09",xhr.get(URL.privilegeSearch,{pagesize:2,pageno:1,status:"disable"},function(a){b.userOutNode.innerHTML="\u5df2\u505c\u7528\uff08"+a.total+"\uff09"})):"disable"==a&&(b.userOutNode.innerHTML="\u5df2\u505c\u7528\uff08"+c.total+"\uff09",xhr.get(URL.privilegeSearch,{pagesize:2,pageno:1,status:"enable"},function(a){b.userInNode.innerHTML="\u5728\u7528\uff08"+a.total+"\uff09"})))});this.grid=
new c({store:d,loadMask:!0,loadModel:"Pagination",pageSize:10,columns:this.setColumns,style:{height:"820px"}});this.setgridpanel.appendChild(this.grid.domNode);this.grid.on(".dgrid-row .normalUser:mouseover",function(a){g.add(this,"cancleUser");g.remove(this,"normalUser");this.innerHTML="\u53d6\u6d88\u7ba1\u7406\u5458"});this.grid.on(".dgrid-row .cancleUser:mouseout",function(a){g.remove(this,"cancleUser");g.add(this,"normalUser");this.innerHTML='\x3cspan class\x3d"userIcon"\x3e\x3c/span\x3e\u7ba1\u7406\u5458'});
this.own(e(this.userInNode,"click",function(a){d.load({params:{status:"enable",pageno:1}});core.addClass(this,"link");core.removeClass(b.userOutNode,"link")}),e(this.userOutNode,"click",function(a){d.load({params:{status:"disable",pageno:1}});core.addClass(this,"link");core.removeClass(b.userInNode,"link")}));d.load({params:{status:f}})},_showSetField:function(){this.addClass(this.setFieldNode,"lion");this.setStyle(this.setFieldPanel,"display","block");this.setField?this.setField.FieldDetailComp._onBack():
(this.setField=(new C({})).placeAt(this.setFieldPanel)).init()},_showStructurePanel:function(){this.changeBoss||(this.changeBoss=new D({}),this.changeBoss.placeAt(this.changeBossNode));this._reloadStructurePanel();this._structureHashChangeHandler&&(this._structureHashChangeHandler.remove(),this._structureHashChangeHandler=null);this._structureHashChangeHandler=q.subscribe("LeftMenu/switchConfirm",h.hitch(this,this._confirmCancelStructure))},_reloadStructurePanel:function(){this._destroyStructurePanel();
this.hierarchyTopics.push(q.subscribe("saveHierarchyUsers",h.hitch(this,this.saveHierarchyUsers)));this.hierarchyTopics.push(q.subscribe("cancelHierarchyEdit",h.hitch(this,this.cancelHierarchyEdit)));this.addClass(this.structureLI,"lion");this.setStyle(this.structurePanel,"display","block");this.getHierarchyUsers(function(a,b){function c(){if(!e||e.get("teamLeader")||0<e.numbersList.length)e=new y({isBlank:!0,metaData:a,panel:b.structureGroupList}),b.hierarchyPanels.structureGroups.push(e)}var d=
new z({metaData:a,panel:b.noTeamPanel});b.hierarchyPanels.noTeamEmployeePanel=d;d=new A({metaData:a,panel:b.structureMaster});b.hierarchyPanels.structureMasterPanel=d;b._createStructureGroupData(a);var e=null;b.addTeamLeaderObserveHandler=q.subscribe("addBlankTeam",c);c();b.addRemoveEmployeeObserveHandler=q.subscribe("removeEmployee",function(a){a.context&&(!a.context.get("teamLeader")&&0==a.context.numbersList.length&&!a.context.isBlank)&&(b.structureGroupList.removeChild(a.context.domNode),a=b.hierarchyPanels.structureGroups.indexOf(a.context),
-1!=a&&b.hierarchyPanels.structureGroups.splice(a,1))})},this)},_destroyStructurePanel:function(){this.hierarchyPanels.noTeamEmployeePanel&&(this.hierarchyPanels.noTeamEmployeePanel.destroy(),this.hierarchyPanels.noTeamEmployeePanel=null);this.hierarchyPanels.structureMasterPanel&&(this.hierarchyPanels.structureMasterPanel.destroy(),this.hierarchyPanels.structureMasterPanel=null);for(var a=this.hierarchyPanels.structureGroups.length;0<a;)this.hierarchyPanels.structureGroups.splice(0,1)[0].destroy(),
a--;this.addTeamLeaderObserveHandler&&this.addTeamLeaderObserveHandler.remove();this.addTeamLeaderObserveHandler=null;this.addRemoveEmployeeObserveHandler&&this.addRemoveEmployeeObserveHandler.remove();for(this.addRemoveEmployeeObserveHandler=null;0<this.hierarchyTopics.length;)this.hierarchyTopics.splice(0,1)[0].remove()},_confirmCancelStructure:function(a){var b=this;this.hierarchyPanels.noTeamEmployeePanel&&!this.hierarchyPanels.noTeamEmployeePanel.get("buttonDisable")?App.confirm("\u4eb2\uff0c\u6743\u9650\u8bbe\u7f6e\u8fd8\u6ca1\u4fdd\u5b58\uff0c\u4f60\u786e\u5b9a\u8981\u820d\u5f03\u5df2\u5b8c\u6210\u6743\u9650\u8bbe\u7f6e\u5417\uff1f",
"\u63d0\u793a",{labels:"\u4e0d\u820d\u5f03,\u820d\u5f03",confirm:function(c,d){c.close();a?(b._destroyStructurePanel(),a()):b._reloadStructurePanel()}}):(this._destroyStructurePanel(),a&&a())},onUnAuth:function(a,b){var c=this,d=a.currentTarget.getAttribute("userId"),e=this._setStore.getById(d);"true"==a.currentTarget.getAttribute("isSuperUser")||d==App.userId?App.alert("\u8be5\u5e10\u53f7\u662f\u4f01\u4e1a\u7684\u521b\u5efa\u8005\uff0c\u4e0d\u80fd\u88ab\u505c\u7528"):(new F({showName:e.name||"",
stopUserId:d,autoDestroy:!0,num:b,callback:function(a){App.showLoading();var b=URL.inviteUnauth,e={userId:d};a.toUser&&(b=URL.inviteUnauthTrans,e.transId=a.toUser);xhr.get(b,e,function(a){App.hideLoading();a.result||"true"==a.result?c.grid.store.load({params:{status:"enable"}}):App.alert(a.message,"\u53d6\u6d88\u6388\u6743")});a.scope.close()}})).show()},inviteByPhoneOrEmail:function(a,b){(function(){App.showLoading();xhr.post({url:URL.inviteSend,params:{account:a},success:function(a){App.hideLoading();
b._showInvitePanel(!0)},error:function(){App.hideLoading()}})})()},validateComNameByPhoneOrEmail:function(a,b,c){App.showLoading();b.ajaxGet({url:"invite/organization",success:function(d){App.hideLoading();c&&c(a,d,b)},error:function(){App.hideLoading()}})},getHierarchyUsers:function(a,b){var c=this;App.showLoading();b.ajaxGet({url:"sysreluser/getHierarchyUsers",success:function(d){c.orgUsersNumber=d.length;App.hideLoading();a&&a(d,b)},error:function(){App.hideLoading()}})},saveHierarchyUsers:function(a){a=
[];a=a.concat(this.hierarchyPanels.noTeamEmployeePanel.getHierarchyData());a=a.concat(this.hierarchyPanels.structureMasterPanel.getHierarchyData());for(var b=0,c=this.hierarchyPanels.structureGroups.length;b<c;b++)a=a.concat(this.hierarchyPanels.structureGroups[b].getHierarchyData());App.showLoading();var d=this;xhr.post({url:URL.saveHierarchyUsers,timeout:30<(this.orgUsersNumber||0)?3E5:2E4,params:a,success:function(a){App.hideLoading();d._reloadStructurePanel()},error:function(){App.hideLoading()}})},
cancelHierarchyEdit:function(){this._reloadStructurePanel()},_createStructureGroupData:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(2==d.userLevel){for(var e=[d],f=0;f<c;f++){var g=a[f];(g.parentId==d.userId||1==g.userLevel&&"boss"==g.userRole)&&e.push(g)}d=new y({metaData:e,panel:this.structureGroupList});this.hierarchyPanels.structureGroups.push(d)}}},updateInviteMsg:function(a){"load"==a.tag&&(this.authnum1.innerHTML=parseInt(a.data.authinfo.entSubLincese),this.authtotal1.innerHTML=
parseInt(a.data.authinfo.entSubLincese)-parseInt(a.data.authinfo.entAvalibleLincese))},turnOverHandler:function(a){var b=a.currentTarget.getAttribute("userId"),c="";a=this.grid.store;for(var d=a.data,e=0;e<d.length;++e)d[e].id==b&&(c=d[e].name);b={ownerId:b,ownerName:c};router.go("invite/init/turnOver/"+encodeURIComponent(x.stringify({pageNo:a.pageNo,status:a._params.status}))+"/"+(new Date).valueOf(),!0);router.go("customer_move/init/"+encodeURIComponent(x.stringify(b)))},turnOverAllHandler:function(a){a=
a.currentTarget.getAttribute("userId");a=new B({owner:this,fromOwnerId:a,moveFlag:"MOVEALL",queryValue:"",selectIds:[]});a.on("saveSuccess",h.hitch(this,function(a){this._refreshMoveGrid()}));a.show()},_refreshMoveGrid:function(){this.grid.store.load({params:{status:"enable"}})}});var E=l([m,b],{templateString:"\x3cdiv class\x3d'InviteUserWrapper' data-dojo-attach-point\x3d'mainPanel'\x3e\x3c/div\x3e",widget:null,tipComps:null,postCreate:function(){this.widget=new u({boxWidth:658,boxHeight:43,defaultText:"\u8f93\u5165\u540c\u4e8b\u7684\u624b\u673a\u53f7\u6216\u90ae\u7bb1\u5730\u5740\uff08\u6bcf\u6b21\u53ea\u80fd\u9080\u8bf7\u4e00\u4e2a\u4eba\uff09"});
this.widget.submitNode.innerHTML="\u9080\u8bf7";this.addClass(this.widget.submitNode,"submitBtnInvite");this.setStyle(this.widget.clearNode,"right","80px");this.addClass(this.widget.inputDivNode,"inviteDivInputNode");this.mainPanel.appendChild(this.widget.domNode);this.tipComps=new s({targetNode:this.widget.inputNode,message:"",preventDefault:!0});this._bindEvent()},_bindEvent:function(){this.own(e(this.widget.inputNode,"blur",h.hitch(this,this.legal)),e(this.widget.inputNode,"focus",h.hitch(this,
this.legal)),e(this.widget,"searchClear",h.hitch(this,this.legal)),e(this.widget,"searchEvent",h.hitch(this,this._validateComName)))},_sendEventHandler:function(){this.validate()&&this.send()},_validateComName:function(){this.validate()&&this.getComName&&this.getComName()},getComName:null,send:function(){},validate:function(){var a=t.trim(this.widget.getInput());if(""==a)return this.empty(),!1;var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(/^(1[0-9][0-9])\d{8}$/.test(a)||
b.test(a))return this.legal(),!0;this.unLegal();return!1},legal:function(){this.tipComps.hideTip();this.removeClass(this.widget.inputDivNode,"inviteDivInputNodeUnLegal")},unLegal:function(){this.tipComps.showTip("\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u624b\u673a\u53f7\u6216\u90ae\u7bb1");this.addClass(this.widget.inputDivNode,"inviteDivInputNodeUnLegal")},empty:function(){return""==t.trim(this.widget.getInput())?(this.tipComps.showTip("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u6216\u90ae\u7bb1"),this.addClass(this.widget.inputDivNode,
"inviteDivInputNodeUnLegal"),!1):!0},destroy:function(){this.tipComps&&this.tipComps.destroy();this.inherited(arguments)},getInput:function(){return t.trim(this.widget.getInput())},setInput:function(a){this.widget.setInput(a)},clear:function(){this.widget._onClear()}}),F=l([m,b],{templateString:'\x3cdiv class\x3d"stop-user-dialog"\x3e\x3cdiv class\x3d"stop-info"\x3e\u505c\u7528\u540e\x3cspan class\x3d"stop-username"\x3e"${showName}"\x3c/span\x3e\u5c06\u4e0d\u80fd\u4f7f\u7528\u8d35\u516c\u53f8\u7684\u5ba2\u6237\u7ba1\u5bb6 , \u662f\u5426\u505c\u7528 ?\x3c/div\x3e\x3cdiv class\x3d"stop-action ${numCls}"\x3e\x3cinput type\x3d"checkbox" value\x3d"" checked\x3d"checked" data-dojo-attach-point\x3d"checkNode"\x3e\x3cspan \x3e\u505c\u7528\u5e76\u79fb\u4ea4\u5168\u90e8\u5ba2\u6237\u7ed9\x3c/span\x3e\x3cdiv data-dojo-attach-point\x3d"selectNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"stop-notice" data-dojo-attach-point\x3d"noticeNode"\x3e\u8bf7\u9009\u62e9\u8981\u79fb\u4ea4\u7684\u4e1a\u52a1\u5458\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
showName:"",stopUserId:0,dialogComps:null,selectComps:null,callback:null,postMixInProperties:function(){this.numCls=this.num?"":"hide"},postCreate:function(){this.inherited(arguments);this._initComps();this._initEvents()},destroy:function(){this.selectComps.destroy();this.inherited(arguments)},_initComps:function(){this.selectComps=new v({options:[{value:"",label:"\u9009\u62e9\u4e1a\u52a1\u5458",selectLabel:"\u9009\u62e9\u4e1a\u52a1\u5458",selected:!0}],labelAttr:"label",value:"",maxHeight:400,style:{marginLeft:"16px",
width:"170px"},_fillContentHandler:function(){}},this.selectNode);var a=this;this.dialogComps=new w({autoDestroy:!0,"class":"stop-user-confirm",title:"\u63d0\u793a",bottomButtons:[{label:"\u53d6\u6d88",sTag:"cancel",baseClass:"whiteButton"},{label:"\u505c\u7528",sTag:"ok",baseClass:"whiteButton"}],contentMinHeight:"100px",style:{width:"600px"},buttonClick:function(b,c,d){"ok"==d?a.validate()&&a.callback&&a.callback({toUser:a.selectComps.getValue(),scope:this}):this.destroy()}});this.dialogComps.addChild({domNode:this.domNode})},
_initEvents:function(){this.own(e(this.checkNode,"change",h.hitch(this,this._checkNodeClick)),e(this.selectComps,"change",h.hitch(this,this._selectChange)),e(this.selectComps,"focus",h.hitch(this,this._selectFocus)))},_checkNodeClick:function(){this.selectComps.set("disabled",!this.checkNode.checked);this.validate()},_selectChange:function(){setTimeout(h.hitch(this,function(){this.validate()}),100)},_selectFocus:function(){this.userDataReady||xhr.get(URL.hierarchyUsers,h.hitch(this,function(a){this.userDataReady=
!0;for(var b=0;b<a.length;++b)a[b].userId!=this.stopUserId&&this.selectComps.addOption({value:a[b].userId,label:a[b].name||a[b].mobile||a[b].email,selectLabel:a[b].name})}))},validate:function(){if(!this.num)return!0;if(this.checkNode.checked&&""==this.selectComps.getValue())return d.set(this.selectComps.domNode,{borderColor:"#e05454",background:"#ffd6d5"}),d.set(this.noticeNode,"display","block"),!1;d.set(this.selectComps.domNode,{borderColor:"",background:""});d.set(this.noticeNode,"display","none");
return!0},show:function(){this.dialogComps.show()}});return f});
